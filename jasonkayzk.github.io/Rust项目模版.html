<h2><a href="https://github.com/jasonkayzk/jasonkayzk.github.io/blob/master/source/_posts/Rusté¡¹ç›®æ¨¡ç‰ˆ.md">ä»“åº“æºæ–‡</a>ï¼Œ<a href="https://jasonkayzk.github.io/2022/11/30/Rusté¡¹ç›®æ¨¡ç‰ˆ">ç«™ç‚¹åŸæ–‡</a></h2>
<p>ç”¨è¿‡npmçš„å‰ç«¯åŒå­¦éƒ½çŸ¥é“ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡ç‰ˆä»“åº“å»åˆ›å»ºä¸€ä¸ªæ–°çš„å‰ç«¯é¡¹ç›®ï¼Œè¿™æ ·å°±ä¸ç”¨ä»é›¶å¼€å§‹é…ç½®ä¸€å¤§å †ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿äº†ï¼ŒRustä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨cargo-generateé€šè¿‡æ¨¡ç‰ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼›</p>
<p>æœ¬æ–‡è®²è§£äº†å¦‚ä½•å¼€å‘ä¸€ä¸ªRusté¡¹ç›®æ¨¡ç‰ˆï¼Œå¹¶åŸºäºè¯¥æ¨¡ç‰ˆåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼›</p>
<p>æºä»£ç ï¼š</p>
<ul>
<li><a href="https://github.com/JasonkayZK/rust-template">https://github.com/JasonkayZK/rust-template</a></li>
</ul>
<p>&lt;br/&gt;</p>
&lt;!--more--&gt;

<h1><strong>Rusté¡¹ç›®æ¨¡ç‰ˆ</strong></h1>
<h2><strong>å‰è¨€</strong></h2>
<p>æœ€è¿‘é™†é™†ç»­ç»­å¼€äº†ä¸€äº›æ–°çš„å‘ï¼Œä½†æ˜¯æ¯ä¸ª repo éƒ½è¦é‡æ–°å¢åŠ  CIã€pre-commit ç­‰ç­‰çš„é…ç½®ï¼Œå¾ˆæ˜¯éº»çƒ¦ï¼›</p>
<p>æ‰€ä»¥å°±èŠ±äº†åŠä¸ªå°æ—¶ï¼Œæäº†ä¸€ä¸ª Rust é¡¹ç›®æ¨¡ç‰ˆï¼Œä»¥åéƒ½å¯ä»¥ç›´æ¥ç”¨è¿™ä¸ªæ¨¡ç‰ˆåˆ›å»ºæ–°çš„å‘äº†ï½</p>
<p>&lt;br/&gt;</p>
<h2><strong>ä¸€ä¸ªæ¨¡æ¿é¡¹ç›®</strong></h2>
<p>Rust æ¨¡ç‰ˆé¡¹ç›®å’Œé€šå¸¸çš„ Cargo é¡¹ç›®å¹¶æ— ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Œåªæ˜¯åœ¨ä¸€äº›éœ€è¦æ›¿æ¢çš„åœ°æ–¹ä½¿ç”¨ <a href="https://handlebarsjs.com/">Handlebars</a> è¯­æ³•åšäº†å ä½ï¼›</p>
<p>è¿™æ˜¯æˆ‘åˆ›å»ºçš„æ¨¡ç‰ˆé¡¹ç›®ï¼š</p>
<pre><code class="lang-bash">$ tree  
.
â”œâ”€â”€ CHANGELOG.md # æ ‡è®°è¿­ä»£å†…å®¹
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ LICENSE
â”œâ”€â”€ Makefile
â”œâ”€â”€ README.md
â”œâ”€â”€ cargo-generate.toml # é‡è¦ï¼cargo-generate å¿…é¡»ç”¨åˆ°çš„æ–‡ä»¶ï¼
â”œâ”€â”€ rust-toolchain.toml
â”œâ”€â”€ src
 Â Â  â”œâ”€â”€ lib.rs
 Â Â  â””â”€â”€ main.rs

7 directories, 11 files
</code></pre>
<p>ä¸‹é¢å…·ä½“æ¥çœ‹ï¼›</p>
<p>&lt;br/&gt;</p>
<h3><strong>å®šä¹‰cargo-generate</strong></h3>
<p>å£°æ˜é¡¹ç›®æ¨¡æ¿çš„å…³é”®å†…å®¹å°±æ˜¯ <code>cargo-generate.toml</code> é…ç½®æ–‡ä»¶ï¼</p>
<p><strong>åœ¨ä½¿ç”¨ <code>cargo generate</code> å‘½ä»¤æ—¶é¦–å…ˆå°±ä¼šè·å–è¿™ä¸ªé‡Œé¢çš„é…ç½®ï¼Œç”Ÿæˆå‘½ä»¤è¡Œæ–‡ä»¶ï¼Œæœ€åå†æ›¿æ¢æ¨¡æ¿ä¸­çš„å ä½ç¬¦ï¼</strong></p>
<p>ä¸‹é¢æ¥çœ‹è¿™ä¸ªé…ç½®ï¼š</p>
<pre><code class="lang-toml">[template]
cargo_generate_version = "&gt;=0.10.0"

[placeholders.gh-username]
type = "string"
prompt = "GitHub username (or organization)"
# The username cannot end with a hyphen, too, but
# this requirement is not captured by the regex at the moment.
regex = "^[A-Za-z0-9][A-Za-z0-9-]{0,38}$"

[placeholders.project-description]
type = "string"
prompt = "Project description"

[conditional.'crate_type == "lib"']
ignore = [ "src/main.rs" ]

[conditional.'crate_type == "bin"']
ignore = [ "src/lib.rs" ]
</code></pre>
<p>æˆ‘ä»¬å£°æ˜äº† <code>gh-username</code>ã€<code>project-description</code> åœ¨åé¢æˆ‘ä»¬çš„æ¨¡ç‰ˆä¸­ä¼šç”¨åˆ°ï¼›</p>
<p><strong>é™¤äº†ä¸Šé¢æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„è¿™äº›å˜é‡ï¼Œcargo-generate è¿˜åŒ…æ‹¬äº†ä¸€äº›å†…ç½®çš„å˜é‡ï¼Œä¾‹å¦‚ï¼š<code>project-name</code>ã€<code>crate_type</code> ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š</strong></p>
<ul>
<li><a href="https://cargo-generate.github.io/cargo-generate/templates/builtin_placeholders.html">https://cargo-generate.github.io/cargo-generate/templates/builtin_placeholders.html</a></li>
</ul>
<p>åŒæ—¶ï¼Œä¸‹é¢åˆ¤æ–­äº† crate çš„ç±»å‹ï¼š</p>
<ul>
<li><strong>å¦‚æœæ˜¯ libç±»å‹ï¼šåˆ™ç§»é™¤ <code>src/main.rs</code>ï¼›</strong></li>
<li><strong>å¦‚æœæ˜¯ binç±»å‹ï¼šåˆ™ç§»é™¤ <code>src/lib.rs</code>ï¼›</strong></li>
</ul>
<p>&lt;br/&gt;</p>
<h3><strong>å¼•å…¥å˜é‡</strong></h3>
<p>ä¸Šé¢å®šä¹‰å®Œäº†å˜é‡ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿™äº›å˜é‡ï¼›</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>Cargo.toml</p>
<pre><code class="lang-toml">[package]
name = "{{project-name}}"
version = "0.1.0"
edition = "2021"
description = "{{project-description}}"
repository = "https://github.com/{{gh-username}}/{{project-name}}"
license-file = "LICENSE"
</code></pre>
<p>License</p>
<pre><code>MIT License

Copyright (c) 2022 {{authors}}
</code></pre>
<p>ç”šè‡³å¯ä»¥ä½¿ç”¨ä¸€äº›æ¡ä»¶è¯­å¥ï¼Œä¾‹å¦‚ï¼š</p>
<p>.gitignore</p>
<pre><code>{% if crate_type == "lib" %}
Cargo.lock
{% endif %}
</code></pre>
<p><strong>å¦‚æœæ˜¯ lib ç±»å‹çš„ crate åˆ™åœ¨ gitignore ä¸­åŠ å…¥æ­¤è¡Œï¼Œå¦åˆ™ bin ç±»å‹çš„ crate éœ€è¦æäº¤ Cargo.lockï¼</strong></p>
<p>&lt;br/&gt;</p>
<h3><strong>å‘å¸ƒæ¨¡æ¿</strong></h3>
<p>ç¼–å†™å®Œæˆåï¼Œå°†ä»£ç æ¨åˆ° Github å³å¯ï¼š</p>
<ul>
<li><a href="https://github.com/JasonkayZK/rust-template">https://github.com/JasonkayZK/rust-template</a></li>
</ul>
<p>&lt;br/&gt;</p>
<h2><strong>ä½¿ç”¨æ¨¡ç‰ˆåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®</strong></h2>
<p>ä½¿ç”¨æ¨¡ç‰ˆåˆ›å»ºæ–°é¡¹ç›®éœ€è¦å®‰è£… cargo-generate å·¥å…·ï¼š</p>
<pre><code class="lang-bash">cargo install cargo-generate
</code></pre>
<p>éšåï¼Œç›´æ¥é€šè¿‡å·¥å…·å®‰è£…å³å¯ï¼Œä¾‹å¦‚ä¸€ä¸ª lib é¡¹ç›®ï¼š</p>
<pre><code class="lang-bash">$ cargo generate --git https://github.com/JasonkayZK/rust-template --lib

ğŸ¤·   Project Name: my-lib
ğŸ”§   Destination: /Users/JasonkayZK/self-workspace/my-lib ...
ğŸ”§   project-name: my-lib ...
ğŸ”§   Generating template ...
ğŸ¤·   Project description: A demo lib.
ğŸ¤·   GitHub username (or organization): JasonkayZK
[ 1/15]   Done: .github/dependabot.yml                                                                                    [ 2/15]   Done: .github/workflows/ci.yaml                                                                                 [ 3/15]   Done: .github/workflows                                                                                         [ 4/15]   Done: .github                                                                                                   [ 5/15]   Done: .gitignore                                                                                                [ 6/15]   Done: .pre-commit-config.yaml                                                                                   [ 7/15]   Done: CHANGELOG.md                                                                                              [ 8/15]   Done: Cargo.lock                                                                                                [ 9/15]   Done: Cargo.toml                                                                                                [10/15]   Done: LICENSE                                                                                                   [11/15]   Done: Makefile                                                                                                  [12/15]   Done: README.md                                                                                                 [13/15]   Done: rust-toolchain.toml                                                                                       [14/15]   Done: src/lib.rs                                                                                                [15/15]   Done: src                                                                                                       ğŸ”§   Moving generated files into: `/Users/JasonkayZK/self-workspace/my-lib`...
ğŸ’¡   Initializing a fresh Git repository
âœ¨   Done! New project created /Users/JasonkayZK/self-workspace/my-lib
</code></pre>
<p>ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼ˆå‘ï¼‰å³åˆ»åˆå§‹åŒ–å®Œæˆï¼Œå¯ä»¥å¼€å§‹ happy coding äº†ï¼</p>
<p>&lt;br/&gt;</p>
<h2><strong>æ”¶è—æ¨¡ç‰ˆ</strong></h2>
<p>å¦‚æœä½ è§‰å¾—æŸä¸ªæ¨¡ç‰ˆç‰¹åˆ«å¥½ç”¨ï¼Œä½ å¯ä»¥å°†å®ƒä»¬æ”¶è—ï¼›</p>
<blockquote><p><strong>æ¯•ç«Ÿä¸æ˜¯æ‰€æœ‰äººéƒ½èƒ½è®°å¾—ä½æ¨¡ç‰ˆä»“åº“çš„åŸŸåï¼›</strong></p>
</blockquote>
<p>åˆ›å»º <code>$CARGO_HOME/cargo-generate.toml</code>ï¼š</p>
<pre><code class="lang-bash">$ vi ~/.cargo/cargo-generate.toml
</code></pre>
<p>å¢åŠ é…ç½®ï¼š</p>
<pre><code class="lang-toml">[favorites.default]
git = "https://github.com/JasonkayZK/rust-template"
branch = "main"
</code></pre>
<p>æˆ‘ç»™è¿™ä¸ªæ¨¡ç‰ˆèµ·çš„åå­—ä¸º <code>default</code>ï¼Œå¦‚æœä½ æœ‰å…¶ä»–åœºæ™¯çš„æ¨¡ç‰ˆï¼Œå¯ä»¥èµ·åä¸º <code>wasm</code>ã€<code>yew-demo</code> ç­‰ç­‰ï¼›</p>
<p>éšåå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ï¼Œä¾‹å¦‚åˆ›å»ºä¸€ä¸ª bin é¡¹ç›®ï¼š</p>
<pre><code class="lang-bash">$ cargo generate default

ğŸ’¡   Using application config: /Users/JasonkayZK/.cargo/cargo-generate.toml
ğŸ¤·   Project Name: my-bin
ğŸ”§   Destination: /Users/JasonkayZK/self-workspace/my-bin ...
ğŸ”§   project-name: my-bin ...
ğŸ”§   Generating template ...
ğŸ¤·   Project description: a bin demo.
ğŸ¤·   GitHub username (or organization): JasonkayZK
[ 1/15]   Done: .github/dependabot.yml                                                                       [ 2/15]   Done: .github/workflows/ci.yaml                                                                    [ 3/15]   Done: .github/workflows                                                                            [ 4/15]   Done: .github                                                                                      [ 5/15]   Done: .gitignore                                                                                   [ 6/15]   Done: .pre-commit-config.yaml                                                                      [ 7/15]   Done: CHANGELOG.md                                                                                 [ 8/15]   Done: Cargo.lock                                                                                   [ 9/15]   Done: Cargo.toml                                                                                   [10/15]   Done: LICENSE                                                                                      [11/15]   Done: Makefile                                                                                     [12/15]   Done: README.md                                                                                    [13/15]   Done: rust-toolchain.toml                                                                          [14/15]   Done: src/main.rs                                                                                  [15/15]   Done: src                                                                                          ğŸ”§   Moving generated files into: `/Users/JasonkayZK/self-workspace/my-bin`...
ğŸ’¡   Initializing a fresh Git repository
âœ¨   Done! New project created /Users/JasonkayZK/self-workspace/my-bin
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æç¤ºï¼š</p>
<pre><code>ğŸ’¡   Using application config: /Users/JasonkayZK/.cargo/cargo-generate.toml
</code></pre>
<p>æ›´å¤šé…ç½®è§å®˜æ–¹æ–‡æ¡£ï¼š</p>
<ul>
<li><a href="https://cargo-generate.github.io/cargo-generate/favorites.html?highlight=default#favorites">https://cargo-generate.github.io/cargo-generate/favorites.html?highlight=default#favorites</a></li>
</ul>
<p>&lt;br/&gt;</p>
<h1><strong>é™„å½•</strong></h1>
<p>æºä»£ç ï¼š</p>
<ul>
<li><a href="https://github.com/JasonkayZK/rust-template">https://github.com/JasonkayZK/rust-template</a></li>
</ul>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://github.com/cargo-generate/cargo-generate">https://github.com/cargo-generate/cargo-generate</a></li>
<li><a href="https://github.com/rust-github/template">https://github.com/rust-github/template</a></li>
</ul>
<p>&lt;br/&gt;</p>
