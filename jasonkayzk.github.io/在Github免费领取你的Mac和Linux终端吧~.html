<h2>原文：<a href="https://jasonkayzk.github.io/2020/09/18/%E5%9C%A8Github%E5%85%8D%E8%B4%B9%E9%A2%86%E5%8F%96%E4%BD%A0%E7%9A%84Mac%E5%92%8CLinux%E7%BB%88%E7%AB%AF%E5%90%A7">在Github免费领取你的Mac和Linux终端吧~</a></h2>
<hr/>
<h2>title: 在Github免费领取你的Mac和Linux终端吧~
toc: true
cover: 'https://img.paulzzh.com/touhou/random?45'
date: 2020-09-18 19:15:31
categories: 工具分享
tags: [工具分享, Github]
description: 今天RSS推送了一个挺有趣的东西，能通过Github Actions直接创建一个Mac或者Linux服务器，并且可以通过ssh直接连接；花了几分钟试了一下，感觉挺方便的！</h2>
<p>今天RSS推送了一个挺有趣的东西，能通过Github Actions直接创建一个Mac或者Linux服务器，并且可以通过ssh直接连接；</p>
<p>花了几分钟试了一下，感觉挺方便的！</p>
<p>源代码：</p>
<ul>
<li>https://github.com/JasonkayZK/fastmac</li>
</ul>
<p>&lt;br/&gt;</p>
<p>&lt;!--more--&gt;</p>
<p>&lt;br/&gt;</p>
<h2>在Github免费领取你的Mac和Linux终端吧~</h2>
<p>觉得这个不错是由于，有的时候还需要在mac上跑一些代码进行跨平台的测试，但是手头又没有mac电脑；</p>
<p>而通过这个仓库，可以很方便的拉起一个macOS，并且内置了brew！</p>
<p>下面是大致的操作过程：</p>
<p><img alt="" src="https://files.fast.ai/images/fastmac.png"/></p>
<blockquote>
<p>&lt;BR/&gt;</p>
<p>注意：</p>
<p>根据 <a href="https://docs.github.com/en/github/site-policy/github-additional-product-terms#5-actions-and-packages">GitHub Actions Terms of Service</a>，项目必须是公开的，否则每个月使用的时间就是被限制的！(虽然每个action的时间已经被限制为6个小时！)</p>
<p>&lt;font color="#f00"&gt;<strong>另外，六个小时之后，Action就会被停止，然后所有资源都会被回收！</strong>&lt;/font&gt;</p>
</blockquote>
<p>大致的使用方法在README基本上介绍的很详细了，但是由于README是英文的，这里就大概翻译一下；</p>
<p>&lt;BR/&gt;</p>
<h3>克隆模板</h3>
<p>首先，<a href="https://github.com/Jasonkayzk/fastmac/generate">点击这里</a>克隆一个模板；</p>
<p>在 "repository name" 输入fastmac，然后点击 "Create repository from template" ；</p>
<p>稍等片刻之后，你的克隆仓库就成功创建了！</p>
<blockquote>
<p>&lt;BR/&gt;</p>
<p><strong>注意：这里是Copy一个仓库，而非直接Fork一个仓库！</strong></p>
</blockquote>
<p>接下来，在你克隆的仓库里面执行下面的步骤：</p>
<p>&lt;BR/&gt;</p>
<h3>在Actions中启动mac工作流</h3>
<p>点击仓库中的Actions，并选择<code>mac</code>工作流，如下图：</p>
<p><img alt="fastmac1.png" src="https://raw.gitmirror.com/JasonkayZK/blog_static/master/images/fastmac1.png"/></p>
<p>最后点击Run workflow，即可创建工作流(mac终端)；</p>
<p>&lt;BR/&gt;</p>
<h3>通过ssh或浏览器访问终端</h3>
<p>几秒钟后，刷新页面，会看到一个旋转的橙色圆圈；</p>
<p>单击旁边的“mac”超链接，如下图：</p>
<p><img alt="fastmac2.png" src="https://raw.gitmirror.com/JasonkayZK/blog_static/master/images/fastmac2.png"/></p>
<p>在下一个页面上，你会看到另一个旋转的橙色圆圈，这一次旁边有“build”，点击“build”，如下图：</p>
<p><img alt="fastmac3.png" src="https://raw.gitmirror.com/JasonkayZK/blog_static/master/images/fastmac3.png"/></p>
<p>这将显示创建工作流的log；</p>
<p>一段时间后，会执行<code>Setup tmate session</code>阶段，一旦完成自身安装，它将重复打印类似于如下行：</p>
<pre><code class="language-bash">WebURL: https://tmate.io/t/ub7bnMg9RQxcWAXqRTKWrhvMz

SSH: ssh ub7bnMg9RQxcWAXqRTKWrhvMz@nyc1.tmate.io

WebURL: https://tmate.io/t/ub7bnMg9RQxcWAXqRTKWrhvMz

SSH: ssh ub7bnMg9RQxcWAXqRTKWrhvMz@nyc1.tmate.io

WebURL: https://tmate.io/t/ub7bnMg9RQxcWAXqRTKWrhvMz

......
</code></pre>
<p>复制并粘贴ssh行（例如：<code>ssh ub7bnMg9RQxcWAXqRTKWrhvMz@nyc1.tmate.io</code>）；</p>
<p>进入终端（强烈建议Windows用户尽可能使用WSL），按Enter键执行命令进入服务器；</p>
<p>之后，你会看到欢迎信息，按q键退出它，即可进入Mac shell！</p>
<p>shell已经安装了brew，因此可以轻松添加所需的任何软件！</p>
<p>当然也可以将“WebURL”粘贴到浏览器中，即可在浏览器中获得终端！</p>
<blockquote>
<p>&lt;BR/&gt;</p>
<p>如果无法使用终端（例如，必须在手机或平板电脑上执行一些紧急操作）可以使用浏览器终端；</p>
<p><strong>但浏览器终端的可靠性不如ssh方法，而且并非所有的方法都能正常工作！</strong></p>
</blockquote>
<p>&lt;BR/&gt;</p>
<h3>停止终端</h3>
<p>根据Github Actions对免费用户的限制，会话最多持续六个小时；</p>
<p>&lt;font color="#f00"&gt;<strong>但是当你完成工作后，应该直接它，否则你占用了一台其他人可能正在使用的计算机资源！</strong>&lt;/font&gt;</p>
<p>要关闭会话，单击Actions屏幕右侧的红色“Cancel workflow”即可，如下图：</p>
<p><img alt="fastmac4.png" src="https://raw.gitmirror.com/JasonkayZK/blog_static/master/images/fastmac4.png"/></p>
<p>&lt;BR/&gt;</p>
<h3>使用Linux终端而非Mac</h3>
<p>如果需要访问linux shell而非MacOS；</p>
<p>可以按照上面所有步骤操作，只是点击“linux”而不是“mac”来创建工作流；</p>
<p>&lt;BR/&gt;</p>
<h3>使用SSH连接其他服务器</h3>
<p>你还可以通过ssh从fastmac/linux实例连接到你的其他服务器；</p>
<p>首先，必须在fastmac项目的settings/secrets设置一个GitHub密码，其中包含连接到服务器所需的ssh私钥，如下图：</p>
<p><img alt="fastmac5.png" src="https://raw.gitmirror.com/JasonkayZK/blog_static/master/images/fastmac5.png"/></p>
<p>将该私钥其命名为SSH_KEY（必须是这个名字），并将<strong>私钥文件</strong>（例如：~/.ssh/id_rsa）内容粘贴为值；</p>
<p>保存secret，然后当使用fastmac/linux工作流进行其他服务器连接时，会发现终端已经准备好了密钥以供使用；</p>
<p>&lt;BR/&gt;</p>
<h3>为终端添加启动脚本&amp;文件</h3>
<p>在你的<code>fastmac</code>仓库中，编辑{linux/mac}.sh文件，添加创建新会话时要自动运行的配置命令；</p>
<p>这些是bash脚本，在创建新会话时运行；</p>
<p><strong>此外，添加到这个repo中的任何文件都将在会话中可用！</strong></p>
<p><strong>因此，可以使用它来包含你想在fastmac/linux会话中访问的任何数据、脚本、信息等。</strong></p>
<p>&lt;BR/&gt;</p>
<h3>后记</h3>
<p>fastmac是<a href="https://tmate.io/">tmate</a>的一个非常薄的封装，所以tmate的所有特性都是可用的！</p>
<p>tmate本身是基于<a href="https://github.com/tmux/tmux/wiki">tmux</a>的，所以你也可以有这些功能；</p>
<p>实际上，这也意味着其他人也可以连接到同一个ssh会话，和你共享同一个屏幕！</p>
<p>这对于调试和支持非常方便！</p>
<p>与Github操作的集成由 <a href="https://github.com/mxschmitt/action-tmate">action-tmate</a> 提供；</p>
<p>&lt;BR/&gt;</p>
<h2>附录</h2>
<p>源代码：</p>
<ul>
<li>https://github.com/JasonkayZK/fastmac</li>
</ul>
<p>&lt;br/&gt;</p>
