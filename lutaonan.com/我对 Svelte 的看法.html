<h2><a href="https://github.com/djyde/blog-2022/blob/master/src/pages/blog/svelte.md">ä»“åº“æºæ–‡</a>ï¼Œ<a href="https://lutaonan.com/blog/svelte">ç«™ç‚¹åŸæ–‡</a></h2>
<p>æˆ‘åœ¨å¾ˆæ—©å‰å·²ç»å¬è¯´è¿‡ <a href="https://svelte.dev">Svelte</a>, ä½†æ˜¯ä¸€ç›´æ²¡æœ‰æœºä¼šåœ¨æ–°çš„é¡¹ç›®çœŸæ­£åœ°ç”¨ä¸Šã€‚æœ€è¿‘åœ¨å°è¯•æ¨¡ä»¿å®ç°ä¸€ä¸ª <a href="https://roamresearch.com">Roam Research</a> çš„ç¼–è¾‘å™¨ï¼Œè€ƒè™‘åˆ°å¯èƒ½ä¼šæœ‰å¤§é‡å’Œ DOM äº¤äº’çš„é€»è¾‘ï¼Œæ‰€ä»¥æˆ‘è¶è¿™ä¸ªæœºä¼šé€‰æ‹©äº† Svelte, ç›®å‰è¿™ä¸ªç¼–è¾‘å™¨çš„å·²ç»å®Œæˆäº†å¤§éƒ¨åˆ†çš„åŠŸèƒ½ï¼Œå¼€æºåœ¨ <a href="https://github.com/djyde/plastic-editor">https://github.com/djyde/plastic-editor</a> .</p>
<p>åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­æˆ‘å¯¹ Svelte éå¸¸æ»¡æ„ï¼Œè¿™ç¯‡æ–‡ç« æ‰“ç®—å°±æˆ‘çš„ä½“éªŒæ¥è¯´è¯´æˆ‘å¯¹ Svelte çš„ä¸€äº›çœ‹æ³•ã€‚</p>
<p>ä½ éœ€è¦æœ‰ä½¿ç”¨è¿‡ä»»æ„ä¸€ä¸ªå‰ç«¯æ¡†æ¶çš„ç»éªŒæ‰èƒ½è¯»æ‡‚æœ¬æ–‡ã€‚è¿™ç¯‡æ–‡ç« <strong>ä¸æ˜¯</strong>ä¸€ç¯‡ Svelte æ•™ç¨‹ï¼Œå¦‚æœä½ æƒ³å­¦ä¹  Svelte, è¯·æµè§ˆ <a href="https://svelte.dev/tutorial/basics">Svelte çš„å®˜æ–¹æ•™ç¨‹</a>ï¼Œ<strong>æœ¬æ–‡è¯•å›¾é€šè¿‡å‘Šè¯‰è¯»è€… Svelte åœ¨ç¼–è¯‘é˜¶æ®µåšäº†ä»€ä¹ˆï¼Œæ¥è®©åªå¬è¯´è¿‡ Svelte çš„è¯»è€…ï¼Œä»æµ…å±‚çš„åŸç†å’Œè®¾è®¡çš„è§’åº¦ï¼Œäº†è§£åˆ° Svelte æ˜¯ä¸€ä¸ªæ€ä¹ˆæ ·çš„æ¡†æ¶ã€å¥¹å’Œå…¶å®ƒæ¡†æ¶çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</strong>ã€‚</p>
<h2>Svelte æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ç®€å•æ¥è¯´ Svelte æ˜¯ä¸€ä¸ªåœ¨ç¼–è¯‘æ—¶å®ç°äº† Reactivity (ååº”å¼) çš„æ¡†æ¶ï¼Œæ‰€ä»¥å®ƒæ—¢æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ª Compiler. å¦‚ä½•ç†è§£ã€Œç¼–è¯‘æ—¶å®ç°äº† Reactivityã€ï¼Ÿå…ˆè¯´è¯´ä»€ä¹ˆæ˜¯ Reactivity.</p>
<pre><code class="lang-js">let a = 1
let b = 2
let c = a + b
console.log(c) //=&gt; 3
a = 2
console.log(c) //=&gt; 3, not 4
</code></pre>
<p>JavaScript æ²¡æœ‰ Reactivity çš„èƒ½åŠ›ï¼Œæ‰€ä»¥å³ä½¿ <code>let c = a + b</code>, åœ¨æ”¹å˜äº† <code>a</code> æˆ– <code>b</code> çš„å€¼ä¹‹åï¼Œ<code>c</code> ä¸ä¼šå› æ­¤è€Œæ”¹å˜ã€‚çœŸæ­£çš„ Reactive ä¸æ­¤ç›¸åã€‚</p>
<p>æ‹¿ Excel ä¸¾ä¾‹ï¼ŒExcel æ˜¯å¤©ç”Ÿ Reactive çš„ï¼Œä¸€ä¸ª Excel é‡Œé¢çš„å•å…ƒæ ¼ï¼Œå¯ä»¥ç¼–å†™ç®€å•çš„å‡½æ•°ç»„åˆå…¶å®ƒå•å…ƒæ ¼çš„å€¼ï¼Œè€Œç»„åˆçš„ç»“æœä¼šéšç€ä¾èµ–çš„å•å…ƒæ ¼æ”¹å˜è€Œè‡ªåŠ¨æ”¹å˜ã€‚ä¾‹å¦‚å•å…ƒæ ¼ <code>C1</code> å¦‚æœæ˜¯  <code>=SUM(A1:B1)</code> , é‚£ä¹ˆ <code>C1</code> å€¼ä¼šéšç€ <code>A1</code> æˆ– <code>B1</code> çš„å€¼è€Œé‡æ–°è®¡ç®—å’Œæ”¹å˜ã€‚</p>
<p>å¦‚æœä½ ç”¨è¿‡ Vue æˆ–è€… MobX, ä½ åº”è¯¥çŸ¥é“å®ƒä»¬å®ç° Reactivity çš„åŸç†ï¼šå®ƒä»¬ä½¿ç”¨äº† <code>defineProperty</code> æˆ–è€… <code>Proxy</code>, åœ¨ setter è¿™ä¸€å±‚åšäº†ä¸€äº›æ‰‹è„šï¼Œå½“å¯¹è±¡çš„æŸä¸ªæˆå‘˜è¢«èµ‹å€¼çš„æ—¶å€™ï¼Œæ‰§è¡Œæ›´æ–°é€»è¾‘ã€‚</p>
<pre><code class="lang-js">const reactive = {}
Object.defineProperty(reactive, 'a', {
  set(value) {
        console.log('a was updated')
  }
})

reactive.a = 'changed' //=&gt; a was updated
</code></pre>
<p>è¿™æ˜¯ä¸€ç§ã€Œè¿è¡Œæ—¶ã€çš„æ‰‹æ®µï¼Œå®ƒéœ€è¦åœ¨è¿è¡Œæ—¶æ”¹å˜äº†èµ‹å€¼è¡Œä¸ºï¼Œæ‰€ä»¥åœ¨ç”¨ Vue çš„æ—¶å€™ï¼Œä½ å¿…éœ€æŠŠéœ€è¦ Reactivity çš„å¯¹è±¡åŒ…åœ¨ <code>data</code> é‡Œï¼Œä¸Šæ–‡çš„ä¾‹å­ç”¨ Vue éœ€è¦è¿™ä¹ˆå†™ï¼š</p>
<pre><code class="lang-js">const yourData = {
  data() {
    return {
      a: 1,
      b: 2
    }
  },
  computed: { // è¿˜æœ‰ computed
    c() {
      return this.a + this.b
    }
  }
}

const reactive = new Vue(yourData)
console.log(reactive.c) //=&gt; 3
reactive.a = 2
console.log(reactive.c) //=&gt; 4, not 3
</code></pre>
<p>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥æƒ³ä¸€æƒ³ï¼Œå¦‚æœä¸ç”¨ <code>defineProperty</code>, å¯ä»¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½å—ï¼Ÿ</p>
<p>å½“ç„¶å¯ä»¥ï¼š</p>
<pre><code class="lang-js">let a = 1
let b = 2
let c = a + b

function update() {
  c = a + b
}

console.log(c) //=&gt; 3

a = 2; update()
console.log(c) //=&gt; 4

b = 5; update()
console.log(c) //=&gt; 6
</code></pre>
<p>æˆ‘ä»¬åªè¦æ¯æ¬¡åœ¨èµ‹å€¼çš„æ—¶å€™ï¼Œæ‰‹åŠ¨è§¦å‘ä¸€ä¸ª <code>update</code> å‡½æ•°ï¼Œé‚£ä¹ˆ <code>c</code> çš„å€¼å°±ä¼šé‡æ–°è®¡ç®—ï¼Œä¸å°±å®ç°äº† Reactivity çš„æ•ˆæœå—ï¼Ÿ</p>
<p>ä½†æ˜¯è¿™æ ·åšæœªå…å¤ªè ¢ï¼Œè¦å†™å¤ªå¤šçš„ä»£ç ï¼Œè€Œä¸”å¾ˆå®¹æ˜“æ¼æ‰ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© Compiler å¸®æˆ‘ä»¬åšè¿™äº›äº‹ï¼åœ¨ç¼–è¯‘æ—¶ï¼Œæ¯å½“é‡åˆ°èµ‹å€¼è¯­å¥ï¼Œæˆ‘ä»¬å°±è®©å®ƒåœ¨èµ‹å€¼è¯­å¥çš„åé¢è‡ªåŠ¨åŠ ä¸€ä¸ªè°ƒç”¨ <code>update</code> æ–¹æ³•çš„è¯­å¥ã€‚</p>
<p>è¿™å°±æ˜¯ Svelte åšçš„äº‹æƒ…ã€‚å½“ç„¶å®é™…ä¸Šçš„å®ç°è¦æ›´åŠ å¤æ‚ä¸€äº›ï¼ˆæ¯”å¦‚éœ€è¦æŠŠæ›´æ–°æ”¾åœ¨åŒä¸€ä¸ª microtask é‡Œï¼‰ï¼Œä½†åŸç†æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>Reactivity æ˜¯ç°ä»£çš„å‰ç«¯æ¡†æ¶çš„æ ‡é…ï¼Œå› ä¸ºä»å‰ MVC çš„å¼€å‘æ¨¡å¼å¯¹ UI å¼€å‘æ¥è¯´ï¼Œè¦åœ¨ Controller æ‰‹åŠ¨æ“ä½œ DOM è¿™ä¸ªæ­¥éª¤æ˜¾å¾—æœ‰ç‚¹æ¯ç‡¥å’Œå¤šä½™ï¼Œæˆ‘ä»¬å¸Œæœ› UI æ˜¯è‡ªåŠ¨éšç€æ•°æ®çš„å˜åŒ–è€Œè‡ªåŠ¨æ›´æ–°çš„ã€‚å› æ­¤<strong>ä¸åŒçš„æ¡†æ¶é™¤äº†å†™æ³•ä¸å°½ç›¸åŒå¤–ï¼Œæœ€ä¸»è¦çš„åŒºåˆ«è¿˜æ˜¯åœ¨äºæ¡†æ¶åœ¨æ£€æµ‹åˆ°æ•°æ®æ›´æ–°åï¼Œå¦‚ä½•å¤„ç† UI çš„æ›´æ–°</strong>ã€‚</p>
<p>ä»¥ä¸€ä¸ª Counter ä¸ºä¾‹ï¼Œè¿™æ˜¯ React çš„å†™æ³•ï¼š</p>
<pre><code class="lang-jsx">function Counter () {
  const [ count, setCount ] = React.useState(0)
  return (
    &lt;&gt;
        &lt;div&gt;{count}&lt;/div&gt;
        &lt;button onClick={_ =&gt; setCount(count + 1) }&gt;+&lt;/button&gt;
      &lt;button onClick={_ =&gt; setCount(count - 1) }&gt;-&lt;/button&gt;
    &lt;/&gt;
  )
}
</code></pre>
<p>æˆ‘åœ¨ä¹‹å‰çš„æ–‡ç« å·²ç»è°ˆè¿‡ React çš„æ€æƒ³ï¼Œåœ¨è¿™é‡Œç¨ä½œé‡å¤ã€‚React ä¸»å¼ ã€Œè§†å›¾ã€æ˜¯ã€ŒçŠ¶æ€ã€çš„å‡½æ•°ï¼š</p>
<pre><code class="lang-bash">UI = f(state)
</code></pre>
<p>åœ¨ <code>setState</code> çš„æ—¶å€™ï¼Œè¿™ä¸ªå‡½æ•°ä¼šé‡æ–°æ‰§è¡Œï¼Œå› ä¸ºæ˜¯æ–°çš„ <code>state</code>, å› æ­¤ UI æ˜¯å˜åŒ–çš„ã€‚åœ¨ React é‡Œï¼ŒUI æ˜¯ Virtual DOM, ç”¨ç®—æ³•å¯¹æ¯”ä¸¤ä¸ª DOM æ ‘ï¼Œæ¥ç®—å‡ºå“ªä¸ªçœŸå®çš„ DOM éœ€è¦è¢«æ›´æ–°ã€‚</p>
<p>React çš„å®ç°éå¸¸ã€Œç²—æš´ã€ï¼Œå› ä¸ºå®ƒæ˜¯çœŸçš„ä¼šé‡æ–°æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>Counter</code> ä¼šåœ¨æ¯æ¬¡çŠ¶æ€å˜åŒ–çš„æ—¶å€™è¢«é‡æ–°æ‰§è¡Œã€‚è¿™ä½¿å¾—å†™ React ç»„ä»¶è¦å¤šç•™å¿ƒæ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºä½ è¦é¿å…åœ¨å‡½æ•°å†…éƒ¨è¿›è¡Œä¸å¿…è¦çš„è®¡ç®—ï¼š</p>
<pre><code class="lang-diff">function Counter () {
  const [ count, setCount ] = React.useState(0)

+ doSomethingHeavy()

  return (
    &lt;&gt;
        &lt;div&gt;{count}&lt;/div&gt;
        &lt;button onClick={_ =&gt; setCount(count + 1) }&gt;+&lt;/button&gt;
      &lt;button onClick={_ =&gt; setCount(count - 1) }&gt;-&lt;/button&gt;
    &lt;/&gt;
  )
}
</code></pre>
<p>åœ¨ã€Œå¤å…¸ã€React é‡Œï¼Œä½ ä¸å¾—ä¸å†™ shouldComponentUpdate, åœ¨ç°ä»£ React, ä½ åŒæ ·éœ€è¦å¼•å…¥ <code>useCallback</code> å’Œ  <code>useMemo</code>ï¼Œæ‰‹åŠ¨åœ°ç¼“å­˜å‡½æ•°ï¼Œæ¥é¿å…æ€§èƒ½é—®é¢˜ã€‚</p>
<p>åŒæ ·æ˜¯ä½¿ç”¨ Virtual DOM çš„ Vue å´æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º Vue çš„æœºåˆ¶ï¼ˆä¾èµ–æ”¶é›†ï¼‰å†³å®šäº†å®ƒä¸å¿…é‡æ–°æ‰§è¡Œæ•´ä¸ª UI å‡½æ•°æ¥æ¢å–æ–°çš„ Virutal DOM æ ‘ï¼Œå½“æŸä¸ªçŠ¶æ€æ›´æ–°çš„æ—¶å€™ï¼Œå®ƒæ˜ç¡®åœ°çŸ¥é“åº”è¯¥ diff å“ªäº›èŠ‚ç‚¹ã€‚</p>
<blockquote><p>å¦‚æœä½ æ˜¯ Vue ç”¨æˆ·ï¼Œè€Œä¸å¤ªæ¸…æ¥š React çš„æœºåˆ¶, ä½ å¯ä»¥æŠŠä¸€ä¸ª React ç»„ä»¶å‡½æ•°æƒ³è±¡æˆæ˜¯ä¸€ä¸ª Vue çš„ <code>computed</code> é‡Œçš„æˆå‘˜å‡½æ•°, ä½ ä¸€å®šçŸ¥é“åœ¨ <code>computed</code> çš„æˆå‘˜å‡½æ•°é‡Œåšè€—æ—¶è®¡ç®—çš„åæœæ˜¯ä»€ä¹ˆã€‚</p>
</blockquote>
<p>ç°ä»£å‰ç«¯æ¡†æ¶å€¾å‘äºä½¿ç”¨ Virtual DOM, æˆ‘è®¤ä¸ºä¸»è¦å‡ºäºä¸¤ç‚¹ï¼š</p>
<ul>
<li>Virtual DOM å¯ä»¥ port åˆ°ä»»ä½•é™¤äº† Web ä»¥å¤–çš„å®¿ä¸»ç¯å¢ƒã€‚</li>
<li>Virtual DOM diff ç®—æ³•è¶³å¤Ÿå¿«ï¼Œæ¡†æ¶æŠŠ DOM diff å’Œ DOM ä¿®æ”¹çš„å·¥ä½œäº¤ç»™äº†ç®—æ³•ï¼Œå¯ä»¥æŠŠç²¾åŠ›èŠ±åœ¨å®ç°æ¡†æ¶çš„å…¶å®ƒåŠŸèƒ½ä¸Šã€‚</li>
</ul>
<p>Virtual DOM çš„æœ¬è´¨å°±æ˜¯æ‰¾å‡ºéœ€è¦è¢«ä¿®æ”¹çš„çœŸå® DOM èŠ‚ç‚¹ï¼Œéš¾é“ä¸ç”¨ Virtual DOM å°±ä¸èƒ½å®ç°å—ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚å›åˆ°ä¸Šé¢çš„ Counter çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¦‚ä½•ç”¨ Vanilla JS (åŸç”Ÿ JavaScript) æ¥å®ç°ï¼š</p>
<p>```jsÂ 
const target = document.querySelector('#app')</p>
<p>// state
let count = 0</p>
<p>// view
const div = document.createElement('div')
const countText = document.createTextNode(<code>${count}</code>)
div.appendChild(countText)</p>
<p>const button1 = document.createElement('button')
const button1Text = document.createTextNode(<code>+</code>)
button1.appendChild(button1Text)</p>
<p>const button2 = document.createElement('button')
const button2Text = document.createTextNode(<code>-</code>)
button2.appendChild(button2Text)</p>
<p>target.appendChild(div)
target.appendChild(button1)
target.appendChild(button2)</p>
<p>// event
button1.addEventListener('click', () =&gt; {
  count += 1
})
button2.addEventListener('click', () =&gt; {
  count -= 1
})</p>
<pre><code>
ä¸Šé¢çš„ç¨‹åºç”Ÿæˆäº† UI, ç»‘å®šäº†ç‚¹å‡»äº‹ä»¶ï¼Œæ”¹å˜äº†çŠ¶æ€ `count` çš„å€¼ã€‚ä½†æ˜¯æ˜¾ç„¶ UI æ˜¯ä¸ä¼šéšä¹‹æ”¹å˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ª `update` å‡½æ•°ï¼Œè®©çŠ¶æ€åœ¨å˜åŒ–çš„æ—¶å€™ï¼Œè§¦å‘ç‰¹å®šçš„ UI æ›´æ–°é€»è¾‘ï¼š

```js
const target = document.querySelector('#app')

// state
let state = {
  count: 0
}

// view
const div = document.createElement('div')
const countText = document.createTextNode(`${state.count}`)
div.appendChild(countText)

const button1 = document.createElement('button')
const button1Text = document.createTextNode(`+`)
button1.appendChild(button1Text)

const button2 = document.createElement('button')
const button2Text = document.createTextNode(`-`)
button2.appendChild(button2Text)

target.appendChild(div)
target.appendChild(button1)
target.appendChild(button2)

// event
button1.addEventListener('click', () =&gt; {
  update('count', state.count + 1)
})
button2.addEventListener('click', () =&gt; {
  update('count', state.count - 1)
})

// update
function update(key, value) {
  state[key] = value
  countText.nodeValue = state[key]
}
</code></pre>
<p>ç°åœ¨ç‚¹å‡»æŒ‰é’®ï¼Œ<code>div</code> æ˜¾ç¤ºçš„ <code>count</code> å°±ä¼šå˜åŒ–äº†ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ <code>update</code> å‡½æ•°æŒ‡æ˜äº† UI æ›´æ–°çš„é€»è¾‘ã€‚</p>
<p>æˆ‘æ•¢ä¿è¯ä¸Šé¢çš„ç¨‹åºæ€§èƒ½ä¸€å®šæ¯” React ç‰ˆæœ¬çš„æ›´å¥½ï¼ˆå½“ç„¶åœ¨è¿™ä¸ªä¾‹å­å¯èƒ½åªç›¸å·® 0.0000002msï¼‰ï¼Œå› ä¸º DOM diff å†å¿«è¿˜æ˜¯è¦ç®—ï¼ŒåŸç”Ÿ JavaScript æ˜¯ä¸éœ€è¦ç®—çš„ã€‚</p>
<p>ä½†æ²¡äººæ„¿æ„è¿™æ ·å†™ç¨‹åºï¼š</p>
<ol>
<li>è¿™æ ·çš„ä»£ç å®Œå…¨ä¸§å¤±äº†å¯è¯»æ€§ï¼Œæ— æ³•ä¸€çœ¼çœ‹å‡º UI æ ‘çš„ç»“æ„ã€‚</li>
<li>UI åªè¦ä¸€è°ƒæ•´ï¼Œå°±éœ€è¦å†™å¤§é‡çš„ä»£ç ã€‚</li>
<li>æ¯å½“æœ‰å…ƒç´ ä¾èµ–ä¸€ä¸ªçŠ¶æ€å€¼ï¼Œå°±è¦æ‰‹åŠ¨åœ¨ <code>update</code> å‡½æ•°ä¸­åŠ ä¸Š UI æ›´æ–°çš„é€»è¾‘ã€‚å’Œä¼ ç»Ÿçš„ MVC æ²¡åŒºåˆ«ã€‚</li>
</ol>
<p>Svelte æ˜¯ä¸€ä¸ª Compiler, å¸®åŠ©ä½ åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆè¿™äº› Vanilla JS çš„ä»£ç ï¼ŒåŒæ—¶æ”¶é›†ä¾èµ–ï¼Œç”Ÿæˆ UI æ›´æ–°çš„é€»è¾‘ã€‚</p>
<pre><code class="lang-html">&lt;div&gt;hello world&lt;/div&gt;
</code></pre>
<p>ä¼šè¢«ç¼–è¯‘æˆï¼š</p>
<pre><code class="lang-js">const div = document.createElement('div')
const text = document.createTextNode('hello world')
div.appendChild(text)
</code></pre>
<blockquote><p>è¿™å¹¶ä¸æ˜¯ Svelte ç¼–è¯‘å‡ºæ¥çš„ä»£ç ï¼ŒçœŸå®çš„ä»£ç ç»è¿‡äº†å°è£…ã€‚è¿™é‡Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿è®²è§£ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯ä¸€è‡´çš„ã€‚</p>
</blockquote>
<p>åŠ ä¸€ä¸ªå˜é‡ï¼š</p>
<pre><code class="lang-html">&lt;script&gt;
  let count = 0
&lt;/script&gt;
&lt;div&gt;
  {count}
&lt;/div&gt;
</code></pre>
<p>ä¼šè¢«ç¼–è¯‘æˆï¼š</p>
<pre><code class="lang-js">let count = 0
const div = document.createElement('div')
const text = document.createTextNode(`${count}`)
div.appendChild(text)

update() {
  text.nodeValue = count
}
</code></pre>
<blockquote><p>å†æ¬¡å¼ºè°ƒï¼Œè¿™å¹¶é Svelte ç¼–è¯‘å‡ºæ¥çš„çœŸå®ä»£ç ã€‚å¦‚æœä½ å¯¹ Svelte çœŸå®ç¼–è¯‘å‡ºæ¥çš„ä»£ç æœ‰å…´è¶£ï¼Œå¯ä»¥åœ¨å®˜æ–¹çš„ REPL <a href="https://svelte.dev/repl">https://svelte.dev/repl</a> å†™ä¸€ä¸ªç®€å•çš„ Svelte ç»„ä»¶ç„¶åçœ‹ JS output. ç„¶åæ¨èè¿›ä¸€æ­¥é˜…è¯» <a href="https://lihautan.com/compile-svelte-in-your-head/">https://lihautan.com/compile-svelte-in-your-head/</a></p>
</blockquote>
<p>ç¼–è¯‘å™¨åœ¨é‡åˆ° <code>{count}</code> çš„æ—¶å€™ï¼Œå°±å¯ä»¥æ”¶é›†åˆ°åœ¨ count å˜åŒ–çš„æ—¶å€™éœ€è¦æ›´æ–°å“ªäº›å…ƒç´ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåƒ Vue é‚£æ ·é€šè¿‡ getter å®ç°çš„ä¾èµ–æ”¶é›†ï¼ŒSvelte é€šè¿‡ç¼–è¯‘é˜¶æ®µå®ç°äº†ã€‚</p>
<p>ä¸€ä¸ªå®Œæ•´çš„ Counter:</p>
<pre><code class="lang-html">&lt;script&gt;
  let count = 0
&lt;/script&gt;

&lt;div&gt;
  {count}
&lt;/div&gt;
&lt;button on:click={_ =&gt; { count += 1 }}&gt;+&lt;/button&gt;
&lt;button on:click={_ =&gt; { count -= 1 }}&gt;-&lt;/button&gt;
</code></pre>
<blockquote><p>ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰“å¼€è¿™ä¸ªç¨‹åº <a href="https://svelte.dev/repl/cfd45cdafb8a48a88edab6921c69ac0c?version=3">https://svelte.dev/repl/cfd45cdafb8a48a88edab6921c69ac0c?version=3</a></p>
</blockquote>
<p>åœ¨ç¼–è¯‘çš„é˜¶æ®µï¼Œåªè¦é‡åˆ°èµ‹å€¼è¯­å¥ï¼Œå°±å¯ä»¥æ’å…¥ä¸€ä¸ªè¯­å¥æ¥å®‰æ’ UI update (schedule update). å°±åƒæœ¬æ–‡æœ€åˆæåˆ°çš„æ–¹æ³•ä¸€æ ·ã€‚</p>
<p>åˆ°è¿™é‡Œï¼Œå·²ç»è§£é‡Šäº†ä»€ä¹ˆæ˜¯ã€Œåœ¨ç¼–è¯‘æ—¶å®ç°äº† Reactivityã€ã€‚</p>
<h2>Svelte çš„ç‰¹æ®Šè¯­æ³•</h2>
<p>Svelte é‡Œæœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„è¯­æ³•ï¼Œå€¼å¾—åœ¨è¿™é‡Œä»‹ç»ä¸€ä¸‹ã€‚</p>
<p>å›åˆ°æœ€åˆçš„ä¾‹å­ï¼š</p>
<pre><code class="lang-js">let a = 1
let b = 2
let c = a + b
</code></pre>
<p><code>c</code> ä¾èµ–äº†å…¶å®ƒå˜é‡ï¼Œå¦‚æœå…¶ä¸­çš„ä¾èµ–å‘ç”Ÿäº†æ”¹å˜ï¼Œå®ƒåº”è¯¥ä¼šè¢«é‡æ–°è®¡ç®—ã€‚åœ¨ Vue é‡Œå¯ä»¥é€šè¿‡ <code>computed</code> å®ç°ï¼š</p>
<pre><code class="lang-js">const reactive = new Vue({
  data() {
    return {
      a: 1,
      b: 2
    }
  },
  computed: {
    c() {
      return this.a + this.b
    }
  }
})
</code></pre>
<p>Svelte ç”¨äº†ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•å®ç°äº†ç±»ä¼¼ computed çš„åŠŸèƒ½ï¼š</p>
<pre><code class="lang-html">&lt;script&gt;
  let a = 1
  let b = 2
  $: c = a + b
&lt;/script&gt;

&lt;span&gt;{c}&lt;/span&gt;
</code></pre>
<blockquote><p><code>:</code> å…¶å®æ˜¯ä¸€ä¸ªåˆæ³•çš„ JavaScript è¯­æ³•ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/label">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/label</a></p>
</blockquote>
<p>å½“ç„¶èƒŒååŒæ ·æ˜¯åœ¨ç¼–è¯‘æ—¶å®ç°çš„ï¼Œå®ƒåœ¨æ›´æ–°è§†å›¾çš„å‡½æ•°å‰ä¼šåŠ å…¥æ‰§è¡Œ <code>a + b</code> å¹¶èµ‹å€¼ç»™ c çš„è¯­å¥ã€‚</p>
<h2>Svelte çš„è·¨ç»„ä»¶é€šè®¯</h2>
<p>çŠ¶æ€ç®¡ç†å’Œç»„ä»¶é€šè®¯æ˜¯å‰ç«¯æ¡†æ¶è®¾è®¡æ¯”è¾ƒé‡è¦çš„ä¸€å—ï¼Œé€šå¸¸çš„åšæ³•æ˜¯ <a href="https://zh-hans.reactjs.org/docs/lifting-state-up.html">Lifting State Up</a>. ä¹Ÿå°±æ˜¯ä¸¤ä¸ªåŒçº§ç»„ä»¶å¦‚æœæƒ³è¦å…±äº«çŠ¶æ€ï¼Œé‚£å°±æŠŠè¿™ä¸ªçŠ¶æ€ä¸Šå‡åˆ°å…±åŒçš„çˆ¶ç»„ä»¶ä¸Šé¢å»ã€‚Svelte ä¹Ÿå¯ä»¥è¿™ä¹ˆåšã€‚ä¸è¿‡ Svelte é‡Œæœ‰ <code>store</code> , ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ª writable store, ç„¶ååœ¨ä¸åŒçš„ç»„ä»¶ä¹‹é—´è¿›è¡Œè¯»å–å’Œæ›´æ–°ï¼š</p>
<p>```htmlÂ 
// store.js
import { wrtiable } from 'svelte/store'
export let count = writable(0)</p>
<p>// A.svelte</p>
&lt;script&gt;
import { count } from './store.js'

let count_value
const unsub = count.subscribe((newValue) =&gt; {
  count_value = newValue
})
&lt;/script&gt;
&lt;sapn&gt;{count_value}&lt;/sapn&gt;

// B.svelte
&lt;script&gt;
import { count } from './store.js'
&lt;/script&gt;
&lt;button on:click={_ =&gt; count.set(2) }&gt;mutate&lt;/button&gt;

```

æ¯ä¸ª writable store å…¶å®æ˜¯ä¸€ä¸ª object, åœ¨éœ€è¦ç”¨åˆ°è¿™ä¸ªå€¼çš„ç»„ä»¶é‡Œå¯ä»¥ `subscribe` ä»–çš„å˜åŒ–ï¼Œç„¶åæ›´æ–°åˆ°è‡ªå·±ç»„ä»¶é‡Œçš„çŠ¶æ€ã€‚åœ¨å¦ä¸€ä¸ªç»„ä»¶é‡Œå¯ä»¥è°ƒç”¨ `set` æ›´æ–°è¿™ä¸ªçŠ¶æ€çš„å€¼ã€‚

æ•é”çš„è¯»è€…å¯èƒ½å·²ç»å‘ç°ï¼Œä¸Šé¢çš„ä»£ç æ²¡æœ‰å¤„ç†ç»„ä»¶é”€æ¯æ—¶ unsubscribe. å½“ç„¶æˆ‘å¯ä»¥åœ¨ `onDestroy()` é‡Œè°ƒç”¨ `unsub()`, ä½†æ˜¯åœ¨ Svelte, æœ‰ä¸ªæ›´ä¾¿æ·çš„è¯­æ³•ï¼š

```htmlÂ 
// store.js
import { wrtiable } from 'svelte/store'
export let count = writable(0)

// A.svelte
&lt;script&gt;
import { count } from './store.js'

&lt;/script&gt;
&lt;sapn&gt;{$count}&lt;/sapn&gt;

// B.svelte
&lt;script&gt;
import { count } from './store.js'
&lt;/script&gt;
&lt;button on:click={_ =&gt; $count = 2 }&gt;mutate&lt;/button&gt;
```

Svelte è§„å®šäº†åœ¨ store å‰é¢åŠ ä¸€ä¸ª `$`, ä¼šè‡ªåŠ¨ subscribe, å¾—åˆ°å®ƒçš„å€¼ï¼Œå¹¶ä¸”åœ¨ç»„ä»¶è¢«é”€æ¯çš„æ—¶å€™è‡ªåŠ¨å¸®ä½  unsubscribe å®ƒã€‚å¯¹å®ƒè¿›è¡Œèµ‹å€¼çš„æ—¶å€™ï¼Œå…¶å®ç›¸å½“äºæ‰§è¡Œäº† `.set()` çš„æ–¹æ³•ã€‚

ä¸è¦ä»¥ä¸º `svelte/store` çš„ writable è¿”å›çš„å¯¹è±¡æ˜¯ä¸€ä¸ªé»‘é­”æ³•ï¼Œå…¶å®ä»–ä¸è¿‡æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡è€Œå·²ï¼Œåªæ˜¯ Svelte åœ¨ç¼–è¯‘çš„æ—¶å€™å¯¹ `$` ä¸ºé¦–çš„å˜é‡åšäº†ä¸€äº›ç‰¹æ®Šå¤„ç†ã€‚æ¯”å¦‚ï¼š

```html
&lt;script&gt;
  console.log($name)
&lt;/script&gt;
```

ä¼šç¼–è¯‘æˆï¼š

```js
let name_value
const unsub = name.subscribe((newValue) =&gt; {
  name_value = newValue
})
console.log(name_value)
onDestroy(() =&gt;{
  unsub()
})
```

&gt; åŒæ ·è¿™ä¸æ˜¯ Svelte å®é™…ç”Ÿæˆçš„ä»£ç ï¼Œè¿™é‡Œæ˜¯ä¸ºäº†è®²è§£ï¼Œä½†æœ¬è´¨å’Œ Svelte çš„é€»è¾‘ä¸€è‡´

å¯¹ä¸€ä¸ª store èµ‹å€¼ï¼š

```html
&lt;script&gt;
    $name = 'new'
&lt;/script&gt;
```

ä¼šè¢«ç¼–è¯‘æˆï¼š

```js
name_value.set('name')
```

çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½å·²ç»çŸ¥é“äº†ï¼Œå…¶å® store åªä¸è¿‡æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œåªæ˜¯å¦‚æœä½ åœ¨ Svelte é‡Œé€šè¿‡ $ ç¬¦å·è¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å®ƒçš„ä¸€äº›æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•å°±æ˜¯ï¼š

- `subscribe`. è¿”å›ä¸€ä¸ª unsubscribe æ–¹æ³•
- `set`

åªè¦ä»»ä½•å¯¹è±¡æœ‰å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼Œå°±å¯ä»¥ç”¨ $ è¿›è¡Œè¿™æ ·çš„ä¾¿æ·ä½¿ç”¨ã€‚è¿™æ˜¯ä¸€ç§ Svelte çº¦å®šçš„ [store åè®®](https://svelte.dev/docs#Store_contract). `writable` æ˜¯ä¸€ä¸ªåˆ›å»ºç¬¦åˆ store åè®®çš„å¯¹è±¡çš„æ·å¾„ï¼Œä¸æ˜¯ä»€ä¹ˆé»‘é­”æ³•ã€‚

&gt; å¦‚æœä½ ç”¨ RxJS, ä½ ä¼šå‘ç° RxJS å¤©ç”Ÿå°±å…¼å®¹ store åè®®

## æˆ‘å¯¹ Svelte çš„çœ‹æ³•

æˆ‘ç”¨ React å¤ªä¹…äº†ï¼Œåœ¨ç”¨å›ä¸éœ€è¦å…³å¿ƒ rerender é—®é¢˜çš„æ¡†æ¶ï¼Œæˆ‘è§‰å¾—éå¸¸èˆ’æœğŸ˜„ã€‚å½“ç„¶ Vue ä¹Ÿä¸éœ€è¦ï¼Œæˆ‘è§‰å¾—åœ¨æŸä¸ªç¨‹åº¦ä¸Š Svelte å’Œ Vue å¾ˆåƒï¼Œå®ƒå’Œ Vue  çš„åŒºåˆ«æ˜¯ï¼š

- å®ç° Reactivity çš„åŸç†éƒ½æ˜¯ä¾èµ–æ”¶é›†ï¼Œä½† Svelte æ˜¯åœ¨ç¼–è¯‘æ—¶å®Œæˆäº†ï¼ŒVue åœ¨è¿è¡Œæ—¶æ”¶é›†ã€‚
- Vue ç”¨äº† Virtual DOM, Svelte åœ¨ç¼–è¯‘æ—¶å°±çŸ¥é“å®ƒåº”è¯¥æ“ä½œå“ªä¸ª DOM

å› ä¸ºæ‰€æœ‰çš„åŠŸèƒ½éƒ½æ˜¯åœ¨ç¼–è¯‘æ—¶å®ç°çš„ï¼Œæ‰€ä»¥ç”¨ Svelte å†™çš„ä»£ç éå¸¸ç›´ç™½ â€”â€” åƒæ­£å¸¸å®šä¹‰å˜é‡ä¸€æ ·å®šä¹‰å˜é‡ï¼Œåœ¨ HTML é‡Œä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œä¿®æ”¹è¿™ä¸ªå˜é‡ï¼ˆè€Œä¸”æ²¡æœ‰ `this`ï¼‰ã€‚è¿è¡Œæ—¶çš„æ¡†æ¶æ— è®ºå¦‚ä½•ç®€å•ï¼Œè‡³å°‘éœ€è¦ä½ å†™ä¸€å±‚ Wrapperï¼Œä¾‹å¦‚åœ¨ Vue é‡Œä½ å¿…é¡»æŠŠçŠ¶æ€åŒ…åœ¨ data å‡½æ•°ä¸­è¿”å›ã€‚

æˆ‘è®¤ä¸º [Write less code](https://svelte.dev/blog/write-less-code) æ˜¯é‡è¦çš„ï¼Œåœ¨å‰ç«¯å¼€å‘çš„é¢†åŸŸï¼Œæˆ‘ä»¬èŠ±äº†å¤ªå¤šç²¾åŠ›åœ¨å¤„ç†åƒ immutable, reactivity è¿™äº› UI å¼€å‘æ ‡é…çš„ç‰¹æ€§ä¸Šé¢ï¼Œ æˆ‘ä¸€ç›´è®¤ä¸ºéœ€è¦æœ‰ä¸€é—¨å¤©ç”Ÿå¸¦äº†è¿™äº›ç‰¹æ€§çš„è¯­è¨€ç”¨æ¥å†™ UI åº”ç”¨ï¼Œè€Œä¸æ˜¯å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…ã€å†™ä¸€äº› boilerplate code.

Svelte éå¸¸æ¥è¿‘ï¼Œè€Œä¸”å®ƒåšåˆ°äº†ä¸éœ€è¦ä½ å­¦ä¹ æ–°çš„è¯­æ³•ï¼Œåœ¨ JavaScript é‡Œé¢å°±å®ç°äº†è¿™æ ·çš„æ•ˆæœï¼ˆç›®å‰åªæ˜¯ Reactivityï¼‰ã€‚

æ‰€ä»¥æ— è®ºæ˜¯å¯¹æ¯”å“ªä¸ªæ¡†æ¶ï¼Œæˆ‘ä¸ªäººè§‰å¾— Svelte å¯¹æˆ‘æ¥è¯´æœ€å¤§çš„å¸å¼•åŠ›æ˜¯å¯ä»¥å†™æ›´å°‘çš„ä»£ç ï¼Œè€Œä¸”åœ¨å†™ä»£ç çš„æ—¶å€™æ„Ÿè§‰æ˜¯ç¬¦åˆç›´è§‰çš„ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œæˆ‘è®¤ä¸º React å¹¶æ²¡æœ‰åšå¥½è¿™ä¸€ç‚¹ã€‚æˆ‘ç¢°åˆ°è¿‡å¤ªå¤šç”¨ React çš„æœ‹å‹åŒæ ·é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼š

```jsx
function Timer () {

  const [ time, setTime ] = React.useState(0)

  React.useEffect(() =&gt; {
    const interval = setInterval(() =&gt; {
      setTime(time + 1)
    }, 1000)

    return () =&gt; clearInterval(interval)
  }, [])

  return (
    &lt;div&gt;{time}&lt;/div&gt;
  )
}
```

è¿™ä¸ª `time` åœ¨è§†å›¾é‡Œä¸€ç›´æ˜¯ 1ï¼Œä¸ºä»€ä¹ˆï¼Ÿè°ä¼šåœ¨ç¬¬ä¸€æ¬¡å†™è¿™æ ·çš„é€»è¾‘çš„æ—¶å€™å°±èƒ½æ„è¯†åˆ°é—®é¢˜å‡ºç°åœ¨å“ªé‡Œå‘¢ï¼Ÿ

åŒæ ·çš„é€»è¾‘åœ¨ Svelte é‡Œï¼Œå°±ä¸ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼ˆå½“ç„¶åœ¨ Vue é‡Œä¹Ÿä¸ä¼šæœ‰ï¼‰ï¼š

```html
&lt;script&gt;
  let time = 0

    const interval = setInterval(() =&gt; {
        time = time + 1
    }, 1000)

    onDestroy(() =&gt; {
        clearInterval(interval)
    })
&lt;/script&gt;<p>&lt;div&gt;
  {time}
&lt;/div&gt;
```</p>
<p>å½“ç„¶å¯èƒ½æœ‰äººä¼šè¯´ï¼ŒRandy, ä½ è¿åœ¨ hooks é‡Œé¢æ€ä¹ˆç”¨ setInterval éƒ½ä¸çŸ¥é“ï¼Œä½ ä¸€å®šæ˜¯ JavaScript åŸºç¡€ä¸è¡Œï¼Œå›å»è¡¥è¡¥åŸºç¡€å§ï¼å¯¹äºè¿™æ ·çš„æƒ³æ³•ï¼Œæˆ‘åªèƒ½ä¸€ç¬‘äº†ä¹‹ğŸ˜†ã€‚</p>
<p>æˆ‘æ²¡æœ‰åŠæ³•æå‡ºä¸€ä¸ªæ€æ‰‹çº§çš„åŠŸèƒ½å¸å¼•æ²¡æœ‰ç”¨è¿‡ Svelte çš„äººæ¥ç”¨ Svelte, æˆ‘åªèƒ½è¯´æˆ‘å–œæ¬¢ Svelte æ˜¯å› ä¸ºå¥¹æ˜¯ä¸€ä¸ªç®€å•çš„æ¡†æ¶ï¼Œæˆ‘åœ¨ç”¨å¥¹çš„æ—¶å€™ä¸ç”¨æƒ³å¤ªå¤š Why.</p>
<p>Vue çš„ç¼ºç‚¹å’Œä¼˜ç‚¹åŸºæœ¬å°±æ˜¯ Svelte çš„ç¼ºç‚¹å’Œä¼˜ç‚¹ï¼Œä½† Svelte ä»ç”¨æ³•ä¸Šæ¯” Vue æ›´ç®€å•ã€‚</p>
<p>è‡³äºæœ‰äººè¯´ï¼ŒSvelte ç”Ÿæˆçš„ä»£ç ä½“ç§¯å°ï¼Œæˆ‘è®¤ä¸ºè¿™ç¡®å®æ˜¯ä¸€ä¸ªä¼˜åŠ¿ï¼Œä¸è¿‡è¦æ³¨æ„çš„æ˜¯ç”¨ Svelte ç”Ÿæˆçš„ä»£ç ï¼Œä½“ç§¯æ˜¯çº¿æ€§å¢é•¿çš„ã€‚è¿™æ˜¯æˆ‘å¤§æ¦‚ç”»çš„ä¸€ä¸ªå›¾ï¼Œè¡¨ç¤ºé¡¹ç›®è§„æ¨¡å’Œä»£ç ä½“ç§¯çš„å…³ç³»ï¼š</p>
<p><img alt="" src="https://gbstatic.djyde.com/uPic/Z9fwZH.png?x-oss-process=style/80"/></p>
<blockquote><p>è¿™åªæ˜¯ä¸€ä¸ªå¤§æ¦‚çš„è¶‹åŠ¿ï¼Œå›¾ä¸­çš„æ–œç‡ä¸æ˜¯ä¸€ä¸ªå‡†ç¡®çš„å€¼ã€‚è¯¦ç»†åœ¨ Github çœ‹ç›¸å…³çš„è®¨è®º <a href="https://github.com/sveltejs/svelte/issues/2546">https://github.com/sveltejs/svelte/issues/2546</a></p>
</blockquote>
<h2>Svelte çš„é€‚ç”¨åœºæ™¯</h2>
<p>ç”Ÿæ€æ˜¯æŠ€æœ¯é€‰å‹ä¸€ä¸ªå¾ˆé‡è¦çš„è€ƒè™‘å› ç´ ï¼ŒSvelte æ˜¾ç„¶ä¸æ˜¯æ•°ä¸€æ•°äºŒçš„é€‰æ‹©ï¼ŒåŸºæœ¬ä¸ç”¨æœŸæœ› Svelte æœ‰ä»€ä¹ˆç°æˆçš„ç»„ä»¶åº“ã€‚</p>
<p>æˆ‘è®¤ä¸º Svelte éå¸¸é€‚åˆç”¨æ¥åšæ´»åŠ¨é¡µã€‚æ´»åŠ¨é¡µæ²¡æœ‰å¾ˆå¤æ‚çš„äº¤äº’ï¼Œä»¥æ¸²æŸ“å’Œäº‹ä»¶ç»‘å®šä¸ºä¸»ã€‚æˆ‘å¸¸å¸¸æƒ³åšç®€å•çš„æ´»åŠ¨é¡µè¿˜ç”¨ React ä¹Ÿå¤ªå§”å±ˆè‡ªå·±äº†å§ã€‚</p>
<p>å¦å¤–ä¸€ä¸ªå¾ˆå¥½çš„ç”¨æ³•æ˜¯ç”¨ Svelte å†™çš„ UI ç»„ä»¶ï¼Œå¯ä»¥åŒ…è£…æˆç»™ä¸åŒæ¡†æ¶ç”¨çš„ç»„ä»¶ã€‚Svelte æš´éœ²äº†è¶³å¤Ÿçš„ <a href="https://svelte.dev/docs#$set">API</a> å¯ä»¥é€‚é…åˆ°å…¶å®ƒæ¡†æ¶ï¼Œæ¯”å¦‚å†™ä¸€ä¸ªæ—¥å†ç»„ä»¶ï¼Œç„¶ååˆ†åˆ«åŒ…è£…æˆ React å’Œ Vue çš„ç‰ˆæœ¬ã€‚</p>
<h2>ç»“è®º</h2>
<p>æˆ‘å¾ˆå–œæ¬¢ Rich Harris (Svelte çš„ä½œè€…) çš„å¾ˆå¤šæƒ³æ³•ï¼Œåœ¨ YouTube çœ‹ä»–çš„æ¼”è®²æœ‰å¾ˆå¤§çš„æ”¶è·ã€‚ä½ å¯ä»¥åœ¨ä¸‹é¢çš„å»¶ä¼¸é“¾æ¥æ‰¾åˆ°æ›´å¤šæœ‰å…³ Svelte çš„æˆ‘è®¤ä¸ºä¸é”™çš„è§†é¢‘ï¼Œååˆ†æ¨è Rethinking Reactivity è¿™ä¸ªæ¼”è®²ï¼ˆæˆ‘åœ¨ Bilibili æ²¡æœ‰æ‰¾åˆ°æ¬è¿ï¼Œæ‰€ä»¥åªèƒ½è´´ä¸Š YouTube é“¾æ¥äº†ï¼‰ã€‚</p>
<p>æœ€åæƒ³è¯´çš„æ˜¯ï¼Œå­¦ä¹ ä¸€ä¸ªæ¡†æ¶æˆ–è€…ä¸€ä¸ªè¯­è¨€ï¼Œä¸ä¸€å®šæ˜¯éè¦æŠŠå®ƒç”¨åˆ°ç”Ÿäº§ç¯å¢ƒæ‰ç®—æ˜¯æœ‰ç”¨ã€‚æˆ‘å¾ˆå–œæ¬¢çœ‹æ–°çš„æŠ€æœ¯å’Œå­¦ä¸åŒçš„è¯­è¨€ï¼Œæ›´å¤šåœ°æ˜¯å› ä¸ºæƒ³çœ‹çœ‹åœ¨é¢å¯¹åŒä¸€ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œä¸åŒçš„äººè§£å†³é—®é¢˜çš„æ€è·¯æ˜¯æ€ä¹ˆæ ·çš„ï¼Œè¿™æ‰æ˜¯æ¡†æ¶å’Œè¯­è¨€çœŸæ­£çš„é­…åŠ›ã€‚æ¯”å¦‚è¯´ä½ ä¸ä¸€å®šéè¦ç”¨ <a href="https://elm-lang.org">Elm</a>, ä½†æ˜¯ä½ ä¸€å®šèƒ½ä» Elm çš„è®¾è®¡å­¦åˆ°ç‚¹ä»€ä¹ˆã€‚Svelte ä¹Ÿä¸€æ · :)</p>
<h2>å»¶ä¼¸é“¾æ¥</h2>
<ul>
<li><a href="https://www.zhihu.com/question/53150351">çŸ¥ä¹ - å¦‚ä½•çœ‹å¾… svelte è¿™ä¸ªå‰ç«¯æ¡†æ¶ï¼Ÿ</a></li>
<li><a href="https://www.youtube.com/watch?v=AdNJ3fydeao">Rethinking Reactivity (YouTube)</a></li>
<li><a href="https://overreacted.io/making-setinterval-declarative-with-react-hooks/">Making setInterval Declarative with React Hooks</a></li>
<li><a href="https://lihautan.com/compile-svelte-in-your-head/">Compile Svelte in your head</a></li>
<li><a href="https://www.swyx.io/svelte-sites-react-apps/">Svelte for Sites, React for Apps</a></li>
</ul>
