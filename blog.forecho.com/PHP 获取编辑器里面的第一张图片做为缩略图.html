<h2><a href="https://github.com/forecho/hugo-blog/blob/master/content/posts/php-huo-qu-bian-ji-qi-li-mian-de-di-yi-zhang-tu-pian-zuo-wei-suo-lve-tu.md">仓库源文</a>，<a href="https://blog.forecho.com/php-huo-qu-bian-ji-qi-li-mian-de-di-yi-zhang-tu-pian-zuo-wei-suo-lve-tu.html">站点原文</a></h2>
<hr/>
<h2>title: "PHP 获取编辑器里面的第一张图片做为缩略图"
date: 2011-11-23T17:11:00+08:00
tags: ["php"]
draft: false
toc: true</h2>
<p>思路是这样的：使用正则表达式 查询到文章所在的字段，获取到图片的绝对路径。 代码如下：（这个我使用的是 CI 框架开发的，下面是控制器里面的代码）</p>
<pre><code class="language-php">//获取文章字段的内容

$data['sel_news'] = $this-&gt;mhome-&gt;sel_news();

foreach ($data['sel_news'] as $row)
{
    $row['content'];
}
//正则表达式查找图片的绝对路径，并且获取
preg_match_all ("/&lt;(img|IMG)(.*)(src|SRC)=[\"|'|]{0,}([h|\/].*(jpg|JPG|gif|GIF|png|PNG))[\"|'|\s]{0,}/isU",$row['content'],$out);
$data['get_image'] = $out[4];
</code></pre>
<p>视图输出代码：</p>
<pre><code class="language-html">&lt;img src='&lt;?php echo $get_image[0];?&gt;'&gt;&lt;/img&gt;
</code></pre>
<p>如是是想输出多张图片的话，视图就用 foreach 输出。</p>
