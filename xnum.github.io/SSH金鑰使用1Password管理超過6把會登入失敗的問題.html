<h2>原文：<a href="https://xnum.github.io/2023/11/09/1password-ssh-6-key-limit">SSH金鑰使用1Password管理超過6把會登入失敗的問題</a></h2>
<hr/>
<p>layout: post
title: SSH金鑰使用1Password管理超過6把會登入失敗的問題
categories: [sys_admin]</p>
<h2>description: 由於ssh agent會每把key都試，而ssh server預設重試上限是6...</h2>
<p>當你在1Password裡面放了6把SSH金鑰以後，登入SSH Server可能會發生這個錯誤</p>
<pre><code>Too many authentication failures
</code></pre>
<p>這是因為預設啟用了對所有Host都使用ssh-agent</p>
<pre><code>Host *
    IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
</code></pre>
<p>目前看起來解決方法只有config要辛苦一點列舉了</p>
<pre><code>Host github.com
        HostName github.com
        User git
        IdentityFile "~/.ssh/github.pub"
        IdentitiesOnly yes
        IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"

Host *
        IdentitiesOnly yes
</code></pre>
<p><a href="https://developer.1password.com/docs/ssh/agent/advanced/#ssh-server-six-key-limit">https://developer.1password.com/docs/ssh/agent/advanced/#ssh-server-six-key-limit</a></p>
