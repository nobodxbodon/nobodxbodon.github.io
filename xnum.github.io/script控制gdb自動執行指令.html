<h2><a href="https://github.com/xnum/xnum.github.io/blob/master/_posts/2018-03-26-automation-gdb.md">仓库源文</a>，<a href="https://xnum.github.io/2018/03/26/automation-gdb">站点原文</a></h2>
<p>原本在做網路斷線測試</p>
<p>為了模擬異常狀況，要從外部把fd關掉</p>
<p>查了一下，沒辦法從<code>/proc</code>下手</p>
<p>於是用gdb來做。但手動打指令速度太慢，無法進入我想要的程式流程</p>
<p>所幸gdb可以吃script自動執行</p>
<p>先寫個文字檔..</p>
<pre><code>p close(11)
detach
quit
</code></pre>
<p>然後執行指令</p>
<pre><code>gdb attach 24803 --command=test.gdb
</code></pre>
<p>順利出現</p>
<pre><code>13:48:33   ERR|tcp.c   :  50 handle_hb_pack # error = bad file descriptor
</code></pre>
