<h2>原文：<a href="https://zsqk.github.io/2020/04/08/nullish-coalescing-operator">空值合并运算符 nullish coalescing operator</a></h2>
<hr/>
<h2>title: 空值合并运算符 nullish coalescing operator
categories: [ecmascript]</h2>
<h1>nullish coalescing operator</h1>
<p>最近 <a href="https://github.com/tc39/proposals/commit/943bf8956b7d25032075e4789c1e351fdf2ae9ec">Logical Assignment Operators 提案到了 Stage 3</a>.</p>
<p>以前没有关注过<a href="https://github.com/tc39/proposal-logical-assignment">这一提案</a>, 今天特意看了一下.</p>
<p>提案中说道, 在 ECMAScript 规范中, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Assignment_Operators">有许多数学的赋值运算符</a>,
但却没有逻辑的赋值运算符.</p>
<p>普通的赋值运算符就是 <code>=</code>. 数学的赋值运算符比如 <code>+=</code> 是加法的赋值运算符,
<code>-=</code> 是减法的赋值运算符.</p>
<p>所有的特殊赋值运算符目的都是为了简洁, 只是一种语法糖.</p>
<p>不过既然我们都有了数学的赋值运算符, 那就是认可了这种语法糖, 提案者据此提出了
逻辑的赋值运算符.</p>
<p>当然也是借鉴了其他语言, 如 Ruby.</p>
<pre><code class="language-js">let opts = { foo: 'foo' };

// 等效
if (opts.foo === null || opts.foo === undefined) {
    opts.foo = 'bar';
}
opts.foo = opts.foo ?? 'bar'

// 等效
opts.baz ?? (opts.baz = 'qux');
opts.baz ??= 'qux';
</code></pre>
<p>这里说到了以前没见过的运算符, <code>??</code>, 被称为 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator">nullish coalescing operator</a>.</p>
<p>在 MDN 的中文文档里被称为 空值合并运算符.</p>
<p>听名字就挺好理解的, 主要为了替代 <code>||</code> 的部分功能.</p>
<p>空值合并运算符是 Finished Proposals(Stage 4). 将来大家都可以用到.
在浏览器中的支持情况已经很好了, 主流浏览器的最新版本都支持. 最新的 V8 已经支持,
但目前 Node.js 还不支持.</p>
<p>总之, <code>??</code> 对我来说是一个有用的语法糖, 我也会推荐大家使用.</p>
