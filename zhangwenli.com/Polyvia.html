<h2><a href="https://github.com/Ovilia/blog/blob/gh-pages/_posts/2015-06-25-polyvia.md">仓库源文</a>，<a href="http://zhangwenli.com/blog/2015/06/25/polyvia">站点原文</a></h2>
<hr/>
<p>title: Polyvia
subtitle: Low-Poly 风格的图像、视频处理
first_time: 2015.06.25 15:08:13
time: 2015.06.26 12:25:15
layout: post
tags:</p>
<ul>
<li>中文</li>
<li>JavaScript</li>
<li>Project</li>
<li>ImageProcessing</li>
<li>Shader</li>
<li>Three.js
excerpt: 最初做这个项目的原因是作为&lt;a href="https://github.com/baidu-ife/ife" target="_blank"&gt;百度 IFE&lt;/a&gt; 的高级题。代码可以在 &lt;a href="https://github.com/Ovilia/Polyvia" target="_blank"&gt;GitHub Polyvia&lt;/a&gt; 看到。效果可以在线看到，&lt;a href="https://umeecorn.com/Polyvia/image.html" target="_blank"&gt;图像版&lt;/a&gt;的可以对上传的图片进行处理，另外做了超出题目要求的&lt;a href="https://umeecorn.com/Polyvia/video.html" target="_blank"&gt;视频版&lt;/a&gt;。
series: Polyvia</li>
</ul>
<hr/>
<p>最初做这个项目的原因是作为&lt;a href="https://github.com/baidu-ife/ife" target="_blank"&gt;百度 IFE&lt;/a&gt; 的高级题。想起我去百度面试的时候，&lt;a href="https://github.com/pissang" target="_blank"&gt;沈大侠&lt;/a&gt;问我怎么做人脸的 Low-Poly 风格渲染。我当时 blabla 扯了一堆有的没的，不知道有没有把沈大侠忽悠过去……后来不记得怎么就被忽悠去做 IFE 的这道题了，实现起来当然没有 yy 算法那么容易。前前后后绕了不少弯路，犯了不少愚蠢的错误，才得到了这样的结果。</p>
<p>然后我要说说这个 Low-Poly 的项目为什么要叫 Polyvia 呢？因为 Ovilia 是从 Olivia 来的，再加上 Poly 就变成了 Polyvia！是不是很有意思~ :sunglasses:</p>
<p>之所以昨天开源，是因为我免费的 GitHub private repo 权限昨天到期了，所以赶紧写完 UI 部分发布了，现在代码可以在 &lt;a class="button" href="https://github.com/Ovilia/Polyvia" target="_blank"&gt;Polyvia @ GitHub&lt;/a&gt; 看到。效果可以在线看到，图像版的可以对上传的图片进行处理，另外做了超出题目要求的视频版。</p>
<p>在线运行：</p>
<p>&lt;a href="https://umeecorn.com/Polyvia/image.html" class="button" target="_blank"&gt;图像版&lt;/a&gt;&lt;a href="https://umeecorn.com/Polyvia/video.html" class="button" target="_blank"&gt;视频版&lt;/a&gt;</p>
<p>如果有问题或建议，欢迎&lt;a href="https://github.com/Ovilia/Polyvia/issues" target="_blank"&gt;报 issue&lt;/a&gt; 给我。</p>
<p>好了，废话不多说了，直接上图吧！（前面的是原图，后面的是效果图）</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/1.jpg" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/1.png" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/2.jpg" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/2.png" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/3.jpg" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/3.png" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/4.jpg" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/4.png" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/5.jpg" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/5.png" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/6.jpg" /&gt;</p>
<p>&lt;img class="single-img" src="{{ site.loadingImg }}" data-src="https://raw.githubusercontent.com/Ovilia/Polyvia/gh-pages/src/img/6.png" /&gt;</p>
<p>核心算法参见&lt;a href="{{ site.url }}/2015/06/20/read-from-shader-texture-with-threejs/" target="_blank"&gt;本系列的上一篇博客&lt;/a&gt;。主要思想就是先将图像用 Sobel 边缘检测的着色器渲染到屏幕，然后在边缘上取一些随机点，然后用 Delaunay 三角化组成三角形，用每个三角形重心处的颜色作为三角形的颜色。</p>
<p>涉及到的技术主要是 &lt;a href="{{ site.url }}/all?tag=ThreeJs" target="_blank"&gt;Three.js&lt;/a&gt;，尤其是着色器相关部分。我原来只试过用自己写的着色器，通过这个项目的练习，让我对 &lt;a href="https://github.com/mrdoob/three.js/blob/master/examples/webgl_postprocessing.html" target="_blank"&gt;Three.js 的 EffectComposer&lt;/a&gt; 更熟悉了。</p>
<p>用到的第三方库还有用于做三角化的 &lt;a href="https://github.com/ironwallaby/delaunay" target="_blank"&gt;ironwallaby/delaunay&lt;/a&gt;，用于统计帧数的&lt;a href="http://github.com/mrdoob/stats.js" target="_blank"&gt;mrdoob/stats.js&lt;/a&gt;，以及用于 UI 的&lt;a href="http://code.google.com/p/dat-gui" target="_blank"&gt;dat.gui&lt;/a&gt;。</p>
<p>用到的工具包括用来管理包的 &lt;a href="http://bower.io/" target="_blank"&gt;Bower&lt;/a&gt;，用来生成 HTML 的模板 &lt;a href="http://jade-lang.com/" target="_blank"&gt;JADE&lt;/a&gt;，和用来自动化的强大助手 &lt;a href="http://gulpjs.com/" target="_blank"&gt;Gulp&lt;/a&gt;。</p>
<p>想了解更多的话，不如到 &lt;a class="button" href="https://github.com/Ovilia/Polyvia" target="_blank"&gt;Polyvia @ GitHub&lt;/a&gt; 查看源代码吧！</p>
<div class="about-author">
  <div class="license">
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/" target="_blank">
          <img alt="Creative Commons License" style="border-width:0" src="http://zhangwenli.com/blog/img/cc.png">
      </a>
      <div><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Every blog post in this site</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://zhangwenli.com" property="cc:attributionName" rel="cc:attributionURL">Wenli Zhang</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/" target="_blank">CC 3.0 License</a>, based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="http://github.com/ovilia/blog" rel="dct:source" target="_blank">Github</a>. You can see the source code of this blog site at <a href="https://github.com/Ovilia/blog/tree/gh-pages" target="_blank">github.com/Ovilia/blog</a>.</div>
  </div>
  <div class="follow-me">
      <div class="follow-me-txt">Follow <strong>Wenli Zhang</strong> at</div>
      <a class="social-share-element social-twitter" href="https://twitter.com/OviliaZhang" target="_blank" title="Follow me on Twitter" onclick="_gaq.push(['_trackEvent', 'Follow', 'Twitter', window.location.pathname]);"></a>
<a class="social-share-element social-google" href="https://plus.google.com/u/0/112802684720065263732?rel=author" target="_blank" title="Follow me on Google Plus" onclick="_gaq.push(['_trackEvent', 'Follow', 'GPlus', window.location.pathname]);"></a>
<a class="social-share-element social-github" href="https://github.com/Ovilia" target="_blank" title="Follow me on GitHub" onclick="_gaq.push(['_trackEvent', 'Follow', 'GitHub', window.location.pathname]);"></a>
<a class="social-share-element social-so" href="http://stackoverflow.com/users/760314/ovilia" target="_blank" title="Follow me on StackOverflow" onclick="_gaq.push(['_trackEvent', 'Follow', 'StackOverflow', window.location.pathname]);"></a>
<a class="social-share-element social-linkedin" href="http://www.linkedin.com/profile/view?id=148742016" target="_blank" title="Follow me on LinkedIn" onclick="_gaq.push(['_trackEvent', 'Follow', 'LinkedIn', window.location.pathname]);"></a>
<a class="social-share-element social-dribbble" href="https://dribbble.com/wenli" target="_blank" title="Follow me on Dribbble" onclick="_gaq.push(['_trackEvent', 'Follow', 'Dribbble', window.location.pathname]);"></a>
<a class="social-share-element social-weibo" href="http://weibo.com/plainjane" target="_blank" title="Follow me on Sina Weibo" onclick="_gaq.push(['_trackEvent', 'Follow', 'Weibo', window.location.pathname]);"></a>
<a class="social-share-element social-douban" href="http://www.douban.com/people/ovilia1024/" target="_blank" title="Follow me on Douban" onclick="_gaq.push(['_trackEvent', 'Follow', 'Douban', window.location.pathname]);"></a>

  </div>
  <div style="clear: both"></div>
</div>