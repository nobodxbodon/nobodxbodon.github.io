<h2>原文：<a href="http://codeinchinese.com/2020/04/04/%E5%88%9B%E5%BB%BA-Node.js-%E6%A8%A1%E5%9D%97.markdown">创建 Node.js 模块</a></h2>
<p>参考: <a href="https://docs.npmjs.com/creating-node-js-modules">Creating Node.js modules</a></p>
<h2>创建 package.json 文件</h2>
<p>因为打算创建公开模块, 因此按<a href="https://docs.npmjs.com/creating-and-publishing-unscoped-public-packages">unscoped</a>的建法:</p>
<pre><code>$ npm init
This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.

See `npm help json` for definitive documentation on these fields
and exactly what they do.

Use `npm install &lt;pkg&gt;` afterwards to install a package and
save it as a dependency in the package.json file.

Press ^C at any time to quit.
package name: (npm-module-demo) npm模块演示
Sorry, name can only contain URL-friendly characters.
package name: (npm-module-demo) npm-module-demo-cn
version: (1.0.0) 
description: 
entry point: (index.js) 入口.js
test command: 
git repository: 
keywords: 
author: 
license: (ISC) 
About to write to /Users/xuanwu/work/javascript-apps/npm-module-demo/package.json:

{
  "name": "npm-module-demo-cn",
  "version": "1.0.0",
  "description": "",
  "main": "入口.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "author": "",
  "license": "ISC"
}


Is this OK? (yes)
</code></pre>
<h2>创建入口文件</h2>
<p>入口.js:</p>
<pre><code class="language-javascript">exports.回应 = function() {
  console.log("模块演示");
}
</code></pre>
<h2>测试模块</h2>
<p>首先需要发布模块到 npm. 但在运行<code>npm publish</code>时, 报错:</p>
<pre><code>npm ERR! code E401
npm ERR! 401 Unauthorized - PUT https://registry.npmjs.org/npm-module-demo-cn - You must be logged in to publish packages.
</code></pre>
<p>发现要先运行<code>npm adduser</code>(<a href="https://docs.npmjs.com/cli/adduser.html">参考</a>), 创建用户账号.</p>
<pre><code>npm ERR! code E403
npm ERR! 403 Forbidden - PUT https://registry.npmjs.org/npm-module-demo-cn - you must verify your email before publishing a new package: https://www.npmjs.com/email-edit
</code></pre>
<p>还需验证电邮</p>
<p>之后发布成功.</p>
<p>新建测试目录后, 添加 test.js:</p>
<pre><code class="language-javascript">var 演示 = require('npm-module-demo-cn')

演示.回应()
</code></pre>
<p>安装模块: <code>npm install npm-module-demo-cn</code></p>
<p>测试通过:</p>
<pre><code>$ node test
模块演示
</code></pre>
<p>✌️</p>
