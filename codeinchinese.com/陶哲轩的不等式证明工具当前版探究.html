<h2><a href="https://github.com/program-in-chinese/team_website/blob/master/_posts/2025-05-17-é™¶å“²è½©çš„ä¸ç­‰å¼è¯æ˜å·¥å…·å½“å‰ç‰ˆæ¢ç©¶.md">ä»“åº“æºæ–‡</a>ï¼Œ<a href="http://codeinchinese.com/2025/05/17/é™¶å“²è½©çš„ä¸ç­‰å¼è¯æ˜å·¥å…·å½“å‰ç‰ˆæ¢ç©¶">ç«™ç‚¹åŸæ–‡</a></h2>
<p>åœ¨å°è¯• <a href="https://zhuanlan.zhihu.com/p/1906712430588962744">ç¬¬ä¸€ç‰ˆ</a> åï¼Œç»§ç»­å¯¹ç…§ <a href="https://terrytao.wordpress.com/2025/05/09/a-tool-to-verify-estimates-ii-a-flexible-proof-assistant/">5æœˆ9æ—¥åšæ–‡ã€ŒA tool to verify estimates, II: a flexible proof assistantã€</a> æåˆ°çš„ä¾‹ç¨‹ï¼Œå¯¹è¾“å‡ºè¿›è¡Œä¸­æ–‡åŒ–ã€‚ä½¿ç”¨çš„æ˜¯5æœˆ14æ—¥çš„æºç å†…å®¹ï¼Œä¿®æ”¹åçš„ä»£ç åº“ <a href="https://gitee.com/zhishi/proof-of-inequality">åœ¨æ­¤</a>ã€‚æœ€åæ˜¯ä¸€äº›ä¸ªäººæ„Ÿå—ã€‚</p>
<h2>ç¬¬ä¸€ä¾‹ åè¯ä¸ç­‰å¼</h2>
<p>linarith_solution è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code>å¼€å§‹è¯æ˜ã€‚å½“å‰æƒ…å†µï¼š
x: pos_real
y: pos_real
z: pos_real
h1: x &lt; 2*y
h2: y &lt; 3*z + 1
æ±‚è¯ï¼šx &lt; 7*z + 2
æ£€éªŒä»¥ä¸‹ä¸ç­‰å¼å¯å¦æˆç«‹ï¼š
1*x &gt; 0
1*z &gt; 0
1*y + -3*z &lt; 1
1*x + -7*z &gt;= 2
1*x + -2*y &lt; 0
1*y &gt; 0
ä»¥ä¸‹å¼å­å–å’Œï¼Œå¾—è¯ä¸å¯èƒ½æˆç«‹ï¼š
1*z &gt; 0 ä¸¤è¾¹ä¹˜ 1/4
1*y + -3*z &lt; 1 ä¸¤è¾¹ä¹˜ -1/2
1*x + -7*z &gt;= 2 ä¸¤è¾¹ä¹˜ 1/4
1*x + -2*y &lt; 0 ä¸¤è¾¹ä¹˜ -1/4
è¯æ˜å®Œæ¯•ï¼
</code></pre>
<p>å¯¹åè¯æ³•çš„ä½¿ç”¨æœªç›´æ¥åæ˜ åœ¨è¾“å‡ºä¸­ã€‚å–å’Œæ–¹æ³•ä¸ä¸Šä¸€ç‰ˆç›¸åŒã€‚</p>
<p>å½“å‰ç‰ˆæè¿°è¯æ˜ç›®æ ‡æ˜¯è¿™æ®µï¼š</p>
<pre><code class="lang-py">def linarith_exercise() -&gt; ProofAssistant:
    p = ProofAssistant()
    x, y, z = p.vars("pos_real", "x", "y", "z")
    p.assume(x &lt; 2 * y, "h1")
    p.assume(y &lt; 3 * z + 1, "h2")
    p.begin_proof(x &lt; 7 * z + 2)
    return p
</code></pre>
<p>å¯¹æ¯”å‰ä¸€ç‰ˆé‡Œè¿™æ ·å†™ï¼š</p>
<pre><code class="lang-py">def ä¸€æ¬¡ä¸ç­‰å¼():
    inequalities = set()
    inequalities.add(ä¸ç­‰å¼({'x': 1}, 'gt', 0))
    inequalities.add(ä¸ç­‰å¼({'y': 1}, 'gt', 0))
    inequalities.add(ä¸ç­‰å¼({'z': 1}, 'gt', 0))
    inequalities.add(ä¸ç­‰å¼({'x': 1, 'y': -2}, 'lt', 0))
    inequalities.add(ä¸ç­‰å¼({'y': 1, 'z': -3}, 'lt', 1))
    inequalities.add(ä¸ç­‰å¼({'x': 1, 'z': -7}, 'geq', 2))
    verbose_feasibility(inequalities)
</code></pre>
<p>ç›´æ¥å†™ä¸ç­‰å¼ä½¿å¾—å¯è¯»æ€§å¢åŠ ã€‚æ˜¯æ”¹ç”¨äº†ä¸ä¸Šä¸€ç‰ˆçš„Variable-Expressionç­‰ç±»ä¼¼åŠŸèƒ½çš„SymPyåº“ï¼ˆSymbol-Basicç­‰ï¼‰ã€‚</p>
<p>æ±‚è¯ç›®æ ‡ç”¨çš„æ˜¯ç¬¦å· |- ï¼Œä¹Ÿè®¸æ˜¯Leané£æ ¼ã€‚ä¸­æ–‡åŒ–æ—¶æ”¹ä¸ºã€Œæ±‚è¯ã€ã€‚</p>
<h2>åˆ†æƒ…å†µè¯ä¸ç­‰å¼</h2>
<p>split_solution è¾“å‡ºï¼š</p>
<pre><code>å¼€å§‹è¯æ˜ã€‚å½“å‰æƒ…å†µï¼š
x: real
y: real
h1: (x &gt; -1) &amp; (x &lt; 1)
h2: (y &gt; -2) &amp; (y &lt; 2)
æ±‚è¯ï¼š(x + y &gt; -3) &amp; (x + y &lt; 3)
åˆ†æƒ…å†µ h1: (x &gt; -1) &amp; (x &lt; 1) ä¸º x &gt; -1, x &lt; 1.
å°šä½™ä¸€ç›®æ ‡ã€‚
åˆ†æƒ…å†µ h2: (y &gt; -2) &amp; (y &lt; 2) ä¸º y &gt; -2, y &lt; 2.
å°šä½™ä¸€ç›®æ ‡ã€‚
æ‹†åˆ†ç›®æ ‡ä¸ºï¼šx + y &gt; -3, x + y &lt; 3
å°šä½™ 2 ç›®æ ‡ã€‚
ç›®æ ‡ç”± linear arithmetic æ±‚è§£ï¼
å°šä½™ä¸€ç›®æ ‡ã€‚
ç›®æ ‡ç”± linear arithmetic æ±‚è§£ï¼
è¯æ˜å®Œæ¯•ï¼
</code></pre>
<p>ä»…ä»è¿™ä¸ªè¾“å‡ºçœ‹ä¸æ¸…æ¯æ­¥è¾¾æˆäº†å“ªä¸ªç›®æ ‡ã€‚</p>
<h2>æ¸è¿›ä¸ç­‰å¼</h2>
<p>ä¸­æ–‡åŒ–æ—¶å°†è¾“å‡ºåŒ–ä¸ºæ›´æ¥è¿‘æ•°å­¦å…¬å¼çš„è¡¨è¾¾ï¼Œå¦‚çœå» **1 ç­‰ï¼š</p>
<pre><code>Theta(x)**1 * Theta(N)**-2 &lt;= Theta(1) raised to power -1
=&gt;
ğš¹(x) * ğš¹(N)^-2 &lt;= ğš¹(1) çš„ -1 æ¬¡å¹‚
</code></pre>
<p>loglinarith_solution æ”¹ä¸º <code>p.use(LogLinarith(verbose=True))</code> è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code>å¼€å§‹è¯æ˜ã€‚å½“å‰æƒ…å†µï¼š
N: pos_int
x: pos_real
y: pos_real
h1: x &lt;= 2*N**2
h2: y &lt; 3*N
æ±‚è¯ï¼šğš¹(x)*ğš¹(y) &lt;= ğš¹(N)^4
ä¸ºåè¯ï¼ŒåŒ–ä¸ºä»¥ä¸‹æ¸è¿›ä¸ç­‰å¼ï¼š
['ğš¹(N) &gt;= ğš¹(1)']
['ğš¹(x) * ğš¹(N)^-2 &lt;= ğš¹(1)']
['ğš¹(y) * ğš¹(N)^-1 &lt;= ğš¹(1)']
['ğš¹(x) * ğš¹(y) * ğš¹(N)^-4 &gt; ğš¹(1)']
æ£€éªŒä»¥ä¸‹ä¸ç­‰å¼å¯å¦æˆç«‹ï¼š
ğš¹(N) &gt;= ğš¹(1)
ğš¹(x) * ğš¹(N)^-2 &lt;= ğš¹(1)
ğš¹(y) * ğš¹(N)^-1 &lt;= ğš¹(1)
ğš¹(x) * ğš¹(y) * ğš¹(N)^-4 &gt; ğš¹(1)
ä»¥ä¸‹ä¹‹ç§¯å¯å¾—çŸ›ç›¾ï¼š
ğš¹(N) &gt;= ğš¹(1) çš„ 1 æ¬¡å¹‚
ğš¹(x) * ğš¹(N)^-2 &lt;= ğš¹(1) çš„ -1 æ¬¡å¹‚
ğš¹(y) * ğš¹(N)^-1 &lt;= ğš¹(1) çš„ -1 æ¬¡å¹‚
ğš¹(x) * ğš¹(y) * ğš¹(N)^-4 &gt; ğš¹(1) çš„ 1 æ¬¡å¹‚
è¯æ˜å®Œæ¯•ï¼
</code></pre>
<p>æ­¤éƒ¨åˆ†åŠŸèƒ½ä¸ç¬¬ä¸€ç‰ˆçš„ç±»ä¼¼ã€‚</p>
<h2>ç»§ç»­é€¼è¿‘</h2>
<p>ç›®æ ‡æ˜¯åœ¨ä¸Šä¸€ä¾‹åŸºç¡€ä¸Šä½œä¿®æ”¹ã€‚è¿™é‡Œæƒ³åˆ°ï¼Œä¹Ÿè®¸å¯åŸºäºè¿™ä¸ªè‡ªåŠ¨å·¥å…·çš„ä¾‹ç¨‹ç”Ÿæˆä¸€äº›çŒœæƒ³ã€‚</p>
<p>loglinarith_hard_solution2 ç©·ä¸¾æ³•ï¼Œè¾“å‡º90è¡Œã€‚</p>
<p>æ¯”è¾ƒ loglinarith_hard_solution è¾“å‡ºï¼š</p>
<pre><code>å¼€å§‹è¯æ˜ã€‚å½“å‰æƒ…å†µï¼š
N: pos_int
x: pos_real
y: pos_real
h1: x &lt;= 2*N**2 + 1
h2: y &lt; 3*N + 4
æ±‚è¯ï¼šğš¹(x)*ğš¹(y) &lt;= ğš¹(N)^3
å°† h1: x &lt;= 2*N**2 + 1 è½¬åŒ–ä¸ºæ¸è¿›å½¢å¼ h1_theta: ğš¹(x) &lt;= Max(ğš¹(1), ğš¹(N)^2).
å°šä½™ä¸€ç›®æ ‡ã€‚
å°† h2: y &lt; 3*N + 4 è½¬åŒ–ä¸ºæ¸è¿›å½¢å¼ h2_theta: ğš¹(y) &lt;= Max(ğš¹(1), ğš¹(N)).
å°šä½™ä¸€ç›®æ ‡ã€‚
å¯æ–­è¨€ ğš¹(1) &lt;= ğš¹(N).
å°šä½™ 2 ç›®æ ‡ã€‚
ç”± log-linear arithmetic è¾¾æˆç›®æ ‡ï¼
å°šä½™ä¸€ç›®æ ‡ã€‚
å¯æ–­è¨€ ğš¹(1) &lt;= ğš¹(N)^2.
å°šä½™ 2 ç›®æ ‡ã€‚
ç”± log-linear arithmetic è¾¾æˆç›®æ ‡ï¼
å°šä½™ä¸€ç›®æ ‡ã€‚
ç®€åŒ– ğš¹(x) &lt;= Max(ğš¹(1), ğš¹(N)^2) ä¸º ğš¹(x) &lt;= ğš¹(N)^2ï¼Œç”±äº ğš¹(1) &lt;= ğš¹(N)^2.
ç®€åŒ– ğš¹(y) &lt;= Max(ğš¹(1), ğš¹(N)) ä¸º ğš¹(y) &lt;= ğš¹(N)ï¼Œç”±äº ğš¹(1) &lt;= ğš¹(N).
å°šä½™ä¸€ç›®æ ‡ã€‚
ç”± log-linear arithmetic è¾¾æˆç›®æ ‡ï¼
è¯æ˜å®Œæ¯•ï¼
</code></pre>
<p>å¯è§åœ¨äººå·¥æŒ‡å¯¼ä¸‹çš„è¯æ˜è¿‡ç¨‹è¦ç®€çŸ­çš„å¤šï¼ŒåŒæ—¶è¾“å‡ºå¯è¯»æ€§ä»æœ‰å¾ˆå¤§æ”¹è¿›ç©ºé—´ã€‚</p>
<h2>ä½¿ç”¨å®šç†</h2>
<p>amgm_solution è¾“å‡ºï¼š</p>
<pre><code>å¼€å§‹è¯æ˜ã€‚å½“å‰æƒ…å†µï¼š
x: nonneg_real
y: nonneg_real
æ±‚è¯ï¼š2*x*y &lt;= x**2 + y**2
ç”¨å®šç† ç®—æœ¯-å‡ ä½•å‡å€¼ä¸ç­‰å¼(x**2, y**2) æ¨å¯¼ this: x*y &lt;= x**2/2 + y**2/2.
å°šä½™ä¸€ç›®æ ‡ã€‚
æ£€éªŒä»¥ä¸‹ä¸ç­‰å¼å¯å¦æˆç«‹ï¼š
-1*x**2 + -1*y**2 + 2*x*y &gt; 0
-1/2*x**2 + -1/2*y**2 + 1*x*y &lt;= 0
1*y &gt;= 0
1*x &gt;= 0
ä»¥ä¸‹å¼å­å–å’Œï¼Œå¾—è¯ä¸å¯èƒ½æˆç«‹ï¼š
-1*x**2 + -1*y**2 + 2*x*y &gt; 0 ä¸¤è¾¹ä¹˜ 1
-1/2*x**2 + -1/2*y**2 + 1*x*y &lt;= 0 ä¸¤è¾¹ä¹˜ -2
è¯æ˜å®Œæ¯•ï¼
</code></pre>
<p>è¦æ˜¯èƒ½æŸ¥çœ‹å®šç†å†…å®¹å°±æ›´å¥½äº†ã€‚</p>
<p>å¦‚æœæŠŠä½¿ç”¨å®šç†è¿™ä¸¤è¡Œå»æ‰ï¼š</p>
<pre><code class="lang-py">    x, y = p.get_vars("x", "y")
    p.use_lemma(Amgm(x**2, y**2))
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code>å¼€å§‹è¯æ˜ã€‚å½“å‰æƒ…å†µï¼š
x: nonneg_real
y: nonneg_real
æ±‚è¯ï¼š2*x*y &lt;= x**2 + y**2
Checking feasibility of the following inequalities:
1*x &gt;= 0
-1*x**2 + -1*y**2 + 2*x*y &gt; 0
1*y &gt;= 0
Feasible with the following values:
x*y = 0
y = 0
x = 0
y**2 = -1/2
x**2 = 0
</code></pre>
<p>çœ‹èµ·æ¥æœ‰é—®é¢˜ã€‚y å’Œ y**2 çš„å€¼æ²¡æœ‰å…³è”èµ·æ¥ã€‚å›å¤´çœ‹çœ‹æœ‰æ²¡æœ‰æ›´ç®€çŸ­çš„ä¾‹å­å¤ç°ã€‚</p>
<h2>åˆæ„Ÿ</h2>
<p>åœ¨æ•°å­¦å’Œç¼–ç¨‹ç»“åˆæ–¹é¢ï¼Œæ˜¯ä¸€æ¬¡éå¸¸çè´µçš„å°è¯•ã€‚å°¤å…¶æ˜¯é€‰å–çš„å†…å®¹ä¸ç¼–ç¨‹å¦‚ç®—æ³•å¤æ‚åº¦å¾ˆæœ‰å…³è”ï¼Œå¹¶ä¸”ä½¿ç”¨äº†æ¥è¿‘åˆç­‰æ•°å­¦å…¬å¼çš„è¾“å…¥å’Œè¾“å‡ºæ ¼å¼ï¼Œè®©æ›´å¤šäººå°¤å…¶æ˜¯å›½å†…å¹¿å¤§ç¨‹åºå‘˜ç¾¤ä½“å¯¹è‡ªåŠ¨è¯æ˜æœ‰äº†æ›´ç›´è§‚çš„äº²èº«ä½“éªŒã€‚å¸Œæœ›çœ‹åˆ°å¼€ææ•£å¶ã€‚</p>
<p>åœ¨ä¸­æ–‡åŒ–è¿‡ç¨‹ä¸­ï¼Œæœ‰äº›è¾“å‡ºå†…å®¹åœ¨ä¸åŒæ–‡ä»¶ä¸­æœ‰é‡å¤ï¼Œæ¯”å¦‚ <code>Checking feasibility of the following inequalities:</code> åœ¨ linarith, linprog, log_linarith ä¸­éƒ½æœ‰ï¼Œä¹Ÿè®¸æ˜¯å†å²ç‰ˆæœ¬çš„å†—ä½™ä»£ç ã€‚</p>
<p>å½“å‰ç‰ˆç”¨ SymPy çœå»äº†è‡ªè¡Œå®šä¹‰å„ç§åŸºæœ¬ç±»å‹ï¼Œå¦ä¸€æ–¹é¢æ˜¯å¯¹è¡¨è¾¾å¼ç¬¦å·çš„ä½¿ç”¨é™åˆ¶ï¼Œæ¯”å¦‚ <code>p.use_lemma(Amgm(x^2, y**2))</code> å°±ä¼šæŠ¥é”™ï¼š<code>TypeError: unsupported operand type(s) for ^: 'Symbol' and 'int'</code></p>
<p>main.py è¿˜æœ‰å¾ˆå¤šå…¶ä»–ä¾‹å­æœªå°è¯•ã€‚åœ¨ç»§ç»­å¼€å‘ä¹‹å‰ï¼Œå¦‚æœé‡æ„ä»£ç å¹¶ç¼–å†™æ‰¹é‡è‡ªåŠ¨æµ‹è¯•é›†ï¼Œç›¸ä¿¡ä¼šå¯¹åç»­å‚ä¸å¼€å‘è€…é™ä½é—¨æ§›ï¼Œä¹Ÿåˆ©äºé•¿è¿œå‘å±•ã€‚</p>
