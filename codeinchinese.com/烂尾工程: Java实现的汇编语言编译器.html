<h2>[仓库源文](https://github.com/program-in-chinese/team_website/blob/master/_posts/2018-01-03-烂尾工程: Java实现的汇编语言编译器.markdown)，<a href="http://codeinchinese.com/2018/01/03/%E7%83%82%E5%B0%BE%E5%B7%A5%E7%A8%8B:-Java%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E5%99%A8.markdown">站点原文</a></h2>
<hr/>
<h2>layout: post
comments: true
title:  "烂尾工程: Java实现的汇编语言编译器"
description: 一个半拉子工程, 用Java实现的汇编语言编译器的介绍. 代码中使用中文命名. An unfinished project, an assembler implemented in Java, with naming in Chinese.
date:   2018-01-03 14:00:00 -0700
categories: 命名 项目</h2>
<p>在半年前的<a href="https://zhuanlan.zhihu.com/p/27537616">中文编程的尝试历程小记</a>中简单介绍了这一项目. 由于短期内估计不会继续进行, 而且这个项目好像是至今个人在中文命名实践中的代码量最大的一个项目, 谨在此作一小结. 最新的源码库在<a href="https://github.com/program-in-chinese/assembler-in-chinese-experiment">program-in-chinese/assembler-in-chinese-experiment</a>.</p>
<h3>大致设计草图</h3>
<p>![2018_01_03_assembler汇编器设计草图]({{ "/assets/2018_01_03_assembler汇编器设计草图.png" | absolute_url }})</p>
<p>以'mov rax 0x1122334455667788'指令示例如下:</p>
<p>![2018_01_03_assembler汇编器设计草图-示例]({{ "/assets/2018_01_03_assembler汇编器设计草图-示例.png" | absolute_url }})</p>
<h3>当前进度</h3>
<ul>
<li>仅支持两个操作数的部分指令, 第二个操作数仅支持立即数</li>
<li>第一个操作数可以是寄存器,或者简单的内存寻址,如[0]</li>
<li>支持强制类型,如add ax,strict word 5</li>
<li>生成空可执行文件(PE), 尚未填入生成的二进制码</li>
</ul>
<h3>源码结构</h3>
<p>下面是所有文件, 希望是一目了然? "分析器类"从单行汇编指令字符串分析生成"代码行类", "汇编器类"从"代码行类"生成二进制码. 其他主要是业务数据描述("模型"包)和功用(utils).</p>
<p>![2018_01_03_assembler文件]({{ "/assets/2018_01_03_assembler文件.png" | absolute_url }})</p>
<p>假如要重新继续这一项目, 下面是一些想法:</p>
<ul>
<li>考虑使用Antlr4, 用类似<a href="https://github.com/antlr/grammars-v4/blob/master/masm/MASM.g4">antlr/grammars-v4</a>的语法文件辅助生成分析器, 省去手动编写分析器</li>
<li>最好有汇编和x64指令背景的开发者</li>
</ul>
