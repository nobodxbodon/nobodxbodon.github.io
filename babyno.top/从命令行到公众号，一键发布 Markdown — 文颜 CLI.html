<h2><a href="https://github.com/caol64/caol64.github.io/blob/master/content/posts/2025/2025-09-05-wenyan-cli-released.md">仓库源文</a>，<a href="https://babyno.top/posts/2025/09/05/wenyan-cli-released">站点原文</a></h2>
<h2>什么是文颜 CLI？</h2>
<p>文颜 CLI 是一个基于 Node.js 的命令行工具，它可以让你：</p>
<ul>
<li>✅ 使用与 <a href="https://yuzhi.tech/wenyan">文颜</a> 相同的主题系统对 Markdown 自动排版</li>
<li>✅ 将文章直接上传到微信公众号草稿箱</li>
<li>✅ 自动上传本地或网络图片，无需手工处理</li>
<li>✅ 保持全流程在终端完成，支持脚本化与自动化</li>
</ul>
<p>换句话说，文颜 CLI 非常适合自动化完成「从写作到发布」的全流程。</p>
<h2>工作原理</h2>
<p><code>wenyan-cli</code> 内置了一个 <code>publish</code> 子命令，用来执行完整的 Markdown → 微信公众号 草稿的转换与上传。</p>
<p>它会完成几件事：</p>
<ol>
<li>解析 Markdown</li>
<li>应用指定的主题与代码高亮样式</li>
<li>自动上传本地或远程图片到公众号素材库</li>
<li>调用微信 API，将文章推送至公众号草稿箱</li>
</ol>
<p>整个过程对用户是透明的，你只需要在命令行里执行一条指令。</p>
<h2>如何使用？</h2>
<h3>安装</h3>
<pre><code class="lang-bash">npm install -g @wenyan-md/cli
</code></pre>
<h3>环境变量配置</h3>
<p>发布到公众号需要配置两个环境变量：</p>
<ul>
<li><code>WECHAT_APP_ID</code></li>
<li><code>WECHAT_APP_SECRET</code></li>
</ul>
<h4>macOS / Linux</h4>
<pre><code class="lang-bash">export WECHAT_APP_ID=xxx
export WECHAT_APP_SECRET=yyy
</code></pre>
<h4>Windows PowerShell</h4>
<pre><code class="lang-powershell">$env:WECHAT_APP_ID="xxx"; $env:WECHAT_APP_SECRET="yyy"
</code></pre>
<blockquote><p>⚠️ 记得把服务器 IP 加入公众号后台的 <strong>IP 白名单</strong>，否则接口会报错。</p>
</blockquote>
<h3>命令行示例</h3>
<p>直接传入 Markdown 内容：</p>
<pre><code class="lang-bash">wenyan publish "# Hello, Wenyan" -t lapis -h solarized-light
</code></pre>
<p>从文件读取并关闭 Mac 风格代码块：</p>
<pre><code class="lang-bash">cat example.md | wenyan publish -t lapis -h dracula --no-mac-style
</code></pre>
<p>更多内置主题请见：<a href="https://yuzhi.tech/docs/wenyan/theme">主题预览</a></p>
<h2>与文颜 MCP Server 的协同使用</h2>
<p>如果说 <strong>文颜 CLI</strong> 更适合「开发者」和「写作者」的日常使用场景（比如：本地脚本、CI/CD 自动化），那么 <strong><a href="https://babyno.top/posts/2025/06/wenyan-mcp-server-released/">文颜 MCP Server</a></strong> 就是面向 <strong>LLM 协作场景</strong> 的另一把利器。</p>
<ul>
<li>在命令行里：你用 <code>wenyan-cli</code> 把文章一键发布到公众号；</li>
<li>在对话中：你让 LLM 调用 <code>wenyan-mcp</code> 的工具，让它自动完成文章排版与上传。</li>
</ul>
<p>两者结合，可以覆盖 <strong>自动化操作</strong> 与 <strong>AI 辅助操作</strong> 的完整工作流：</p>
<ul>
<li>想要快速写作和自动化发布？用 <code>wenyan-cli</code>。</li>
<li>想要和大语言模型自然协作？用 <code>wenyan-mcp</code>。</li>
</ul>
<p>它们共享同一套主题和上传逻辑，保证排版效果一致。</p>
<h2>适合谁？</h2>
<ul>
<li><strong>自媒体作者</strong>：再也不用为公众号排版发愁</li>
<li><strong>技术写作者</strong>：Markdown → 公众号，一条命令</li>
<li><strong>团队/企业</strong>：可以集成到 CI/CD 流程，实现自动发布</li>
<li><strong>AI 用户</strong>：配合 MCP Server，把文章发布交给大语言模型完成</li>
</ul>
<h2>总结</h2>
<p>文颜 CLI 让写作者们告别了手动排版的痛点。
从命令行运行一条命令，就能把 Markdown 文件变成一篇公众号草稿，自动处理主题、图片和格式，让写作回归「写内容」的本质。</p>
<p>👉 GitHub 地址：<a href="https://github.com/caol64/wenyan-cli">https://github.com/caol64/wenyan-cli</a></p>
