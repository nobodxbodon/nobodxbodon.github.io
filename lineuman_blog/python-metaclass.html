<h2><a href="https://github.com/lineuman/blog/blob/master/_posts/2017-06-15-python-metaclass.md">仓库源文</a>，<a href="https://lineuman_blog/2017/06/15/python-metaclass">站点原文</a></h2>
<hr/>
<p>layout: post
date:   2017-06-15 10:25:16 +0800</p>
<h2>categories: python</h2>
<p><a href="https://jakevdp.github.io/blog/2012/12/01/a-primer-on-python-metaclasses/">a-primer-on-python-metaclasses</a></p>
<p><a href="http://eli.thegreenplace.net/2011/08/14/python-metaclasses-by-example">http://eli.thegreenplace.net/2011/08/14/python-metaclasses-by-example</a></p>
<h3>什么是metaclass???</h3>
<p>假如你想创建一个类（注意是类，不是类的实例），那么你可以使用<code>__mateclass__</code>属性来告诉这个类怎么来构造。</p>
<h3>生成类的方式</h3>
<ul>
<li>使用class关键字创建一个类</li>
<li>使用type生成类</li>
<li>使用type的子类来生成类</li>
</ul>
<h3>Metaclass</h3>
<pre><code>class Interface(object):
    __metaclass__ = InterfaceMeta
    file = 'tmp.txt'

print(Interface.class_id)
print(Interface.file)
</code></pre>
<p><code>__metaclass__</code></p>
<p>by defining the <code>__metaclass__</code> attribute of the class, we've told the class that it should be constructed using <code>InterfaceMeta</code> rather than using <code>type</code>. To make this more definite, observe that the type of Interface is now InterfaceMeta:</p>
<p><code>type(Interface)</code></p>
<p><code>__main__.InterfaceMeta</code></p>
<h3>class</h3>
<h3>object</h3>
<h3>type</h3>
<p>classes are objects, and they are object of type type</p>
<p><code>type(name, bases, dict) -&gt; a new type</code></p>
<p>type(name, bases, dct)</p>
<ul>
<li>name is a string giving the name of the class to be constructed</li>
<li>bases is a tuple giving the parent classes of the class to be constructed</li>
<li>dct is a dictionary of the attributes and methods of the class to be constructed
decorator</li>
</ul>
<h3>Custom Metaclasses(定制属于你的元类)</h3>
<p>Now things get really fun. Just as we can inherit from and extend a class we've created, we can also inherit from and extend the <code>type</code> metaclass, and create custom behavior in our metaclass.</p>
<h3>metaclass和继承的区别？</h3>
<h3>python cookbook 3</h3>
<p>9.13 using a metaclass to control instance creation</p>
<p>Using a metaclass to implement various instance create pattern can offer be a much elegant approach than other solutions not invoving metaclasses.</p>
<p>singleton(单例模式) 或者不允许实例化的类</p>
<h3>example</h3>
<p>Django meta</p>
