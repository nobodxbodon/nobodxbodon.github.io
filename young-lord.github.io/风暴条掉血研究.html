<h2>原文：<a href="https://young-lord.github.io/posts/arcaea-tempest-bar">风暴条掉血研究</a></h2>
<hr/>
<p>tags: [Arcaea, 逆向]
title: 风暴条掉血研究
slug: arcaea-tempest-bar
redirect_from:</p>
<ul>
<li>/posts/风暴条掉血研究
last_modified_at: 2023-3-18</li>
</ul>
<hr/>
<h3>开始打歌时</h3>
<p>将<code>unk64</code>设为<code>max(100-回忆系数*物量,0)</code></p>
<h3>每次发生音符判定时</h3>
<table>
<thead><tr>
<th>pure</th>
<th>far</th>
<th>lost</th>
</tr>
</thead>
<tbody>
<tr>
<td>将<code>hit</code>值增加<code>2*回忆系数</code></td>
<td>将<code>hit</code>值增加<code>回忆系数</code></td>
<td>将<code>nonhit</code>值减少<code>18</code></td>
</tr>
</tbody>
</table>
<h3>每一定时间<sup class="footnote-ref" id="fnref-1"><a href="#fn-1">1</a></sup></h3>
<p>令<code>a</code>=$2^{-两次更新间的秒数}$</p>
<p>令<code>b</code>=$2^{两次更新间的秒数 \times -0.5}$</p>
<p>令<code>剩余系数</code>=$回忆系数\times物量\times(1-min(当前时间/总时长,1)) $<sup class="footnote-ref" id="fnref-2"><a href="#fn-2">2</a></sup></p>
<p>令<code>note影响</code>=$((1-a) \times hit) + ((1 - b) \times nonhit) + unk64$</p>
<p>如果$note影响+剩余系数&gt;100$：更新<code>剩余系数</code>=$100-note影响$</p>
<p>更新<code>hit</code> =$hit \times a$</p>
<p>更新<code>nonhit</code>=$nonhit*b$</p>
<p>更新<code>unk64</code>=$note影响$</p>
<p>更新<code>HP</code>=$note影响+剩余系数$</p>
<div class="footnotes">
<hr/>
<ol><li id="fn-1"><p>在屏幕刷新率为60fps或者设置为禁用高刷的情况下，每一秒执行240次（但不是每1/240秒执行一次）；在屏幕刷新率为120fps并且设置开启高刷的情况下，每一秒执行480次（（可能）不影响结果）<a class="footnote" href="#fnref-1">↩</a></p></li>
<li id="fn-2"><p>总时长：谱面最后一个元素的结束时间+500ms的毫秒形式<a class="footnote" href="#fnref-2">↩</a></p></li>
</ol>
</div>
