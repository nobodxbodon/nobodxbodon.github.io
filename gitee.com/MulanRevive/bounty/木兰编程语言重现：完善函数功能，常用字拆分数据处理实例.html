<h2><a href="https://gitee.com/MulanRevive/bounty/blob/master/%E8%BF%9B%E5%B1%95%E5%B0%8F%E7%BB%93/2020-07-24-%E6%9C%A8%E5%85%B0%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E9%87%8D%E7%8E%B0%EF%BC%9A%E5%AE%8C%E5%96%84%E5%87%BD%E6%95%B0%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%B8%B8%E7%94%A8%E5%AD%97%E6%8B%86%E5%88%86%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%AE%9E%E4%BE%8B.markdown">仓库源文</a></h2>
<p><em><strong>注：项目目标见<a href="https://gitee.com/MulanRevive/mulan-rework">码云代码库</a></strong></em></p>
<p>为方便使用 Python 的标准库与第三方库，支持了函数调用时指定形参名的方式，比如下面代码第一行打开文件的<code>encoding="utf-8"</code>：</p>
<p><img alt="" src="/media/wwww/share/study/聚聚/源数据/博客聚合/gitee.com/MulanRevive/bounty/进展小结/%E6%88%AA%E5%9B%BE/2020-07-24_%E6%8B%86%E5%AD%97.png"/></p>
<p>与之相关，定义函数时可以指定形参默认值，也一并添加。</p>
<p>这段代码是为了获取常用汉字的拆字数据。源数据包括了几万汉字的信息比如：</p>
<pre><code>U+4FC7	俇	⿰亻狂
U+4FC8	俈	⿰亻告
U+4FC9	俉	⿰亻吾
U+4FCA	俊	⿰亻夋
</code></pre>
<p>首先写了个简单的常用字库，用以判断一个字是否属于常用的 2500 字（详见源码）。</p>
<p>上图的代码是过滤了源数据，只取出了常用字中，拆分出的部分也属于常用字的部分，并输出到 json 文件。比如：</p>
<pre><code class="language-javascript">    "圣": {
        "字型": "⿱",
        "部分": [
            "又",
            "土"
        ]
    },
    "地": {
        "字型": "⿰",
        "部分": [
            "土",
            "也"
        ]
    },
</code></pre>
<p>通过此段实例代码，验证了添加的函数功能，并发现了一些字符串转义处理上的问题并修复。</p>
<p>另外，将字典中无键的反馈信息中文化：</p>
<pre><code>d = {1 : 'a', 3 : 'c'}
print(d[4])
</code></pre>
<p>反馈：</p>
<pre><code>(..•˘_˘•..) 字典中不存在此键：4
见第2行：print(d[4])
</code></pre>
<h2>代码统计</h2>
<p>下面是几个主要部分的代码行数统计，格式为：上周-&gt;本周。</p>
<ul>
<li><p>测试</p>
<ul>
<li>木兰测试用例：1090 -&gt; 1228</li>
<li><code>运行测试.py</code>，检验所有木兰测试代码片段：148 -&gt; 151</li>
<li><code>test语法树.py</code>，确保生成的语法树与原始版本一致。修复并添加：63 -&gt; 67</li>
</ul>
</li>
<li><p>实现：2075 -&gt; 2130</p>
<ul>
<li><code>分析器/语法分析器.py</code>：886 -&gt; 916</li>
<li><code>分析器/语法树.py</code>，<code>功用/调试辅助.py</code>，包括对 ast 库的中文封装：271 -&gt; 284</li>
<li><code>演示高亮.py</code>：98 -&gt; 100</li>
<li><code>环境.py</code>，加载木兰模块：88 -&gt; 89</li>
<li><code>功用/反馈信息.py</code>：43 -&gt; 45</li>
<li>未变<ul>
<li><code>分析器/词法分析器.py</code>：187</li>
<li><code>中.py</code>，主程序：35</li>
</ul>
</li>
</ul>
</li>
</ul>
