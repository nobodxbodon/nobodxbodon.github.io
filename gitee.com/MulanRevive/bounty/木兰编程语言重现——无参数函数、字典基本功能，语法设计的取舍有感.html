<h2>原文：<a href="https://gitee.com/MulanRevive/bounty/blob/master/%E8%BF%9B%E5%B1%95%E5%B0%8F%E7%BB%93/2020-07-10-%E6%9C%A8%E5%85%B0%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E9%87%8D%E7%8E%B0%E2%80%94%E2%80%94%E6%97%A0%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0%E3%80%81%E5%AD%97%E5%85%B8%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%EF%BC%8C%E8%AF%AD%E6%B3%95%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%8F%96%E8%88%8D%E6%9C%89%E6%84%9F.markdown">木兰编程语言重现——无参数函数、字典基本功能，语法设计的取舍有感</a></h2>
<p><em><strong>所有相关源码在<a href="https://gitee.com/MulanRevive/mulan-rework">码云</a></strong></em></p>
<p>当函数没有形参时，定义和调用时都可以省去括号，比如：</p>
<pre><code>func 问好 {
  print('吃了么')
}
问好
</code></pre>
<p>感觉这个设计挺合理，但不知这种情况是否会多见。</p>
<p>本周还实现了字典类型的基本功能，与 Python 的基本一致：</p>
<pre><code class="language-python">电话 = { : }
电话['小明'] = 1357
电话 = {'小明': 1234, '小红': 4321}
</code></pre>
<p>值得一提的是，初始化空字典时 Python 的方式是<code>d = {}</code>，而木兰的的空字典是这样表示：<code>{:}</code>。</p>
<p>因为<code>{}</code>在木兰中是内容为空的“代码块”，比如：</p>
<pre><code>func 空函数 {}
</code></pre>
<p>也许这一设计是为了避免语法分析的麻烦，</p>
<p>因此，用<code>{}</code>代替了 Python 的缩进这一语法改动，就影响了空字典的初始化方法。前者对代码视觉效果的影响比后者更大，使用频度也更多。可见，编程语言的特性和语法设计的取舍值得通盘考虑，因为有可能会牵一发动全身，何取何舍应该由语言的目标用户和应用领域等等决定。</p>
<p>于是想到，编程语言设计参考自然语言语法和用词，不仅能增进代码可读性，各语法元素可能更融洽和有持久生命力，因为自然语言本身经过了千百年的演化和考验。</p>
<h2>代码统计</h2>
<p>下面是几个主要部分的代码行数统计，格式为：上周-&gt;本周。</p>
<ul>
<li>测试<ul>
<li>木兰测试用例：1068 -&gt; 1075</li>
<li><code>运行测试.py</code>，检验所有木兰测试代码片段：144 -&gt; 145</li>
<li>未变<ul>
<li><code>test语法树.py</code>，确保生成的语法树与原始版本一致：63</li>
</ul>
</li>
</ul>
</li>
<li>实现：1898 -&gt; 1941<ul>
<li><code>分析器/语法分析器.py</code>：792 -&gt; 824</li>
<li><code>分析器/语法树.py</code>，<code>功用/调试辅助.py</code>，包括对 ast 库的中文封装：251 -&gt; 260</li>
<li>未变<ul>
<li><code>分析器/词法分析器.py</code>：184</li>
<li><code>演示高亮.py</code>：98</li>
<li><code>环境.py</code>，加载木兰模块：87</li>
<li><code>中.py</code>，主程序：35</li>
</ul>
</li>
</ul>
</li>
</ul>
