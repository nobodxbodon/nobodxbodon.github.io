<h2>原文：[木兰语言 0.0.22 继续 py 转木兰；探路 py 3.8](https://gitee.com/MulanRevive/bounty/blob/master/进展小结/2021-07-18-木兰语言 0.0.22 继续 py 转木兰；探路 py 3.8.md)</h2>
<p>之前复现了一部分由 Python 自动转换为木兰代码的功能，运行如下命令就能输出木兰代码：<code>$ 木兰 -兰 某某.py</code>，但尚缺失一些基本语法支持，该功能尚未达到实用程度。</p>
<p>这两天将插入和冒泡排序算法为目标，按需复原了相关部分，达成效果如下（左 Python 右木兰）：</p>
<p><img alt="插入" src="/media/wwww/share/study/聚聚/源数据/博客聚合/gitee.com/MulanRevive/bounty/进展小结/%E6%88%AA%E5%9B%BE/2021-07-18_%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F.png"/>
<img alt="冒泡" src="/media/wwww/share/study/聚聚/源数据/博客聚合/gitee.com/MulanRevive/bounty/进展小结/%E6%88%AA%E5%9B%BE/2021-07-18_%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F.png"/></p>
<p>下面打算以 <a href="https://gitee.com/MulanRevive/mulan-rework/blob/master/%E6%B5%8B%E8%AF%95/%E6%89%8B%E5%B7%A5%E6%B5%8B%E8%AF%95/%E5%91%BD%E4%BB%A4%E8%A1%8C.ul">猜数字例程</a> 为目标继续补完转换功能。</p>
<p>另外，前几天有位在项目首页加了 <a href="https://mybinder.org/v2/git/https%3A%2F%2Fgitee.com%2FMulanRevive%2Fmulan-rework/HEAD">binder 在线环境</a>，这才知道有这样的免费服务：</p>
<p><img alt="binder" src="/media/wwww/share/study/聚聚/源数据/博客聚合/gitee.com/MulanRevive/bounty/进展小结/%E6%88%AA%E5%9B%BE/2021-07-18_binder.png"/></p>
<p>还干了件闲事。木兰重现项目伊始时，就确认了按原始实现基于 python3.7，毕竟离 2023 年还有段时间。不过，现在积攒了这么些测试用例，忍不住想看看如果以后需要升级到 Python 3.8 的话有多大工作量。结果是 <a href="https://gitee.com/MulanRevive/mulan-rework/commit/5758d173b1b45e94f7c7ac43dc6bf4d76c34456c">添了一处代码</a>，就通过了语法功能部分的测试用例，不过有下面几个语法树相关报警待研究：</p>
<p><img alt="报警" src="/media/wwww/share/study/聚聚/源数据/博客聚合/gitee.com/MulanRevive/bounty/进展小结/%E6%88%AA%E5%9B%BE/2021-07-18_py38.png"/></p>
<p>每年应付一次 Python 大版本升级导致的语法树变动，似乎还可以接受。先搁着，需要的话再说吧。</p>
<hr/>
<h3><em><strong>附：代码量统计</strong></em></h3>
<p>主要部分的代码行数统计，格式为：上次-&gt;现在。</p>
<ul>
<li>木兰代码量 3206 -&gt; 3259<ul>
<li>运行环境，实现与测试大部为木兰代码：582</li>
<li>木兰测试用例，包括部分实用小程序（如井字棋）：2624 -&gt; 2677</li>
</ul>
</li>
<li>Python 代码量（木兰实现、测试框架、语法树生成木兰中的 Python 测试代码）：3711 -&gt; 3867<ul>
<li><code>生成/木兰.py</code>：242 -&gt; 350</li>
<li>其他似乎没怎么变</li>
</ul>
</li>
</ul>
<p>嗯，每次都要手动统计忒二了，用木兰写个自动统计的脚本吧~</p>
