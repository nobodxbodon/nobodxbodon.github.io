<h2>原文：<a href="https://gitee.com/MulanRevive/bounty/blob/master/%E8%BF%9B%E5%B1%95%E5%B0%8F%E7%BB%93/2020-06-25-%E6%9C%A8%E5%85%B0%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E9%87%8D%E7%8E%B0%E2%80%94%E2%80%94%E5%84%BF%E6%AD%8C%E6%9F%A5%E8%AF%A2%E5%AE%9E%E4%BE%8B%EF%BC%8C%E5%BC%95%E7%94%A8%E6%A8%A1%E5%9D%97%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C.markdown">木兰编程语言重现——儿歌查询实例，引用模块、字符串列表操作</a></h2>
<p>实现了最基本的对木兰模块的引用功能，正好想做一个儿歌查询，方便找适合小孩唱的歌，就用这个实例进行功能验证。过程中发现缺了一些字符串和列表的基本功能，于是按需添加。</p>
<h2>功能</h2>
<p>这是儿歌数据模块的木兰源码：</p>
<p><img alt="" src="/media/wwww/share/study/聚聚/源数据/博客聚合/gitee.com/MulanRevive/bounty%E6%88%AA%E5%9B%BE/2020-06-25_mulan%E5%84%BF%E6%AD%8C.png"/></p>
<p>下面的搜索部分引用了数据模块（开头<code>using</code>)：</p>
<p><img alt="" src="/media/wwww/share/study/聚聚/源数据/博客聚合/gitee.com/MulanRevive/bounty%E6%88%AA%E5%9B%BE/2020-06-25_mulan%E6%90%9C%E5%84%BF%E6%AD%8C.png"/></p>
<p>其中的 map、filter、list 功能与 Python3 相同。不支持用<code>in</code>判断是否为子字符串，于是用<code>find</code>代替。</p>
<h2>代码统计</h2>
<p>下面是几个主要部分的代码行数统计，+的为相对上周的增量。</p>
<ul>
<li>测试<ul>
<li>木兰测试用例：601 + 299 = 900</li>
<li><code>测试.py</code>，运行测试的脚本：135 + 8 = 143</li>
<li>未变<ul>
<li><code>test语法树.py</code>，确保生成的语法树与原始版本一致：63</li>
</ul>
</li>
</ul>
</li>
<li>实现：1633 + 87 = 1720<ul>
<li><code>分析器/语法分析器.py</code>, 为重用<code>分析</code>方法作重构：652 + 24 = 676</li>
<li><code>演示高亮.py</code>：80 + 18 = 98</li>
<li><code>环境.py</code>，加载木兰模块：33 + 54 = 87</li>
<li><code>中.py</code>，主程序：56 - 21 = 35</li>
<li>未变<ul>
<li><code>分析器/语法树.py</code>，<code>功用/调试辅助.py</code>，包括对 ast 库的中文封装：251</li>
<li><code>词法分析器.py</code>，主要是词法规则：123</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>下一步</h2>
<p>编辑器方面，仅加了些界面元素，功能设想中。</p>
