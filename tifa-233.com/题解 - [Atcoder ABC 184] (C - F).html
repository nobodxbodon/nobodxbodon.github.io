<p>版权声明： 本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！</p>
<h2><a href="https://github.com/Tiphereth-A/Tiphereth-A.github.io/blob/master/source/_posts/abc184.md">仓库源文</a>，<a href="https://tifa-233.com/archives/abc184">站点原文</a></h2>
<p><a href="https://atcoder.jp/contests/abc_184">比赛链接</a></p>
&lt;!-- more --&gt;

<h2>C - Super Ryuma</h2>
<h3>Problem Statement</h3>
<p>There is an infinite two-dimensional grid, and we have a piece called Super Ryuma at square $(r_1,c_1)$. (Ryu means dragon and Ma means horse.) In one move, the piece can go to one of the squares shown below:</p>
<p><img alt="" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/tifa-233.com/source/_posts/C-1.webp"/></p>
<p>More formally, when Super Ryuma is at square $(a,b)$, it can go to square $(c,d)$ such that at least one of the following holds:</p>
<ul>
<li>$a+b=c+d$</li>
<li>$a-b=c-d$</li>
<li>$|a-c|+|b-d|≤3$</li>
</ul>
<p>Find the minimum number of moves needed for the piece to reach $(r_2,c_2)$ from $(r_1,c_1)$.</p>
<h3>Constraints</h3>
<ul>
<li>All values in input are integers.</li>
<li>$1≤r_1,c_1,r_2,c_2≤10^9$</li>
</ul>
<h3>Input</h3>
<p>Input is given from Standard Input in the following format:</p>
<blockquote><p>$\begin{matrix}
  r_1&amp;c_1\
  r_2&amp;c_2
\end{matrix}$</p>
</blockquote>
<h3>Output</h3>
<p>Print the minimum number of moves needed for Super Ryuma to reach $(r_2,c_2)$ from $(r_1,c_1)$.</p>
<h3>Sample Input 1</h3>
<pre><code class="lang-input1">1 1
5 6
</code></pre>
<h3>Sample Output 1</h3>
<pre><code class="lang-output1">2
</code></pre>
<p>We need two moves - for example, $(1,1)\to(5,5)\to(5,6)$.</p>
<h3>Sample Input 2</h3>
<pre><code class="lang-input2">1 1
1 200001
</code></pre>
<h3>Sample Output 2</h3>
<pre><code class="lang-output2">2
</code></pre>
<p>We need two moves - for example, $(1,1)\to(100001,100001)\to(1,200001)$.</p>
<h3>Sample Input 3</h3>
<pre><code class="lang-input3">2 3
998244353 998244853
</code></pre>
<h3>Sample Output 3</h3>
<pre><code class="lang-output3">3
</code></pre>
<p>We need three moves - for example, $(2,3)\to(3,3)\to(-247,253)\to(998244353,998244853)$.</p>
<h3>Sample Input 4</h3>
<pre><code class="lang-input4">1 1
1 1
</code></pre>
<h3>Sample Output 4</h3>
<pre><code class="lang-output4">0
</code></pre>
<h3>解题思路</h3>
<blockquote><p>做这题时我想到了国际象棋中的象, 如果两点同色, 则必然能在两步内到达</p>
</blockquote>
<p>不难发现最多只需三步即可到达</p>
<p>其他的情况简单讨论下即可</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb cpa_cpp title:AtCoder_abc184_c AtCoder/abc184_c/0.cpp %}

&lt;/details&gt;<h2>D - increment of coins</h2>
<h3>Problem Statement</h3>
<p>We have a bag containing $A$ gold coins, $B$ silver coins, and $C$ bronze coins.</p>
<p>Until the bag contains $100$ coins of the same color, we will repeat the following operation:</p>
<p>Operation: Randomly take out one coin from the bag. (Every coin has an equal probability of being chosen.) Then, put back into the bag two coins of the same kind as the removed coin.</p>
<p>Find the expected value of the number of times the operation is done.</p>
<h3>Constraints</h3>
<ul>
<li>$0≤A,B,C≤99$</li>
<li>$A+B+C≥1$</li>
</ul>
<h3>Input</h3>
<p>Input is given from Standard Input in the following format:</p>
<blockquote><p>$A\ B\ C$</p>
</blockquote>
<h3>Output</h3>
<p>Print the expected value of the number of times the operation is done. Your output will be accepted if its absolute or relative error from the correct value is at most $10^{-6}$.</p>
<h3>Sample Input 1</h3>
<pre><code class="lang-input1">99 99 99
</code></pre>
<h3>Sample Output 1</h3>
<pre><code class="lang-output1">1.000000000
</code></pre>
<p>No matter what coin we take out in the first operation, the bag will contain $100$ coins of that kind.</p>
<h3>Sample Input 2</h3>
<pre><code class="lang-input2">98 99 99
</code></pre>
<h3>Sample Output 2</h3>
<pre><code class="lang-output2">1.331081081
</code></pre>
<p>We will do the second operation only if we take out a gold coin in the first operation. Thus, the expected number of operations is $2\times\frac{98}{98+99+99}+1\times\frac{99}{98+99+99}+1\times\frac{99}{98+99+99}=1.331081081...$</p>
<h3>Sample Input 3</h3>
<pre><code class="lang-input3">0 0 1
</code></pre>
<h3>Sample Output 3</h3>
<pre><code class="lang-output3">99.000000000
</code></pre>
<p>Each operation adds a bronze coin.</p>
<h3>Sample Input 4</h3>
<pre><code class="lang-input4">31 41 59
</code></pre>
<h3>Sample Output 4</h3>
<pre><code class="lang-output4">91.835008202
</code></pre>
<h3>解题思路</h3>
<p>比较简单的期望 MS</p>
<p>设 $f(a,b,c)$ 表示三种硬币各有 $a,b,c$ 个的时候, 胜利的期望步数</p>
<p>则</p>
<p>$$
f(a,b,c)=\frac{a\ f(a+1,b,c)+b\ f(a,b+1,c)+c\ f(a,b,c+1)}{a+b+c}+1
$$</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb cpa_cpp title:AtCoder_abc184_d AtCoder/abc184_d/0.cpp %}

&lt;/details&gt;<h2>E - Third Avenue</h2>
<h3>Problem Statement</h3>
<p>There is a town represented as a two-dimensional grid with $H$ horizontal rows and $W$ vertical columns.</p>
<p>A character $a<em>{i,j}$ describes the square at the $i$-th row from the top and $j$-th column from the left. Here, $a</em>{i,j}$ is one of the following: <code>S</code>, <code>G</code>, <code>.</code>, <code>#</code>, <code>a</code>, ..., and <code>z</code>.</p>
<p><code>#</code> represents a square that cannot be entered, and <code>a</code>, ..., <code>z</code> represent squares with teleporters.</p>
<p>Takahashi is initially at the square represented as <code>S</code>. In each second, he will make one of the following moves:</p>
<ul>
<li>Go to a non-<code>#</code> square that is horizontally or vertically adjacent to his current position.</li>
<li>Choose a square with the same character as that of his current position, and teleport to that square. He can only use this move when he is at a square represented as <code>a</code>, ..., or <code>z</code>.</li>
</ul>
<p>Find the shortest time Takahashi needs to reach the square represented as <code>G</code> from the one represented as <code>S</code>.
If the destination is unreachable, report <code>-1</code> instead.</p>
<h3>Constraints</h3>
<ul>
<li>$1≤H,W≤2000$</li>
<li>$a_{i,j}$ is <code>S</code>, <code>G</code>, <code>.</code>, <code>#</code>, or a lowercase English letter.</li>
<li>There is exactly one square represented as <code>S</code> and one square represented as <code>G</code>.</li>
</ul>
<h3>Input</h3>
<p>Input is given from <code>S</code>tandard Input in the following format:</p>
<blockquote><p>$\begin{matrix}
 H&amp;W\
 a<em>{1,1}&amp;...&amp;a</em>{1,W}\
 \vdots\
 a<em>{H,1}&amp;...&amp;a</em>{H,W}
\end{matrix}$</p>
</blockquote>
<h3>Output</h3>
<p>Print the shortest time Takahashi needs to reach the square represented as <code>G</code> from the one represented as <code>S</code>.
If the destination is unreachable from the initial position, print <code>-1</code> instead.</p>
<h3>Sample Input 1</h3>
<pre><code class="lang-input1">2 5
S.b.b
a.a.G
</code></pre>
<h3>Sample Output 1</h3>
<pre><code class="lang-output1">4
</code></pre>
<p>Let $(i,j)$ denote the square at the $i$-th row from the top and $j$-th column from the left.</p>
<p>Initially, Takahashi is at $(1,1)$. One way to reach $(2,5)$ in four seconds is:</p>
<ul>
<li>go from $(1,1)$ to $(2,1)$</li>
<li>teleport from $(2,1)$ to $(2,3)$, which is also an a square;</li>
<li>go from $(2,3)$ to $(2,4)$;</li>
<li>go from $(2,4)$ to $(2,5)$.</li>
</ul>
<h3>Sample Input 2</h3>
<pre><code class="lang-input2">11 11
S##...#c...
...#d.#.#..
..........#
.#....#...#
#.....bc...
#.##......#
.......c..#
..#........
a..........
d..#...a...
.#........G
</code></pre>
<h3>Sample Output 2</h3>
<pre><code class="lang-output2">14
</code></pre>
<h3>Sample Input 3</h3>
<pre><code class="lang-input3">11 11
.#.#.e#a...
.b..##..#..
#....#.#..#
.#dd..#..#.
....#...#e.
c#.#a....#.
.....#..#.e
.#....#b.#.
.#...#..#..
......#c#G.
#..S...#...
</code></pre>
<h3>Sample Output 3</h3>
<pre><code class="lang-output3">-1
</code></pre>
<h3>解题思路</h3>
<p>简单的 BFS 会卡一个点, 要加优化</p>
<p>注意到任意一个传送门最多都只会经过一次, 所以我们可以把经过的传送门销毁</p>
<p>注意一下 <code>std::list&lt;&gt;.erase()</code> 的用法</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb cpa_cpp title:AtCoder_abc184_e AtCoder/abc184_e/0.cpp %}

&lt;/details&gt;<h2>F - Programming Contest</h2>
<h3>Problem Statement</h3>
<p>Takahashi will participate in a programming contest, which lasts for $T$ minutes and presents $N$ problems.</p>
<p>With his extrasensory perception, he already knows that it will take Ai minutes to solve the i-th problem.</p>
<p>He will choose zero or more problems to solve from the N problems so that it takes him no longer than $T$ minutes in total to solve them.</p>
<p>Find the longest possible time it takes him to solve his choice of problems.</p>
<h3>Constraints</h3>
<ul>
<li>All values in input are integers.</li>
<li>$1≤N≤40$</li>
<li>$1≤T≤109$</li>
<li>$1≤A_i≤109$</li>
</ul>
<h3>Input</h3>
<p>Input is given from Standard Input in the following format:</p>
<blockquote><p>$\begin{matrix}
  N&amp;T\
  A_1&amp;...&amp;A_N
\end{matrix}$</p>
</blockquote>
<h3>Output</h3>
<p>Print the answer as an integer.</p>
<h3>Sample Input 1</h3>
<pre><code class="lang-input1">5 17
2 3 5 7 11
</code></pre>
<h3>Sample Output 1</h3>
<pre><code class="lang-output1">17
</code></pre>
<p>If he chooses the $1$-st, $2$-nd, $3$-rd, and $4$-th problems, it takes him $2+3+5+7=17$ minutes in total to solve them, which is the longest possible time not exceeding $T=17$ minutes.</p>
<h3>Sample Input 2</h3>
<pre><code class="lang-input2">6 100
1 2 7 5 8 10
</code></pre>
<h3>Sample Output 2</h3>
<pre><code class="lang-output2">33
</code></pre>
<p>It is optimal to solve all the problems.</p>
<h3>Sample Input 3</h3>
<pre><code class="lang-input3">6 100
101 102 103 104 105 106
</code></pre>
<h3>Sample Output 3</h3>
<pre><code class="lang-output3">0
</code></pre>
<p>He cannot solve any of the problems.</p>
<h3>Sample Input 4</h3>
<pre><code class="lang-input4">7 273599681
6706927 91566569 89131517 71069699 75200339 98298649 92857057
</code></pre>
<h3>Sample Output 4</h3>
<pre><code class="lang-output4">273555143
</code></pre>
<p>If he chooses the $2$-nd, $3$-rd, and $7$-th problems, it takes him $273555143$ minutes in total to solve them.</p>
<h3>解题思路</h3>
<p>直接查肯定 T, 折半搜索可以</p>
<p>将数据分成两部分, 一部分二进制枚举所有可能结果并排序; 另一部分二进制枚举, 二分查找前一部分结果中满足 "两部分结果之和 $&lt;T$" 的最大结果</p>
<h3>复杂度</h3>
<p>$\displaystyle\Theta\left(n\cdot 2^\frac{n}{2}+2^\frac{n}{2}\left(\frac{n}{2}\right)^2\right)\implies O\left(\left(\frac{n}{2}\right)^22^\frac{n}{2}\right)$</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb cpa_cpp title:AtCoder_abc184_f AtCoder/abc184_f/0.cpp %}

&lt;/details&gt;