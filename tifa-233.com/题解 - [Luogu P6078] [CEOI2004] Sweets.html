<p>版权声明： 本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！</p>
<h2><a href="https://github.com/Tiphereth-A/Tiphereth-A.github.io/blob/master/source/_posts/luogu-p6078.md">仓库源文</a>，<a href="https://tifa-233.com/archives/luogu-p6078">站点原文</a></h2>
<hr/>
<p>title: "题解 - [Luogu P6078] [CEOI2004] Sweets"
categories:</p>
<ul>
<li>算法竞赛</li>
<li>题解
tags:</li>
<li>算法竞赛</li>
<li>题解</li>
<li>洛谷</li>
<li>数学</li>
<li>组合数学</li>
<li>生成函数
date: 2022-05-10 01:15:51</li>
</ul>
<hr/>
<p><a href="https://www.luogu.com.cn/problem/P6078">题目链接</a></p>
<p>&lt;!-- more --&gt;</p>
<h2>原始题面</h2>
<h3>题目描述</h3>
<p>John 得到了 $n$ 罐糖果. 不同的糖果罐, 糖果的种类不同 (即同一个糖果罐里的糖果种类是相同的, 不同的糖果罐里的糖果的种类是不同的). 第 $i$ 个糖果罐里有 $m_{i}$ 个糖果. John 决定吃掉一些糖果, 他想吃掉至少 $a$ 个糖果, 但不超过 $b$ 个. 问题是 John 无法确定吃多少个糖果和每种糖果各吃几个. 有多少种方法可以做这件事呢?</p>
<h3>输入输出格式</h3>
<h4>输入格式</h4>
<p>输入共 $n+1$ 行: 第一行读入 $n$, $a$, $b$. 接下来 $n$ 行, 一行一个数, 代表 $m_{i}$</p>
<h4>输出格式</h4>
<p>仅一行, 表示 John 能够选择的满足以上条件的吃掉糖果的方法数, 答案对 $2004$ 取模</p>
<h3>输入输出样例</h3>
<h4>输入样例 #1</h4>
<pre><code class="language-input1">2 1 3
3
5
</code></pre>
<h4>输出样例 #1</h4>
<pre><code class="language-output1">9
</code></pre>
<h3>说明</h3>
<h4>数据范围及限制</h4>
<p>对于 $100%$ 的数据, 保证 $1\leq n \leq 10$, $0\leq a \leq b \leq 10^7$, $0 \leq m_{i} \leq 10^6$</p>
<h4>说明</h4>
<p>本题译自 <a href="https://www.oi.edu.pl/old/php/ceoi2004.php?module=show&amp;file=news">Central European Olympiad in Informatics 2004</a> <a href="https://www.oi.edu.pl/old/php/ceoi2004.php?module=show&amp;file=tasks">Day 1</a> <a href="https://www.oi.edu.pl/old/ceoi2004/problems/swe.pdf">T2 Sweets</a></p>
<h2>解题思路</h2>
<p>显然要转成 OGF, 题目即求</p>
<p>$$
\prod_{k=1}^n\sum_{j=0}^{m_k}x^j
$$</p>
<p>的 $x^a$ 到 $x^b$ 项的系数和</p>
<p>整理一下</p>
<p>$$
\begin{aligned}
\prod_{k=1}^n\sum_{j=0}^{m_k}x^j&amp;=\prod_{k=1}^n\frac{1-x^{m_k+1}}{1-x}\
&amp;=(1-x)^{-n}\prod_{k=1}^n(1-x^{m_k+1})\
&amp;=\left(\sum_{i=0}^{\infty}\binom{n+i-1}{i}x^i\right)\prod_{k=1}^n(1-x^{m_k+1})\
\end{aligned}
$$</p>
<p>由于</p>
<p>$$
\sum_{i=s-l+1}^s\binom{n+i-1}{i}=\binom{n+s}{n}-\binom{n+s-k}{n}
$$</p>
<p>所以直接 DFS 即可</p>
<h2>复杂度</h2>
<p>$O(n2^n)$</p>
<h2>代码参考</h2>
<p>&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;</p>
<p>{% icodeweb cpa_cpp title:Luogu_P6078 Luogu/P6078/0.cpp %}</p>
<p>&lt;/details&gt;</p>
