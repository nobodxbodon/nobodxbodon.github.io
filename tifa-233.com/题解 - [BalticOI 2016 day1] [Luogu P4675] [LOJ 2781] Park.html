<p>版权声明： 本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！</p>
<h2><a href="https://github.com/Tiphereth-A/Tiphereth-A.github.io/blob/master/source/_posts/baltoi2016-2.md">仓库源文</a>，<a href="https://tifa-233.com/archives/baltoi2016-2">站点原文</a></h2>
<p>题目链接</p>
<ul>
<li><a href="https://www.luogu.com.cn/problem/P4675">Luogu P4675</a></li>
<li><a href="https://loj.ac/p/2781">LOJ 2781</a></li>
</ul>
&lt;!-- more --&gt;

<h2>原始题面</h2>
<h3>题目描述</h3>
<p>In the capital of Byteland, there is a fenced park whose area is a rectangle. The trees and the visitors in the park are represented as circles.</p>
<p>There are four entrances in the park, one in each corner (1 = bottom-left, 2 =bottom-right, 3 = top-right, 4 = top-left). The visitors can enter and exit the park only through the entrances.</p>
<p>Visitors can enter and exit the park when they touch both sides of a corner of the corresponding entrance. Visitors can move freely in the park, but they cannot overlap any of the trees or the fence.</p>
<p>Your task is to calculate for each visitor, given the entrance they will enter the park,through which entrances they can exit the park.</p>
<h3>输入格式</h3>
<p>The first input line contains two integers $w$ and $h$ : the number of trees in the park and the number of visitors.</p>
<p>The second input line contains two integers $w$ and $h$ : the width and the height of the park area. The bottom-left corner is $(0,0)$, and the top-right corner is $(w,h)$.</p>
<p>After this, there are lines that describe the trees. Each line contains three integers, $x,y$ and $r$ : the center of the tree is $(x,y)$ and its radius is $r$. The trees do not overlap each other or the fence.</p>
<p>Finally, there are $m$ lines that describe the visitors. Each line contains two integers $r$ and $e$ : the radius of the visitor and the entrance they will enter the park.</p>
<p>In addition, no tree overlaps a square area of $2k\times2k$ in each corner, where $k$ is the radius of the largest visitor.</p>
<h3>输出格式</h3>
<p>You should output for each visitor a single line containing the entrances through which they can exit the park, in sorted order without spaces in between.</p>
<h3>样例 #1</h3>
<h4>样例输入 #1</h4>
<pre><code class="lang-input1">5 3
16 11
11 8 1
6 10 1
7 3 2
10 4 1
15 5 1
1 1
2 2
2 1
</code></pre>
<h4>样例输出 #1</h4>
<pre><code class="lang-output1">1234
2
14
</code></pre>
<h3>提示</h3>
<p>Two objects touch if they have one common point. Two objects overlap if they have more than one common point.</p>
<h4>样例解释</h4>
<p>The following figure shows the entrance areas and possible routes for each visitor:</p>
<p><img alt="" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/tifa-233.com/source/_posts/1.webp"/></p>
<h4>Subtasks</h4>
<p>In all subtasks $4k\leq w,h\leq10^9$ where $k$ is the radius of the largest visitor.</p>
<h5>Subtask 1 (27 points)</h5>
<ul>
<li><p>$1\leq n\leq2000$</p>
</li>
<li><p>$m=1$</p>
</li>
</ul>
<h5>Subtask 2 (31 points)</h5>
<ul>
<li><p>$1\leq n\leq200$</p>
</li>
<li><p>$1\leq m\leq10^5$</p>
</li>
</ul>
<h5>Subtask 3 (42 points)</h5>
<ul>
<li><p>$1\leq n\leq2000$</p>
</li>
<li><p>$1\leq m\leq10^5$</p>
</li>
</ul>
<h2>题意简述</h2>
<p>给一个矩形, 矩形内部有若干障碍, 游客可以从矩形的四角进出, 游客可以在不碰到障碍的前提下在矩形内任意活动, 游客和障碍均为圆, 每次询问给出游客的直径和入口, 问游客可以从哪些地方出去</p>
<h2>解题思路</h2>
<p>不难发现我们可以考虑离线, 按直径升序排序, 这样我们就可以把游客直径的增加转为障碍直径的增加</p>
<p>接下来的思路就类似 NOIP2017 的奶酪, 考虑并查集, 若障碍相切或相交就合并, 之后考虑矩形的边界是否在同一集合即可</p>
<h2>复杂度</h2>
<p>$O(m(\log m+\alpha(n))+n^2)$</p>
<h2>代码参考</h2>
<p>{% icodeweb blog lang:cpp baltoi2016-2/std.cpp %}</p>
