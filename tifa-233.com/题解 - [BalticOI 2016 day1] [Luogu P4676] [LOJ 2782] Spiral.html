<p>版权声明： 本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！</p>
<h2><a href="https://github.com/Tiphereth-A/Tiphereth-A.github.io/blob/master/source/_posts/baltoi2016-3.md">仓库源文</a>，<a href="https://tifa-233.com/archives/baltoi2016-3">站点原文</a></h2>
<hr/>
<p>title: "题解 - [BalticOI 2016 day1] [Luogu P4676] [LOJ 2782] Spiral"
categories:</p>
<ul>
<li>算法竞赛</li>
<li>题解
tags:</li>
<li>算法竞赛</li>
<li>题解</li>
<li>BalticOI</li>
<li>洛谷</li>
<li>LOJ</li>
<li>数学
date: 2018-06-09 21:23:49</li>
</ul>
<hr/>
<p>题目链接</p>
<ul>
<li><a href="https://www.luogu.com.cn/problem/P4676">Luogu P4676</a></li>
<li><a href="https://loj.ac/p/2782">LOJ 2782</a></li>
</ul>
&lt;!-- more --&gt;

<h2>原始题面</h2>
<h3>题目描述</h3>
<p>A grid of size $(2n+1)\times(2n+1)$ has been constructed as follows. Number $1$ has been placed in the center square, number $2$ has been placed to the right of it, and the following numbers have been placed along the spiral counterclockwise.</p>
<p>Your task is to calculate answers for $q$ queries where the sum of numbers in an rectangular region in the grid is requested (modulo $10^9+7$). For example, in the following grid $n=2$ and the sum of numbers in the gray region is $74$ :</p>
<p><img alt="" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/tifa-233.com/source/_posts/1.webp"/></p>
<h3>输入格式</h3>
<p>The first input line contains two integers $n$ and $q$ : the size of the grid and the number of queries.</p>
<p>After this, there are $q$ lines, each containing four integers $x_1, y_1, x_2$ and $y_2$ ($-n\leq x_1\leq x_2\leq n, -n\leq y_1\leq y_2\leq n$). This means that you should calculate the sum of numbers in a rectangular region with corners $(x_1,y_1)$ and $(x_2,y_2)$.</p>
<h3>输出格式</h3>
<p>You should output the answer for each query (modulo $10^9+7$).</p>
<h3>样例 #1</h3>
<h4>样例输入 #1</h4>
<pre><code class="lang-input1">2 3
0 -2 1 1
-1 0 1 0
1 2 1 2
</code></pre>
<h4>样例输出 #1</h4>
<pre><code class="lang-output1">74
9
14
</code></pre>
<h3>提示</h3>
<p>In all subtasks $1\leq q\leq100$.</p>
<h4>Subtask 1 (12 points)</h4>
<ul>
<li>$1\leq n\leq1000$</li>
</ul>
<h4>Subtask 2 (15 points)</h4>
<ul>
<li><p>$1\leq n\leq10^9$</p>
</li>
<li><p>$x_1=x_2$ and $y_1=y_2$</p>
</li>
</ul>
<h4>Subtask 3 (17 points)</h4>
<ul>
<li>$1\leq n\leq10^5$</li>
</ul>
<h4>Subtask 4 (31 points)</h4>
<ul>
<li><p>$1\leq n\leq10^9$</p>
</li>
<li><p>$x_1=y_1=1$</p>
</li>
</ul>
<h4>Subtask 5 (25 points)</h4>
<ul>
<li>$1\leq n\leq10^9$</li>
</ul>
<h2>题意简述</h2>
<p>给一个螺旋矩阵, 每次询问给出一个子矩阵, 问子矩阵中的元素和</p>
<h2>解题思路</h2>
<p>大力分讨</p>
<h2>复杂度</h2>
<p>$O(q)$</p>
<h2>代码参考</h2>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp baltoi2016-3/std.cpp %}

&lt;/details&gt;