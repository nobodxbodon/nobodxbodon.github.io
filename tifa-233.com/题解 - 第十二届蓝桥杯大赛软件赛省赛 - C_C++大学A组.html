<p>版权声明： 本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！</p>
<h2><a href="https://github.com/Tiphereth-A/Tiphereth-A.github.io/blob/master/source/_posts/lq2021-p1.md">仓库源文</a>，<a href="https://tifa-233.com/archives/lq2021-p1">站点原文</a></h2>
<hr/>
<p>title: 题解 - 第十二届蓝桥杯大赛软件赛省赛 - C/C++大学A组
author: "Tifa &amp; AgOH(code H &amp; I)"
coauthor:</p>
<ul>
<li>AgOH
categories:</li>
<li>算法竞赛</li>
<li>题解
tags:</li>
<li>算法竞赛</li>
<li>题解</li>
<li>蓝桥杯</li>
<li>模拟</li>
<li>暴力</li>
<li>搜索</li>
<li>图论</li>
<li>最短路</li>
<li>Iverson括号</li>
<li>DP</li>
<li>背包DP</li>
<li>01背包DP</li>
<li>状态压缩</li>
<li>记忆化搜索</li>
<li>树形DP</li>
<li>博弈论</li>
<li>数论</li>
<li>前缀和</li>
<li>最大公约数</li>
<li>最小公倍数</li>
<li>素数/质数
date: 2021-04-19 19:21:54</li>
</ul>
<hr/>
<ul>
<li><p>打之前: 蓝桥杯有手就行</p>
<p>打完后: wc 我手呢</p>
</li>
<li><p>暴力杯 (x)</p>
<p>DP 杯(√)</p>
</li>
</ul>
&lt;!-- more --&gt;

<p>简单题目的程序已省略</p>
<h2>题目概览</h2>
<table>
<thead><tr>
<th>题号</th>
<th>标题<sup class="footnote-ref" id="fnref-1"><a href="#fn-1">1</a></sup></th>
<th>做法</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>卡片</td>
<td>模拟</td>
</tr>
<tr>
<td>B</td>
<td>直线</td>
<td>暴力 / 数学</td>
</tr>
<tr>
<td>C</td>
<td>货物摆放</td>
<td>枚举因子</td>
</tr>
<tr>
<td>D</td>
<td>路径</td>
<td>最短路</td>
</tr>
<tr>
<td>E</td>
<td>回路计数</td>
<td>状压 + 记忆化搜索</td>
</tr>
<tr>
<td>F</td>
<td><a href="https://ac.nowcoder.com/acm/problem/13586">砝码称重</a></td>
<td>01 背包</td>
</tr>
<tr>
<td>G</td>
<td>异或数列</td>
<td>博弈论 + DP</td>
</tr>
<tr>
<td>H</td>
<td>左孩子右兄弟</td>
<td>树形 DP</td>
</tr>
<tr>
<td>I</td>
<td><a href="https://hihocoder.com/problemset/problem/1492">括号序列</a></td>
<td>DP + 前缀和</td>
</tr>
<tr>
<td>J</td>
<td>分果果</td>
<td>二分答案 + DP</td>
</tr>
</tbody>
</table>
<p>{% pdf /archives/lq2021-p1/problems.pdf 600px %}</p>
<h2>A - 卡片</h2>
<h3>答案参考</h3>
<p>{% icodeweb blog lq2021-p1/A.php %}</p>
<h2>B - 直线</h2>
<h3>解题思路</h3>
<p>扔<code>set</code>去重即可, 注意精度误差, 建议计算一般式而不是斜截式</p>
<p>或者用数学方法, 下面的代码即为数学方法</p>
<p>设点阵为 $m$ 行 $n$ 列 ($m,n&gt;1$), 显然答案为</p>
<p>$$
m+n+2\sum<em>{i=1}^{m-1}\sum</em>{j=1}^{n-1}<a href="(m-i">(i,j)=1</a>(n-j)-[2i\leqslant m]<a href="m-2i">2j\leqslant n</a>(n-2j))
$$</p>
<p>因为是提答题, 这式子就不化简了</p>
<h3>答案参考</h3>
<p>{% icodeweb blog lq2021-p1/B.php %}</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp lq2021-p1/B.cpp %}

&lt;/details&gt;<h2>C - 货物摆放</h2>
<h3>解题思路</h3>
<p>懒得算的话直接暴力枚举质因子乘积即可</p>
<p>不过这个直接算也好算, 由整数的唯一分解定理并注意到只有 $3$ 是重复出现的质因子且只有 $3$ 个, 所以答案即为 $3^5(1+3+6)=2430$</p>
<p>其中 $1$ 表示 $3$ 个 $3$ 均分在三个乘积里, $3$ 代表 $3$ 个 $3$ 放在同一个乘积里, $6$ 则是其他情况</p>
<h3>答案参考</h3>
<p>{% icodeweb blog lq2021-p1/C.php %}</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp lq2021-p1/C.cpp %}

&lt;/details&gt;<h2>D - 路径</h2>
<h3>答案参考</h3>
<p>{% icodeweb blog lq2021-p1/D.php %}</p>
<h2>E - 回路计数</h2>
<h3>解题思路</h3>
<p>设图为 $G=\lang V,E\rang$</p>
<p>设 $f(i,J)$ 表示当前到达点 $i$ 处且已经到达 $J\subseteq V$ 中所有点时的方案数, 则</p>
<ul>
<li>初始状态: $f(1,{1})=1$</li>
<li><p>转移方程:</p>
<p>$$
f(i,J)=\sum_{k\in V;~(i,k)\in E;~k\notin J\setminus{i}}f(k,J\setminus{i})
$$</p>
</li>
<li><p>答案:</p>
<p>$$
\sum_{i\in V\setminus{1}}f(i,V)
$$</p>
</li>
</ul>
<h3>答案参考</h3>
<p>{% icodeweb blog lq2021-p1/E.php %}</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp lq2021-p1/E.cpp %}

&lt;/details&gt;<h2>F - 砝码称重</h2>
<h3>解题思路</h3>
<p>看成是重量为 $w_i$ 和 $-w_i$ 的 $2n$ 个物品做 01 背包即可</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp lq2021-p1/F.cpp %}

&lt;/details&gt;<h2>G - 异或数列</h2>
<h3>解题思路</h3>
<p>考虑从高到低考虑每个二进制位, 如果某个二进制位上已经可以决出胜负, 则结束; 如果每一位都是平局则平局</p>
<p>所以问题中 $X_i$ 的取值可简化为 ${0,1}$</p>
<p>接下来我们考虑 DP</p>
<p>令 $f(i,j,a,b)$ 表示还剩 $i$ 个 $0$, $j$ 个 $1$, Alice 为 $a$, Bob 为 $b$ 时的结果, 则</p>
<p>$$
f(i,j,a,b)=-\min{f(i-1,j,a,b),f(i,j-1,a\oplus1,b),f(i,j-1,a,b\oplus1)}
$$</p>
<p>不难证明</p>
<p>$$
f(i,j,0,0)=\begin{cases}
  1,&amp;(i,j)\in{(x,y):x\in\mathbb{N},y\in2[2\mid x]\mathbb{N}+1}\
  0,&amp;2\mid j\
  -1,&amp;\text{otherwise}\
\end{cases}
$$</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp lq2021-p1/G.cpp %}

&lt;/details&gt;<h2>H - 左孩子右兄弟</h2>
<h3>解题思路</h3>
<p>简单的树上 DP, 关键是读题</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp lq2021-p1/H.cpp %}

&lt;/details&gt;<h2>I - 括号序列</h2>
<h3>解题思路</h3>
<p>不妨假设只需插入右括号, 否则</p>
<ul>
<li>若只需插入左括号, 则反转序列并将左右括号互换即可</li>
<li>若需插入两种括号, 则可分解成只插入左括号和只插入右括号两种情况, 并将对应的两答案相乘即可</li>
</ul>
<p>考虑一个简化模型</p>
<p>{% note primary no-icon %}</p>
<p>求数列 ${a_i}<em>n$ 的个数, 要求 $\forall s\in[1,n]</em>\mathbb{N},\sum_{i=1}^sa_i\leqslant i$</p>
<p>解: 显然可以 $O(n^2)$ DP</p>
<p>令 $f(i,j)$ 表示 $\sum_{k=1}^ia_k=j$ 的方案数</p>
<p>状态转移方程 $f(i+1,j)=\sum_{k=0}^jf(i,j-k)$</p>
<p>{% endnote %}</p>
<p>此模型显然与该题等价</p>
<h3>代码参考</h3>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp lq2021-p1/I.cpp %}

&lt;/details&gt;<h2>J - 分果果</h2>
<h3>解题思路</h3>
<p>二分差值, 枚举最小值, 之后 DP 即可</p>
<div class="footnotes">
<hr/>
<ol><li id="fn-1"><p>带超链接的是找到了原题或原型<a class="footnote" href="#fnref-1">↩</a></p></li>
</ol>
</div>
