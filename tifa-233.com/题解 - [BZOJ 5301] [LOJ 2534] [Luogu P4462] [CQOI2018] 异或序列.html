<p>版权声明： 本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！</p>
<h2><a href="https://github.com/Tiphereth-A/Tiphereth-A.github.io/blob/master/source/_posts/luogu-p4462.md">仓库源文</a>，<a href="https://tifa-233.com/archives/luogu-p4462">站点原文</a></h2>
<hr/>
<p>title: "题解 - [BZOJ 5301] [LOJ 2534] [Luogu P4462] [CQOI2018] 异或序列"
categories:</p>
<ul>
<li>算法竞赛</li>
<li>题解
tags:</li>
<li>算法竞赛</li>
<li>题解</li>
<li>省选</li>
<li>洛谷</li>
<li>BZOJ</li>
<li>LibreOJ</li>
<li>CQOI</li>
<li>位运算</li>
<li>异或</li>
<li>莫队</li>
<li>前缀和</li>
<li>差分</li>
<li>位运算
date: 2020-01-27 15:40:12</li>
</ul>
<hr/>
<h2>题面</h2>
<ul>
<li><a href="https://www.luogu.com.cn/problem/P4462">洛谷 P4462</a></li>
<li><a href="https://vjudge.net/problem/%E9%BB%91%E6%9A%97%E7%88%86%E7%82%B8-5301/origin">BZOJ 5301</a></li>
<li><a href="https://loj.ac/problem/2534">LOJ 2534</a></li>
</ul>
&lt;!--more--&gt;

<h2>题解</h2>
<p>一句话题意: 查询区间内子区间异或和为一定值的个数</p>
<p>暴力: $O(n^3m)$ (查询:$O(m)$, 枚举子序列: $O(n^2)$, 计算异或和: $O(n)$)</p>
<p>优化:</p>
<ol>
<li><p>$\Rightarrow O(n^2m)$: 前缀和 (计算异或和: $O(n)\Rightarrow O(1)$)</p>
<p>令</p>
<p>$$
s<em>i:=\bigoplus</em>{i=1}^x a_i
$$</p>
<p>则</p>
<p>$$
\bigoplus_{i=l}^r a<em>i=s</em>{l-1}\oplus s_r
$$</p>
</li>
<li><p>$\Rightarrow O(nm)$: 莫队</p>
<ul>
<li><p>转换思路</p>
<p>注意到</p>
<p>$$
a\oplus b=c\iff a\oplus c=b
$$</p>
<p>用一个桶<code>cnt[x]</code>记录当前区间内<code>s[i]=x</code>的个数</p>
<p>则当前区间的结果为 $\displaystyle\sum<em>{i=l}^r\mathrm{cnt}</em>{s_i\oplus k}$</p>
</li>
</ul>
</li>
<li><p>$\Rightarrow O(n\min{m,\sqrt n})$: 奇偶化排序优化</p>
</li>
</ol>
<h2>代码</h2>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb cpa_cpp title:Luogu_P4462 Luogu/P4462/0.cpp %}

&lt;/details&gt;