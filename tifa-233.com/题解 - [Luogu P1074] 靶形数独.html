<p>版权声明： 本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！</p>
<h2><a href="https://github.com/Tiphereth-A/Tiphereth-A.github.io/blob/master/source/_posts/luogu-p1074.md">仓库源文</a>，<a href="https://tifa-233.com/archives/luogu-p1074">站点原文</a></h2>
<p><a href="https://www.luogu.com.cn/problem/P1074">题目链接</a></p>
&lt;!-- more --&gt;

<h2>原始题面</h2>
<p>1000 ms / 125.00 MB</p>
<h3>题目描述</h3>
<p>小城和小华都是热爱数学的好学生, 最近, 他们不约而同地迷上了数独游戏, 好胜的他们想用数独来一比高低. 但普通的数独对他们来说都过于简单了, 于是他们向 Z 博士请教, Z 博士拿出了他最近发明的“靶形数独”, 作为这两个孩子比试的题目</p>
<p>靶形数独的方格同普通数独一样, 在 $9$ 格宽且 $9$ 格高的大九宫格中有 $9$ 个 $3$ 格宽且 $3$ 格高的小九宫格（用粗黑色线隔开的）. 在这个大九宫格中, 有一些数字是已知的, 根据这些数字, 利用逻辑推理, 在其他的空格上填入 $1$ 到 $9$ 的数字. 每个数字在每个小九宫格内不能重复出现, 每个数字在每行、每列也不能重复出现. 但靶形数独有一点和普通数独不同, 即每一个方格都有一个分值, 而且如同一个靶子一样, 离中心越近则分值越高. （如图）</p>
<p><img alt="" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/tifa-233.com/source/_posts/1.webp"/></p>
<p>上图具体的分值分布是: 最里面一格（黄色区域）为 $10$ 分, 黄色区域外面的一圈（红色区域）每个格子为 $9$ 分, 再外面一圈（蓝色区域）每个格子为 $8$ 分, 蓝色区域外面一圈（棕色区域）每个格子为 $7$ 分, 最外面一圈（白色区域）每个格子为 $6$ 分, 如上图所示. 比赛的要求是: 每个人必须完成一个给定的数独（每个给定数独可能有不同的填法）, 而且要争取更高的总分数. 而这个总分数即每个方格上的分值和完成这个数独时填在相应格上的数字的乘积的总和</p>
<p>总分数即每个方格上的分值和完成这个数独时填在相应格上的数字的乘积的总和. 如图, 在以下的这个已经填完数字的靶形数独游戏中, 总分数为 $2829$. 游戏规定, 将以总分数的高低决出胜负</p>
<p><img alt="" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/tifa-233.com/source/_posts/2.webp"/></p>
<p>由于求胜心切, 小城找到了善于编程的你, 让你帮他求出, 对于给定的靶形数独, 能够得到的最高分数</p>
<h3>输入输出格式</h3>
<h4>输入格式</h4>
<p>一共 $9$ 行. 每行 $9$ 个整数（每个数都在 $0 \sim 9$ 的范围内）, 表示一个尚未填满的数独方格, 未填的空格用“$0$”表示. 每两个数字之间用一个空格隔开</p>
<h4>输出格式</h4>
<p>输出共 $1$ 行. 输出可以得到的靶形数独的最高分数. 如果这个数独无解, 则输出整数 $-1$</p>
<h3>输入输出样例</h3>
<h4>输入样例 #1</h4>
<pre><code class="lang-input1">7 0 0 9 0 0 0 0 1
1 0 0 0 0 5 9 0 0
0 0 0 2 0 0 0 8 0
0 0 5 0 2 0 0 0 3
0 0 0 0 0 0 6 4 8
4 1 3 0 0 0 0 0 0
0 0 7 0 0 2 0 9 0
2 0 1 0 6 0 8 0 4
0 8 0 5 0 4 0 1 2
</code></pre>
<h4>输出样例 #1</h4>
<pre><code class="lang-output1">2829
</code></pre>
<h4>输入样例 #2</h4>
<pre><code class="lang-input2">0 0 0 7 0 2 4 5 3
9 0 0 0 0 8 0 0 0
7 4 0 0 0 5 0 1 0
1 9 5 0 8 0 0 0 0
0 7 0 0 0 0 0 2 5
0 3 0 5 7 9 1 0 8
0 0 0 6 0 1 0 0 0
0 6 0 9 0 0 0 0 1
0 0 0 0 0 0 0 0 6
</code></pre>
<h4>输出样例 #2</h4>
<pre><code class="lang-output2">2852
</code></pre>
<h3>说明</h3>
<h4>数据规模与约定</h4>
<ul>
<li>对于 $40\%$ 的数据, 数独中非 $0$ 数的个数不少于 $30$</li>
<li>对于 $80\%$ 的数据, 数独中非 $0$ 数的个数不少于 $26$</li>
<li>对于 $100\%$ 的数据, 数独中非 $0$ 数的个数不少于 $24$</li>
</ul>
<h2>解题思路</h2>
<p>暴搜或 DLX, 这里讲 DLX 做法</p>
<p>状态这样选取:</p>
<ul>
<li>单次操作为在某行某列放某数字, 所以总的操作种数一共 $9^3=729$ 种</li>
<li>用 $4\times 9^2=324$ 维向量表示单次操作后的影响, 其中<ul>
<li>$1\sim 81$ 维表示在某位置放了数 (某位置只能放一个数)</li>
<li>$82\sim 162$ 维表示某行放了某个数 (某行只能放一个数)</li>
<li>$163\sim 243$ 维表示某列放了某个数 (某列只能放一个数)</li>
<li>$244\sim 324$ 维表示某宫放了某个数 (某宫只能放一个数)</li>
</ul>
</li>
</ul>
<h2>代码参考</h2>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb cpa_cpp title:Luogu_P1074 Luogu/P1074/0.cpp %}

&lt;/details&gt;