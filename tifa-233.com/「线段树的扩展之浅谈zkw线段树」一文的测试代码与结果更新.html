<p>版权声明： 本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！</p>
<h2><a href="https://github.com/Tiphereth-A/Tiphereth-A.github.io/blob/master/source/_posts/zkw-segment-tree-test.md">仓库源文</a>，<a href="https://tifa-233.com/archives/zkw-segment-tree-test">站点原文</a></h2>
<p>更新的原因主要是笔者觉得以前的码风很乱 QwQ</p>
&lt;!--more--&gt;

<p>测试平台:</p>
<ul>
<li><p>系统: Ubuntu 18.04 LTS 64 位</p>
</li>
<li><p>CPU: Intel(R) Core(TM) i5-9300H CPU @ 2.40GHz</p>
</li>
</ul>
<p>所有代码均使用基于<code>fread</code>和<code>fwrite</code>的快读快写模板, 并在编译时使用 C++98 标准和 O3 优化</p>
<p>结果 (单位: s):</p>
<table>
<thead><tr>
<th style="text-align:center"></th>
<th style="text-align:center">递归线段树</th>
<th style="text-align:center">zkw 线段树</th>
<th style="text-align:center">树状数组</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1e6(5 组)</td>
<td style="text-align:center">0.31803</td>
<td style="text-align:center">0.20853</td>
<td style="text-align:center">0.17850</td>
</tr>
<tr>
<td style="text-align:center">5e6(5 组)</td>
<td style="text-align:center">2.04103</td>
<td style="text-align:center">0.96225</td>
<td style="text-align:center">1.45518</td>
</tr>
<tr>
<td style="text-align:center">1e7(5 组)</td>
<td style="text-align:center">6.47973</td>
<td style="text-align:center">3.73674</td>
<td style="text-align:center">3.76717</td>
</tr>
<tr>
<td style="text-align:center">2e7(5 组)</td>
<td style="text-align:center">14.7163</td>
<td style="text-align:center">8.07310</td>
<td style="text-align:center">7.91748</td>
</tr>
</tbody>
</table>
<p>可以注意到, 正如 @<a href="https://www.luogu.com.cn/user/23398">frankchenfu</a> 在原文评论里所说, 开了 O3 优化后, zkw 线段树得到了更显著的优化, 速度与树状数组更加接近(毕竟依 zkw julao 所说, 二者理论上速度应该差不多)</p>
<p>而且笔者自认为 zkw 线段树更优美, 所以还是推荐各位学习 zkw 线段树 QwQ</p>
<p>测试代码:</p>
<ol>
<li><p>递归线段树:</p>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp zkw-segment-tree-test/seg-r.cpp %}

&lt;/details&gt;</li>
<li><p>zkw 线段树:</p>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp zkw-segment-tree-test/seg-zkw.cpp %}

&lt;/details&gt;</li>
<li><p>树状数组:</p>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp zkw-segment-tree-test/bit.cpp %}

&lt;/details&gt;</li>
<li><p>数据生成器:</p>
&lt;details open&gt;
&lt;summary&gt;&lt;font color='orange'&gt;Show code&lt;/font&gt;&lt;/summary&gt;

{% icodeweb blog lang:cpp zkw-segment-tree-test/data_gen.cpp %}

&lt;/details&gt;</li>
</ol>
<p>{% post_link zkw-segment-tree 回到原文 %}</p>
