<h2><a href="https://github.com/vivaxyblog/vivaxyblog.github.io/blob/master/_posts/2015-02-15-using-canvas-with-excanvas.md">仓库源文</a>，<a href="https://vivaxyblog.github.io/2015/02/15/using-canvas-with-excanvas">站点原文</a></h2>
<p>IE8 及以下的浏览器上不兼容 canvas，可以使用 <a href="https://code.google.com/p/explorercanvas/">ExplorerCanvas</a> 做兼容性的替代。</p>
<h2>兼容性检测</h2>
<pre><code class="lang-js">var canvasSupported = !!document.createElement('canvas').getContext;
</code></pre>
<h2>excanvas 的使用要求</h2>
<p>excanvas 的例子中是这样使用的：</p>
<ul>
<li><p>在 HTML 的 <code>&lt;head&gt;&lt;/head&gt;</code> 内引入所有的 JavaScript。</p>
</li>
<li><p>在 HTML 中的 <code>&lt;body&gt;</code> 的 <code>onload</code> 上绑定 canvas 绘图的初始方法。</p>
</li>
<li><p>禁用动画 <code>new Chart(ctx).Line(dataLine, {animation: false});</code>。</p>
</li>
</ul>
<p>经过测试，发现：</p>
<ul>
<li><code>canvas</code> 标签必须写在 excanvas 初始方法之后，即：canvas 必须在 excanvas 初始完成后生成。</li>
</ul>
<h2>动态添加 Canvas</h2>
<p>JavaScript 写在页面最下方的情况下，只能采用动态添加 Canvas 的方法。</p>
<p>尝试在页面原先的 Canvas 的地方移除并且再添加一个长的一模一样的 Canvas。</p>
<p>然后调用 <code>G_vmlCanvasManager.initElement(canvasNew);</code> 初始化 Canvas。</p>
<p>之后就可以正常使用 Canvas 了，包括 Canvas 中的 RGBA 颜色！</p>
<p>如果发现报错：<code>对象不支持“measureText”属性或方法</code>，那么请使用最新的 <a href="http://explorercanvas.googlecode.com/svn/trunk/excanvas.js">excanvas</a>。</p>
<h2>canvas-polyfill</h2>
<p>See on <a href="https://vivaxy.github.io/samples/javascript/canvas-polyfill/">Github</a>.</p>
<h2>参考资料</h2>
<p><a href="http://stackoverflow.com/questions/1635419/excanvas-for-dynamically-created-canvas-elements">Excanvas for dynamically created canvas elements</a></p>
<p><a href="https://github.com/nnnick/Chart.js/issues/477">Error on IE7 and IE8, Object doesn't support property or method 'measureText'</a></p>
