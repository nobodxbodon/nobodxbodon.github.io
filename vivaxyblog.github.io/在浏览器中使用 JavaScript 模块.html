<h2>原文：<a href="https://vivaxyblog.github.io/2017-09-25-javascript-module-in-browser.html">在浏览器中使用 JavaScript 模块</a></h2>
<hr/>
<h2>layout: post
title: 在浏览器中使用 JavaScript 模块
tags: [javascript]</h2>
<h2>背景</h2>
<p>Chrome 61 支持了在浏览器中使用 ES6 模块。<a href="http://caniuse.com/#search=module">Safari 10.1 上半年也已经支持了</a>。</p>
<h2>用法</h2>
<pre><code class="language-html">&lt;script type="module" src="module-entry.js"&gt;&lt;/script&gt;
&lt;script nomodule type="text/javascript" src="nomodule.js"&gt;&lt;/script&gt;
</code></pre>
<p>支持 ES6 模块的浏览器会根据 <code>&lt;script&gt;</code> 标签上的 <code>type="module"</code> 来加载 ES6 模块；而忽略带有 <code>nomodule</code> 的 <code>&lt;script&gt;</code> 标签。不支持的浏览器则会忽略 <code>type="module"</code> 的 <code>&lt;script&gt;</code> 标签，忽略 <code>&lt;script&gt;</code> 标签上的 <code>nomodule</code> 的属性。</p>
<p>使用浏览器原生对 ES6 模块的支持特性，可以享受模块级别的缓存这一优势。</p>
<p>在模块中引入其他模块时，需要添加 <code>.js</code> 后缀。模块中可以使用 <code>export</code> 和 <code>import</code> 关键字。</p>
<pre><code class="language-js">// module-entry.js
// `.js` is required.
import name from './base.js';
console.log(name);
</code></pre>
<pre><code class="language-js">// base.js
export default 'base';
export const count = 1;
</code></pre>
<p>查看<a href="https://vivaxy.github.io/samples/native-api/script-type-module/">例子</a>。</p>
<p>可见规范的落实对前端发展有这举足轻重的作用。在前端现有能力范畴内，我们做了再多的优化，能做到的比起在浏览器和操作系统的改动带来的优化也要小很多。因此，作为前端开发只关注现有 API 和框架的话，能做的就很少了。</p>
<p>前端主要关注两点：用户体验和研发效率。其他所有问题都可以被归到以上两个问题的范畴内。兼容性是由不同的客户端导致的，客户端的升级是为了提升用户体验。真正能够提升用户体验和研发效率的是增加新的特性。</p>
<h2>参考资料</h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=GWmO88hBbKY">ES6 Modules: Micro Tip #15 - Supercharged</a></li>
<li><a href="https://philipwalton.com/articles/deploying-es2015-code-in-production-today/">Deploying ES2015+ Code in Production Today</a></li>
</ul>
