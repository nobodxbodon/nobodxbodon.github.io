<h2>原文：<a href="https://hijiangtao.github.io/2019/02/24/Learn-Spatio-Temporal-Data-Visualization-with-glmaps-from-Scratch">从零开始学习时空数据可视化（序）</a></h2>
<hr/>
<p>title: 从零开始学习时空数据可视化（序）
layout: post
thread: 214
date: 2019-02-24
author: Joe Jiang
categories: Document
tags: [2019, WebGL, 可视化, three.js, deck.gl, 教程]
excerpt: glmaps 是一个包含多个时空数据可视化示例代码集与学习教程的开源项目。该项目中的可视化效果基于可视化库 three.js 与 deck.gl 实现，非常容易上手，希望本项目对正在时空可视化学习之路上探寻的你有所帮助。</p>
<hr/>
<p>前言：没有什么特殊的原因、也不是要靠这个赚钱（毕竟是免费的），只是在以往的学习过程中非常感谢很多开发者的无私奉献，包括代码、问题解答以及文章，于是自己也萌生了类似的念头，希望在记录自己学习收获的同时，也能帮到一些朋友吧。</p>
<p>本文结构安排如下：</p>
<ul>
<li>0 / 为什么会有这个系列</li>
<li>1 / 学习指北</li>
<li>2 / 效果演示</li>
<li>3 / 可视化示例</li>
<li>4 / 可视化教程</li>
<li>5 / 自问自答</li>
<li>6 / 几则故事</li>
</ul>
<h2>0 / 为什么会有这个系列</h2>
<p>我经常被问到「我很喜欢数据可视化，我该如何入门呢？」，我曾在问题「<a href="https://www.zhihu.com/question/267808191/answer/329205003">国内有哪些成熟的做前端数据可视化的团队，做工程的前端加入需要补充什么知识</a>」以及「<a href="https://www.zhihu.com/question/279234059/answer/405490525">数据可视化工程师未来的路在何方</a>」说过我自己的一些小感受，但发现这些似乎不能解决所有疑惑。</p>
<p>你可能因为诸如「相机与可视区是什么，坐标世界如何转换」等问题而止步向前，即便 three.js 已经在 WebGL 上友好的封装了一层 API。事实如此，当你对图形学领域一些基本概念还没了解，你在入门时一定会遇到不少疑惑。究其原因，其实每个人精力有限。虽然基于 Web 的图形绘制接口依旧是 SVG 与 canvas，但其背后的标准仍在稳步向前。WebGL (OpenGL ES) 作为一个光栅化引擎，本质只包含两类着色器，但背后仍蕴藏如此多的内容。</p>
<p>如果你是一名数据可视化爱好者，但苦于没有相关基础，那么「从零开始学习时空数据可视化」这个系列便是完全为你准备的，让我们开始吧。</p>
<p><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/glmaps.png"/></p>
<h2>1 / 学习指北</h2>
<p>先说一句，这个系列是免费的。希望在帮助大家的同时，我们相互学习。</p>
<p>我为从零开始学习时空数据可视化系列创建了一个 GitHub 仓库，所有相关代码、文档以及教程都会放在一起，我给他取名叫 glmaps。如果你觉得值得关注可以点个 <strong>watch</strong> 接受邮件订阅提醒，如果从中有所收获也欢迎点个 <strong>star</strong> 鼓励一下。</p>
<p><img alt="" src="/media/wwww/share/study/聚聚/源数据/博客聚合/hijiangtao.github.io/assets/in-post/2019-02-24-Learn-Spatio-Temporal-Data-Visualization-with-glmaps-from-Scratch-1.png"/></p>
<ul>
<li>项目地址 <a href="https://github.com/hijiangtao/glmaps">GitHub</a></li>
<li>中文说明 <a href="https://github.com/hijiangtao/glmaps/blob/master/CN.md">README</a></li>
</ul>
<p>简单来说，<code>glmaps</code> 是一个包含多个时空数据可视化示例代码集与学习教程的开源项目。该项目中的可视化效果基于可视化库 <code>three.js</code> 与 <code>deck.gl</code> 实现，非常容易上手，希望本项目对正在时空可视化学习之路上探寻的你有所帮助。</p>
<p>希望通过 <code>glmaps</code> 的系列示例与教程，可以让你在使用 three.js 与 deck.gl 时能更加自信地创作出更好的可视化作品。</p>
<h2>2 / 效果演示</h2>
<p>废话不多说，我录制了一段短视频用于展现 <code>glmaps</code> 的可视化效果，你可以在 <a href="https://youtu.be/dddmamIAYj8">YouTube</a> 或者<a href="https://v.qq.com/x/page/x0841840qwl.html">腾讯视频</a>查看。</p>
<p>腾讯视频对画质压缩的非常严重，建议查看时打开超清模式，否则极有可能出现「两米开外，人畜不分」的马赛克效果。</p>
<h2>3 / 可视化示例</h2>
<p><code>glmaps</code> 现包含有如下几种可视化形式，更多案例正在丰富中。其中 <code>2.5D</code> 意指在2D地图上绘制2D或者3D的物体，<code>3D</code> 意指完全在三维空间中实现时空数据的可视化效果。</p>
<p>|类型|描述|效果|支持动画|支持聚类|
|---|---|---|---|---|
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/globe/index.js">3D / Curve</a>|THREE.BufferGeometry()| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/globe/index.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/Globe-Curve.jpeg"/></a> | Yes | No |
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/globe/index.js">3D / Mover</a>|THREE.SphereGeometry()| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/globe/index.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/Globe-Point.jpeg"/></a> | Yes | No |
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/globe/index.js">3D / Cube</a>|THREE.BoxGeometry()| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/globe/index.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/Globe-Cube.jpeg"/></a> | No | No |
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/IconLayer/index.js">2.5D / Icon</a>|No modification from deck| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/IconLayer/index.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/IconLayer.jpeg"/></a> | No | Yes |
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/ArcLayer/animate.js">2.5D / Brush</a>|Support OD Arc Animation| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/ArcLayer/animate.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/BrushArcLayer.jpeg"/></a> | Yes | No |
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/ScatterplotLayer/index.js">2.5D / Scatter</a>|Support Fade-out Animation| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/ScatterplotLayer/index.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/ScatterplotLayer.jpeg"/></a> | Yes | No |
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/HexagonLayer/index.js">2.5D / Hexagon</a>|Support Coverage Filter Conditions| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/HexagonLayer/index.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/HexagonLayer.jpeg"/></a> | Yes | Yes |
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/ScreenGridLayer/index.js">2.5D / Grid</a>|Support Coverage Filter Conditions| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/ScreenGridLayer/index.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/ScreenGridLayer.jpeg"/></a> | No | Yes |
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/TripLayer/index.js">2.5D / Trip</a>|No modification from deck| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/layers/TripLayer/index.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/TripLayer.jpeg"/></a> | Yes | No |
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/globe/index.js">Other / Segment</a>|The same as curve animation| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/globe/index.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/Globe-CurveSegment.jpeg"/></a> | Yes | No |
|<a href="https://github.com/hijiangtao/glmaps/blob/master/src/globe/index.js">Other / Moon</a>|Earth-Moon System| <a href="https://github.com/hijiangtao/glmaps/blob/master/src/globe/index.js"><img alt="" src="https://github.com/hijiangtao/glmaps/raw/master/assets/screenshots/Globe-Moon.jpeg"/></a> | Yes | No |</p>
<h2>4 / 可视化教程</h2>
<p>暂定八篇系列教程，如有需要可以提 <a href="(https://github.com/hijiangtao/glmaps/issues/new">issue</a>) 讨论。</p>
<ul>
<li>从零开始学习时空可视化（零） / <a href="https://hijiangtao.github.io/2019/04/03/Learn-Spatio-Temporal-Data-Visualization-with-glmaps-from-Scratch-One/">three.js 简介与示例教学</a> - <a href="https://hijiangtao.github.io/glmaps/tutorials/example_three_geometry_hierarchy.html">Demo</a></li>
<li>从零开始学习时空可视化（一） / deck.gl 入门笔记 - TBD</li>
<li>从零开始学习时空可视化（二） / 用 React 框架管理你的 three.js 项目 - TBD</li>
<li>从零开始学习时空可视化（三） / 用 three.js 画出你的第一个地球 - TBD</li>
<li>从零开始学习时空可视化（四） / 深入浅出 three.js 点、线、面、体的实现过程 - TBD</li>
<li>从零开始学习时空可视化（五） / 利用 props 与 transitions 让你的 deck.gl 图层动起来 - TBD</li>
<li>从零开始学习时空可视化（六） / 手写 shader 给你的 deck.gl 动画另辟蹊径 - TBD</li>
<li>从零开始学习时空可视化（七） / 使用 three.js 和 deck.gl 开发的踩坑记录 - TBD</li>
</ul>
<p>在完成这些学习后，你将可以独立实现如上列出的几种可视化形式作品，而个人认为这些形式已经大致包含了基本的时空可视化类型。</p>
<h2>5 / 自问自答</h2>
<p>首先感谢你对 <code>glmaps</code> 项目的关注。在你进一步阅读本项目之前，想对你说的一些话。</p>
<p><strong>Q1: 除了列出的可视化框架，<code>glmaps</code> 项目还用到了哪些 Web 技术?</strong></p>
<p>从 16.8.0 开始，<strong>Hooks</strong> 便正式登陆 React，<code>glmaps</code> 在开发过程中也从中受益很多。如果你还不了解 React Hooks，建议先查看 <a href="https://reactjs.org/docs/hooks-intro.html">Introducing Hooks</a> 了解大概，因为 <code>glmaps</code> 在多处使用到了各类 Hooks。另一方面，由于 deck.gl 利用了 <strong>WebGL2</strong> 特性进行可视化绘制，所以在查看 demo 前请确保你的浏览器支持这项技术。你可以通过 <a href="http://get.webgl.org/">http://get.webgl.org/</a> 或者 <a href="https://get.webgl.org/webgl2/">https://get.webgl.org/webgl2/</a> 网站来查看你的浏览器对 WebGL(2) 的支持情况。</p>
<p><img alt="" src="/media/wwww/share/study/聚聚/源数据/博客聚合/hijiangtao.github.io/assets/in-post/2019-02-24-Learn-Spatio-Temporal-Data-Visualization-with-glmaps-from-Scratch-2.png"/></p>
<p>除此外，由于 <code>glmaps</code> 未采用类似 create-react-app 这样成熟的脚手架进行搭建，而是我按需在构建流程上对 webpack 及 Babel 中的功能进行组合，因此在打包构建方面一定还存在诸多需要继续完善的地方。若你在本地运行 Demo 时遇到任何报错，我相信这都可能是 <code>glmaps</code> 本身的问题，而非你的问题，欢迎通过 <a href="https://github.com/hijiangtao/glmaps/issues/new">issues</a> 和我交流讨论。</p>
<p><strong>Q2: 可视化初学者该如何利用这个项目学习？</strong></p>
<p>我比较建议你采用如下顺序配合 <code>glmaps</code> 进行学习：</p>
<ul>
<li>先学习如何在你的项目中引入 three.js 以及 deck.gl，了解基本的使用、项目创建，这部分内容直接在 three.js 与 deck.gl 官网便可找到。尝试根据教程，试试画出你的第一个图形；</li>
<li>大概扫一下这两个框架的主 API 都有哪些，并试试下些官方 demo 在本地运行，感受下这些框架在实现可视化上的巨大能力；</li>
<li>跟着「从零开始学习时空数据可视化系列」教程一步步把 glmaps 中涉及到的可视化案例都实现一遍；如果你对 three.js 与 deck.gl 有过一定的尝试，你也可以直接参考我在 <code>src</code> 文件夹中抽象出的代码；</li>
<li>（可选）尝试通过 <code>npm install glmaps --save</code> 在你的 demo 中引入 glmaps 进行展现；</li>
<li>按照你的理解重写 <code>glmaps</code> 示例代码，并为他添加更多特性；</li>
<li>恭喜你已经成功入门基本的时空数据可视化编程！你现在可以更加深入地了解 three.js 或者 deck.gl，并更加自信地创作出更好的可视化作品。</li>
</ul>
<p><strong>Q3: 如何参与到 <code>glmaps</code> 项目中来？</strong></p>
<p><code>glmaps</code> is still at the very beginning period of my thoughts, you are welcome to oepn ISSUE, PR or email me, if you have any ideas on how to make <code>glmaps</code> better for visualization beginners:</p>
<ul>
<li>Participate in implementing tutorials together;</li>
<li>Contribute codes to <code>glmaps</code> with <a href="https://github.com/hijiangtao/glmaps/pulls">PR</a> (such as imporve <code>mover</code> animation in <code>Globe</code>);</li>
<li>Speak out your doubts in learning data visualization with <a href="https://github.com/hijiangtao/glmaps/issues/new">issues</a>;</li>
<li>Tell me your advice on how to make <code>glmaps</code> better with <a href="https://github.com/hijiangtao/glmaps/issues/new">issues</a>;</li>
<li>Other aspects not included yet.</li>
</ul>
<h2>6 / 几则故事</h2>
<p><strong>故事一</strong></p>
<p>前两天云舒在朋友圈的动态突然成了热点新闻，其中我非常赞同第一句的后半句「特地写出来大家看到，省得我改变心意」，<code>glmaps</code> 也是在这种环境下诞生的。</p>
<p>不要误解，我不离婚，我只是想说即便 <code>glmaps</code> 还处于初期阶段，我仍决定现在把它分享出来。起初，这个想法诞生于两个多月前，我曾在问题「<a href="https://www.zhihu.com/question/303354718/answer/558177026">作为前端工程师的你在深入研究哪些领域？</a>」中说到新的一年要多搞搞数据可视化，但由于工作忙碌与天生懒惰，于是一直在给自己找往后拖延的借口。</p>
<p>现在把它分享出来，一方面是代码层面在基本功能上已完善，另一方面是想通过公开来鞭策自己按时完成剩余文章的编写，即「自我催更」。</p>
<p><strong>故事二</strong></p>
<p>在为 glmaps 制作视频与截图时，发现 Globe Curve 还有点像流浪地球，如果把贝塞尔曲线换成直线，再在分布上改一改就更像了。</p>
<p><strong>故事三</strong></p>
<p>由于平时还有工作要完成，所以如何分配时间呢？我觉得忙是件好事，一定程度上可以刺激你提高自我时间管理能力，所以我会利用好晚上及周末的时间来逐步完善这个项目，step by step。</p>
<p>另外，由于各种原因我也很久没尝试过 three.js 了，所以怎么说呢，还是那句话：希望在帮助大家的同时，我们相互学习。欢迎更有经验的同学多多指教！</p>
<p>更多本文未提到的内容欢迎移步 <a href="https://github.com/hijiangtao/glmaps">GitHub</a> 啦！</p>
<p><img alt="" src="/media/wwww/share/study/聚聚/源数据/博客聚合/hijiangtao.github.io/assets/in-post/2019-02-24-Learn-Spatio-Temporal-Data-Visualization-with-glmaps-from-Scratch-3.png"/></p>
