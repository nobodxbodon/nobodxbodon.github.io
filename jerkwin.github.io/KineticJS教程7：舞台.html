<h2><a href="https://github.com/jerkwin/jerkwin.github.io//blob/master/_posts/2015-06-11-KineticJS教程7：舞台.md">仓库源文</a>，<a href="https://jerkwin.github.io/2015/06/11/KineticJS教程7：舞台">站点原文</a></h2>
<hr/>
<p>layout: post
 title: KineticJS教程7：舞台
 categories:</p>
<ul>
<li>科
tags:</li>
<li>编程</li>
<li>js</li>
</ul>
<hr/>
<h2>2015-06-11 08:27:22</h2>
<h2>12. 舞台</h2>
<h2>12.1. 舞台的大小</h2>
<p>舞台创建后还可以用舞台对象的<code>setSize(width, height)</code>方法来设置舞台的宽度与高度.</p>
&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&lt;script&gt;
    stage.setSize(300, 100);
&lt;/script&gt;
&lt;/code&gt;&lt;/pre&gt;<h2>12.2. 舞台的缩放</h2>
<p>舞台创建后还可以用舞台对象的<code>setScale()</code>方法来对舞台进行缩放. <code>setScale</code>方法可以接受一个参数, 也可以接受两个参数, 一个参数是指的横向与纵向均以相同比例缩放, 两个参数则是分别设定横向与纵向的缩放比例. 参数是不小于0的浮点数, 表示缩放的比例, 小于1表示缩小, 大于1表示放大. 另外, 缩放是以舞台的左上角为基点的.</p>
&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&lt;script&gt;
    // 横纵方向等比例缩放
    stage.setScale(scale);

    // 分别制定横纵方向上的缩放比例
    stage.setScale(scaleX, scaleY);
&lt;/script&gt;
&lt;/code&gt;&lt;/pre&gt;<h2>12.3. 获取数据URL</h2>
<p><code>Kinetic</code>为舞台对象提供了一个<code>toDataURL</code>方法, 可以让用户获得舞台的数据URL信息. <code>toDataURL</code>接受一个方法对象, 这个方法至少接受一个参数<code>dataURL</code>保存的既是数据URL. 除了这个<code>dataURL</code>参数外, 还接受两个参数, 一个是<code>mimeType</code>, 保存的是数据URL指向数据的<code>mime</code>文件格式, 另一个参数是<code>quality</code>, 是一个0到1的浮点数, 保存的是数据的质量.</p>
<p>用户就可以在这个方法里对数据URL进行处理了.</p>
&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&lt;script&gt;
    stage.toDataURL(function(dataUrl, mimeType, quality){
        // 在这里对dataUrl,  mimeType,  quality 信息进行处理
    });
&lt;/script&gt;
&lt;/code&gt;&lt;/pre&gt;<h2>12.4. 将舞台保存成JSON数据</h2>
<p>将舞台数据保存成JSON数据只需要执行舞台对象的<code>toJSON</code>方法即可.</p>
&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&lt;script&gt;
    var json = stage.toJSON();
&lt;/script&gt;
&lt;/code&gt;&lt;/pre&gt;<h2>12.5. 把JSON数据加载回舞台</h2>
<p>将舞台数据保存成JSON数据只需要执行舞台对象的<code>load</code>方法即可.</p>
&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&lt;script&gt;
    // 创建舞台对象
    var stage = new Kinetic.Stage({
        container: "container",
        width: 600,
        height: 400
    });

    // 加载舞台
    stage.load(json);
&lt;/script&gt;
&lt;/code&gt;&lt;/pre&gt;<p>这个地方要注意, 对于事件处理和图像, 是不能被序列化成JSON的, 需要在加载JSON数据后在加载图像并设定这些事件处理方法.</p>
