<h2><a href="https://github.com/jerkwin/jerkwin.github.io//blob/master/_posts/2015-06-11-KineticJS教程1：基本结构与示例.md">仓库源文</a>，<a href="https://jerkwin.github.io/2015/06/11/KineticJS教程1：基本结构与示例">站点原文</a></h2>
<hr/>
<p>layout: post
 title: KineticJS教程1：基本结构与示例
 categories:</p>
<ul>
<li>科
tags:</li>
<li>编程</li>
<li>js</li>
</ul>
<hr/>
&lt;script src="/jscss/kinetic.min.js"&gt;&lt;/script&gt;<h2>2015-06-11 08:27:22</h2>
<ul>
<li>来源: <a href="http://iysm.net/?p=367">肆零玖陆</a></li>
<li>对一些代码进行了修改以适用于最新版本的<code>KineticJS</code></li>
</ul>
<h2>1. 基本结构</h2>
<p><code>KineticJS</code>首先是要绑定到<code>HTML</code>页面上的一个<code>DOM</code>容器元素上, 比如最常用的<code>&lt;div&gt;</code>标签. <code>KineticJS</code>在此容器中创建一个称之为舞台(<code>stage</code>)的结构, 这个舞台由一个不可见的后台层和一个不可见的缓冲层组成, 提供了高性能的路径和像素检测能力. 舞台上再包含若干(至少一层)用户层(<code>layer</code>), 每个层上又包含有若干<code>canvas</code>元素, 比如各种图形, 图像, 元素组(组可以包含其他的图形和其他的组)等. 用户还可以给这些层上的图形, 元素组, 层本身以及舞台本身添加事件监听方法, 以响应鼠标, 键盘等事件. 浏览器最终显示的就是这些用户层的叠加效果.</p>
<p><img alt="原始图像来源: http://www.kineticjs.com/how-it-works.php" src="https://jerkwin.github.io/pic/KinJS_1.jpg"/></p>
<h2>2. 第一个画面</h2>
<p>现在我们开始用<code>Kinetic</code>制作我们的第一个画面.</p>
<p><code>Kinetic</code>绘图的基本的流程可以如下图所示:</p>
<p><img alt="" src="https://jerkwin.github.io/pic/KinJS_2.png"/></p>
<p>首先是创建一个<code>HTML5</code>页面, 在<code>&lt;head&gt;</code>里添加对<code>Kinetic</code>库的引用:</p>
<p><code>&lt;script src="kinetic.js"&gt;&lt;/script&gt;</code></p>
<p>在<code>&lt;body&gt;</code>中添加一个用于绑定到<code>Kinetic</code>用于创建舞台的容器, 比如说可以是个<code>&lt;div&gt;</code>:</p>
<p><code>&lt;div id="container"&gt;&lt;/div&gt;</code></p>
<p>我们的<code>Kinetic</code>图像就将在这个容器中完成绘制.</p>
<p>在本例中, 我们打算创建一个600×400的舞台, 并在中心位置画一个红色矩形框.</p>
<p>同样是在<code>&lt;head&gt;</code>中添加脚本:</p>
&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&lt;script&gt;
    //在页面加载时进行绘图
    window.onload = function() {

        //创建Kinetic舞台, 绑定我们添加的&lt;div&gt;容器
        var stage = new Kinetic.Stage({
            container: "container", //&lt;div&gt;的id
            width: 600, //创建的舞台宽度
            height: 400 //创建的舞台高度
        });

        //创建Kinetic用户层
        var layer = new Kinetic.Layer();

        //创建一个Kinetic矩形对象
        var rect = new Kinetic.Rect({
            x: 200, //矩形左上角x坐标
            y: 150, //矩形左上角y坐标
            width: 200, //矩形的宽度
            height: 100, //矩形的高度
            fill: "red", //矩形的填充色
            stroke: "black", //矩形边缘线的颜色
            strokeWidth: 4 //矩形边缘线的宽度
        });

        //向用户层中添加上面的矩形
        layer.add(rect);

        //将上面的用户层添加到舞台上
        stage.add(layer);
    };
&lt;/script&gt;
&lt;/code&gt;&lt;/pre&gt;<p>用浏览器打开页面就能看到如下的图像了:</p>
<p>&lt;div id="ctn_2" style="border:solid 2px #CCC;"&gt;&lt;/div&gt;</p>
&lt;script&gt;
    var stage = new Kinetic.Stage({
        container: "ctn_2",
        width: 600, height: 400
    });

    var layer = new Kinetic.Layer();
    var rect = new Kinetic.Rect({
        x: 200, y: 150,
        width: 200, height: 100,
        fill: "red", stroke: "black",
        strokeWidth: 4
    });

    layer.add(rect);
    stage.add(layer);
&lt;/script&gt;