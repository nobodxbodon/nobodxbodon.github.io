<h2>原文：<a href="https://jerkwin.github.io/2015/01/13/我使用的markdown工具">我使用的markdown工具</a></h2>
<hr/>
<p>layout: post
 title: 我使用的markdown工具
 categories:</p>
<ul>
<li>科
tags:</li>
<li>markdown</li>
</ul>
<hr/>
<h2>2015-01-13 11:30:42</h2>
<p>我在几篇博文中都介绍了markdown, 自己使用它来做工作记录也已经有一段时间了.
现在就将我所用到的工具介绍一下, 供需要的人参考.</p>
<h3>markdown基础</h3>
<p>可参考我以前的几篇<a href="http://jerkwin.github.io/tags/#markdown">博文</a>.</p>
<h3>markdown使用流程</h3>
<p>我使用的流程如下:</p>
<p><img alt="Fig. 1" src="https://jerkwin.github.io/pic/MD-FLC.png"/></p>
<p>使用时, 需要编辑文本文件<code>File.md</code>(文件名只能使用英文字符), 因此需要一个文本编辑器. 我使用的是<a href="https://zh-cn.emeditor.com/">EmEditor</a>, 
它的优点很多, 和markdown相关的主要有以下几个:</p>
<ul>
<li>中文支持好</li>
<li>支持列操作</li>
<li>大文件读取速度快</li>
<li>支持markdown语法高亮</li>
<li>支持大纲视图, 处理长文档很方便</li>
<li>插件众多, 能满足绝大部分需求</li>
<li>可自定义与文件关联的外部命令</li>
<li>有专门的HTML工具栏, 插入HTML代码十分方便</li>
</ul>
<p>由于我对markdown的功能进行了很多扩展, 所以编辑完文件<code>File.md</code>之后, 需要利用脚本MDawk对<code>File.md</code>进行处理,
生成makrdown格式的中间文件<code>File_git.md</code>. MDawk脚本是基于bash开发的, 所以使用时需要系统中安装有bash运行环境.</p>
<p>得到中间文件<code>File_git.md</code>后, 就可以利用MultiMarkdown程序将其转换为HTML文件<code>File.html</code>进行查看了.
建议使用谷歌的Chrome浏览器进行查看, 因为它的浏览速度快, 而且对HTML和JavaScript的支持比较好.
此外, Chrome支持直接查看pdf文件, 还支持将HTML文件直接打印成pdf文件. 这样如果你可以很方便地将markdown文件转换为pdf文件.
当然, 大多数时候我们都不需要将markdown文本保存为pdf文件.</p>
<p>虽然上面的整个流程看起来比较复杂, 手动做起来也稍嫌麻烦, 但我们可以将操作过程写在一个批处理文件<code>MMD.bat</code>中,
并利用EmEditor的自定义外部命令功能实现一键运行<code>MMD.bat</code>并查看HTML文件. 这和编程中常见的一键编译运行差不多, 使用起来很方便.</p>
<h3>markdown扩展功能</h3>
<p>markdown只是一种文本格式的名称, 写出来的文本相当于程序的源代码. 如果想看到更好的效果, 或是让它支持更强大的功能, 
你可以自己写代码对文本进行处理. 我自己在使用过程中就写了一些脚本扩展markdown的功能, 以满足自己的需要.
这些扩展是通过<code>MDawk</code>脚本和一些JavaScript脚本完成的. 主要的扩展功能如下:</p>
<ul>
<li>功能更强大的表格</li>
<li>幻灯片式的图片浏览</li>
<li>各级标题的文档目录</li>
<li>基于<a href="http://prismjs.com/">Prism</a>的代码高亮</li>
<li>基于<a href="http://www.mathjax.org/">MathJax</a>的LaTex数学公式</li>
<li>基于<a href="http://www.gnuplot.info/">gnuplot</a>的数据作图</li>
<li>基于<a href="http://ditaa.sourceforge.net/">ditaa</a>的ASCII图片</li>
<li>基于<a href="http://adrai.github.io/flowchart.js/">flowchart.js</a>的流程图</li>
<li>基于<a href="http://www.chemdoodle.com/">ChemDoole</a>的三维分子构型及动画</li>
<li>基于<a href="http://paulrouget.com/dzslides/">DZslide</a>的网页幻灯片</li>
</ul>
<h3>程序下载及设置</h3>
<ul>
<li><strong>markdown处理脚本(必需)</strong></li>
</ul>
<p>点击<a href="/MD/Markdown.zip">这里</a>下载与markdown相关的脚本和程序, 还有测试文档.</p>
<p>解压后, 编辑主文件夹下的<code>MMD.bat</code>文件, 将下面这几行的路径改为相应的安装路径(注意路径中不能含有空格或中文, 并将路径中的反斜线<code>\</code>改为斜线<code>/</code>)</p>
<pre><code>set Pmark="markdown文件夹的路径"
set Pmath="MathJax文件夹的路径"
set MDawk="MDawk文件的路径"
set Gpth="gnuplot.exe文件的路径"
set Gini="gpl.ini文件的路径"
</code></pre>
<ul>
<li><strong>文本编辑器EmEditor(必需)</strong></li>
</ul>
<p>可以直接到<a href="https://zh-cn.emeditor.com/">EmEditor官网</a>或网上的其他地方下载, 但下载后需要自己配置, 稍嫌麻烦. 
更简单的是直接在<a href="/MD/EmEditor.zip">这里</a>下载我已经打包的好的EmEditor程序, 版本为11.0.5, 稍微有点老, 但不影响使用.
此外, 我还在其中打包了许多常用的插件和一份配置文件.</p>
<p>下载后, 直接解压, 双击主文件夹下的<code>!EmE.reg</code>导入设置.</p>
<p>为了利用<code>MMD.bat</code>直接将文件编译成HTML, 你还需要在EmEditor中指定<code>MMD.bat</code>的路径. 依次点击</p>
<p><code>工具 --&gt; 外部工具 --&gt; 自定义工具 --&gt; Markdown --&gt; 属性</code></p>
<p>在<code>外部工具的属性</code>选项卡下的<code>命令</code>中指定<code>MMD.bat</code>文件的位置.</p>
<ul>
<li><strong>bash环境mBash(必需)</strong></li>
</ul>
<p>运行<code>MDawk</code>脚本需要bash环境, 如果你已经安装了bash运行环境(CygWin或MinGW), 就不需要再安装了.</p>
<p>如果你还没有安装bash环境, 那么你可以在<a href="/MD/mBash.zip">这里</a>下载我已经打包好的一个非常小的bash运行环境mBash.
它是基于CygWin 2.0制作的, 只包含了最常用的一些工具.</p>
<p>为了能在命令行中使用bash工具, 你需要将CygWin的bin目录(如果你使用CygWin), 或mBash目录(如果你使用我打包的mBash)添加到环境变量path中去.
具体的方法可参考善用佳软的介绍<a href="http://xbeta.info/win-run.htm">最绿色最高效，用win+r启动常用程序和文档</a>.</p>
<ul>
<li><strong>网页浏览器Chrome(可选)</strong></li>
</ul>
<p>建议使用谷歌的Chrome浏览器查看HTML文件, 它速度快, 兼容性好, 而且支持阅读和输出pdf文件. 当然你也可以使用你喜欢的浏览器.</p>
<ul>
<li><strong>Java运行环境(可选)</strong></li>
</ul>
<p>如果你希望使用ditaa程序将ASCII图转换为png图片, 那你需要安装Java运行环境. 
如果你还没有安装Java, 直接到<a href="https://java.com/en/download/">Java官网</a>下载安装即可.</p>
<ul>
<li><strong>LaTex数学公式支持MathJax(可选)</strong></li>
</ul>
<p>如果你像我一样, 经常需要在文档中插入LaTex数学公式, 那么你可以安装使用MathJax. 它可以将网页中的LaTex代码转换为漂亮的数学公式.</p>
<p>你可以到<a href="http://docs.mathjax.org/en/latest/installation.html">MathJax官网</a>下载并安装, 或直接点击<a href="/MD/MathJax.zip">这里</a>下载我已经打包好的2.4版本, 下载后直接解压就可以使用了.</p>
<ul>
<li><strong>数据作图gnuplot(可选)</strong></li>
</ul>
<p>如果你想在文档中插入gnuplot代码, 并希望能自动绘图, 那你需要安装gnuplot.</p>
<p>你可以到<a href="http://www.gnuplot.info/">gnuplot官网</a>下载并安装, 或是直接点击<a href="/MD/gnuplot.zip">这里</a>下载我已经打包好的5.0版本的gnuplot, 下载后直接解压就可以使用了.</p>
<p>如果你使用我打包的gnuplot, 解压后你会发现主目录下会有下面几个文件:</p>
<ol>
<li><code>gpl.ini</code>: 我最常用的gnuplot设置, 作图效果比默认的美观</li>
<li><code>HelveticaNeueLTPro-Hv.otf</code>: 一种Helvitica字体, 安装后即可使用, 标注效果更漂亮</li>
<li><code>SymbolPi-Normal.ttf</code>: 一种用于希腊字母的字体, 用于在gnuplot标注中使用希腊字母. 如果Windows系统默认的Symbol字体在你的系统上无法使用, 你可以使用这个字体.</li>
<li><code>moreland.pal</code>: 一种颜色映射图的调色板文件, 效果比常用的彩虹调色板更好</li>
</ol>
<h3>使用简介</h3>
<p>将上面的程序下载并设置好以后, 使用EmEditor打开Markdown目录下的<code>_PaperTest.md</code>文件, 
你应该看到类似下面的效果</p>
<p><img alt="" src="https://jerkwin.github.io/pic/MD-EmE.png"/></p>
<p>依次点击<code>工具--&gt;外部工具--&gt;Markdown</code> 或直接<code>Ctrl+F5</code>, 即可运行<code>MMD.bat</code>将文档编译成HTML文件.
如果运行正常, 完成后会出现如下的CMD窗口</p>
<p><img alt="" src="https://jerkwin.github.io/pic/MD-CMD.png"/></p>
<p>直接回车即可看到编译好的HTML文件. 其效果应该类似下面的网页</p>
<p><a href="/MD/PaperTest.html">PaperTest网页</a></p>
<p>以同样的方式运行<code>_SlideTest.md</code>, 你应该得到一个可以播放的网页幻灯片, 其效果类似下面的网页</p>
<p><a href="/MD/SlideTest.html">SlideTest网页</a></p>
<h3>进阶使用</h3>
<p>如果你对那些扩展功能很感兴趣, 建议你仔细看看测试文件<code>_PaperTest.md</code>和<code>_SlideTest.md</code>.
如果你想自己增加一些扩展功能, 你可以参考<code>MDawk</code>脚本.
如果遇到困难或是有什么疑问可以联系我.</p>
<p>欢迎大家试用并给出反馈.</p>
<h3>附记</h3>
<p>像我在以前的<a href="http://jerkwin.github.io/2014/08/15/markdown%E5%9C%A8%E8%AE%A1%E7%AE%97%E5%8C%96%E5%AD%A6%E9%A2%86%E5%9F%9F%E7%9A%84%E6%89%A9%E5%B1%95%E5%BA%94%E7%94%A8/">博文</a>中所说, 这种代码和文档放在一起的做法, 越来越为大家认可.
很多程序都支持这种做法. 目前使用较多主要有两个,
一个是基于R的<a href="http://www.yangzhiping.com/tech/r-markdown-knitr.html">knitr</a>, 
另一个是基于Python的<a href="http://ipython.org/notebook.html">IPython Notebook</a>,
Nature中有篇<a href="http://www.nature.com/news/interactive-notebooks-sharing-the-code-1.16261">文章</a>还专门介绍了IPython Notebook,
科学网的新闻中也编译了这篇<a href="http://news.sciencenet.cn/htmlnews/2014/11/307201.shtm">文章</a>.
我曾花了一些时间去查阅相关资料, 发现IPython Notebook虽然有优点, 却并没有介绍的那样好.
它基于Pyhton的各种库, 保存的文档虽然是文本格式, 但是格式很复杂, 文件也很大, 不借助IPython的界面基本没有办法直接查看编辑.
这种做法不适合直接阅读和修改, 因此就放弃了文本格式的最大优点, 变得和其他程序没有什么区别了.
我目前的做法是尽量保证源文档的可读性与处理的便捷性. 这个理念我在前面的<a href="http://jerkwin.github.io/2014/12/25/%E8%AE%A9Markdown%E6%94%AF%E6%8C%81ASCII%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%92%8CJavaScript%E6%B5%81%E7%A8%8B%E5%9B%BE/">博文</a>中已有论述, 不再重复.</p>
