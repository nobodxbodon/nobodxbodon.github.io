<h2>原文：<a href="https://jerkwin.github.io/2015/06/11/KineticJS%E6%95%99%E7%A8%8B2%EF%BC%9A%E5%9B%BE%E5%BD%A2%E5%AF%B9%E8%B1%A1%E4%B8%8E%E5%9B%BE%E5%BD%A2%E6%A0%B7%E5%BC%8F">KineticJS教程2：图形对象与图形样式</a></h2>
<hr/>
<p>layout: post
title: KineticJS教程2：图形对象与图形样式
categories:</p>
<ul>
<li>科
tags:</li>
<li>编程</li>
<li>js</li>
</ul>
<hr/>
<p>&lt;script src="/jscss/kinetic.min.js"&gt;&lt;/script&gt;</p>
<h2>2015-06-11 08:27:22</h2>
<h2>3. 图形对象</h2>
<h2>3.1. Shape</h2>
<p><code>Kinetic</code>提供了一个<code>Shape</code>对象用于在层上绘制图形, 我们可以通过<code>Kinetic.Shape()</code>构造方法返回一个<code>Shape</code>对象:</p>
<p><code>var shape = new Kinetic.Shape(config);</code></p>
<p><code>Shape</code>方法的<code>config</code>参数是关于具体的绘图参数的数组对象, <code>Kinetic</code>就是根据这个参数里的具体信息进行绘图的.</p>
<p><code>config</code>的完整参数如下表所示:</p>
<p>&lt;table&gt;&lt;caption&gt;&lt;/caption&gt;
&lt;tr&gt;
&lt;th style="text-align:center;"&gt;性质&lt;/th&gt;
&lt;th style="text-align:center;"&gt;说明&lt;/th&gt;
&lt;th style="text-align:center;"&gt;默认&lt;/th&gt;
&lt;th style="text-align:center;"&gt;需要&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;drawFunc&lt;/td&gt;
&lt;td style="text-align:center;"&gt;绘图函数&lt;/td&gt;
&lt;td style="text-align:center;"&gt;-&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;必需&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;fill&lt;/td&gt;
&lt;td style="text-align:center;"&gt;color, linear gradient, radial gradient或pattern&lt;/td&gt;
&lt;td style="text-align:center;"&gt;-&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;stroke&lt;/td&gt;
&lt;td style="text-align:center;"&gt;描边颜色&lt;/td&gt;
&lt;td style="text-align:center;"&gt;-&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;strokeWidth&lt;/td&gt;
&lt;td style="text-align:center;"&gt;描边宽度&lt;/td&gt;
&lt;td style="text-align:center;"&gt;-&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;lineJoin&lt;/td&gt;
&lt;td style="text-align:center;"&gt;miter, round, or bevel&lt;/td&gt;
&lt;td style="text-align:center;"&gt;miter&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;shadow&lt;/td&gt;
&lt;td style="text-align:center;"&gt;阴影对象&lt;/td&gt;
&lt;td style="text-align:center;"&gt;-&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;detectonType&lt;/td&gt;
&lt;td style="text-align:center;"&gt;path or pixel&lt;/td&gt;
&lt;td style="text-align:center;"&gt;path&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;x&lt;/td&gt;
&lt;td style="text-align:center;"&gt;x 位置&lt;/td&gt;
&lt;td style="text-align:center;"&gt;0&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;y&lt;/td&gt;
&lt;td style="text-align:center;"&gt;y 位置&lt;/td&gt;
&lt;td style="text-align:center;"&gt;0&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;visible&lt;/td&gt;
&lt;td style="text-align:center;"&gt;是否可见&lt;/td&gt;
&lt;td style="text-align:center;"&gt;true&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;listening&lt;/td&gt;
&lt;td style="text-align:center;"&gt;是否绑定事件&lt;/td&gt;
&lt;td style="text-align:center;"&gt;true&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;id&lt;/td&gt;
&lt;td style="text-align:center;"&gt;唯一ID&lt;/td&gt;
&lt;td style="text-align:center;"&gt;-&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;name&lt;/td&gt;
&lt;td style="text-align:center;"&gt;名称&lt;/td&gt;
&lt;td style="text-align:center;"&gt;-&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;alpha&lt;/td&gt;
&lt;td style="text-align:center;"&gt;透明度&lt;/td&gt;
&lt;td style="text-align:center;"&gt;1&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;scale&lt;/td&gt;
&lt;td style="text-align:center;"&gt;缩放&lt;/td&gt;
&lt;td style="text-align:center;"&gt;[1,1]&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;rotation&lt;/td&gt;
&lt;td style="text-align:center;"&gt;绕中心点旋转弧度数&lt;/td&gt;
&lt;td style="text-align:center;"&gt;0&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;rotationDeg&lt;/td&gt;
&lt;td style="text-align:center;"&gt;绕中心点旋转度数&lt;/td&gt;
&lt;td style="text-align:center;"&gt;0&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;centerOffset&lt;/td&gt;
&lt;td style="text-align:center;"&gt;中心偏移&lt;/td&gt;
&lt;td style="text-align:center;"&gt;[0,0]&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;draggable&lt;/td&gt;
&lt;td style="text-align:center;"&gt;是否可拖动&lt;/td&gt;
&lt;td style="text-align:center;"&gt;false&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:center;"&gt;dragConstraint&lt;/td&gt;
&lt;td style="text-align:center;"&gt;none, horizontal或vertical&lt;/td&gt;
&lt;td style="text-align:center;"&gt;none&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left;"&gt;dragBounds&lt;/td&gt;
&lt;td style="text-align:center;"&gt;拖放边界&lt;/td&gt;
&lt;td style="text-align:center;"&gt;-&lt;/td&gt;
&lt;td colspan="2" style="text-align:center;"&gt;可选&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;</p>
<p>其中最重要的参数就是<code>drawFunc</code>, 这是一个由用户创建的方法对象, <code>Kinetic</code>绘图时就是调用的这个方法.</p>
<p>比如我们可以利用如下代码在页面上画一个矩形:</p>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	window.onload = function() {

		//创建舞台
		var stage = new Kinetic.Stage({
			container: "container",
			width: 600,
			height: 400
		});

		var layer = new Kinetic.Layer();

		//创建config参数
		var config = {
			//绘图方法, 画一个矩形
			drawFunc: function(context) {
				context.rect(200, 150, 200, 100);
				context.fillStrokeShape(this);
			},
			//填充色
			fill: "green",
			//边缘线颜色
			stroke: "black",
			//边缘线宽度
			strokeWidth: 4
		};

		//创建Shape对象
		var rectShape = new Kinetic.Shape(config);

		//把Shape对象添加到层里
		layer.add(rectShape);

		//将层添加到舞台中
		stage.add(layer);
	};
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<p>运行结构如下:</p>
<p>&lt;div id="ctn_31" style="border:solid 2px #CCC;"&gt;&lt;/div&gt;
&lt;script&gt;
	var stage = new Kinetic.Stage({
		container: "ctn_31",
		width: 600, height: 400
	});</p>
<pre><code>var layer = new Kinetic.Layer();

var config = {
	drawFunc: function(context) {
		context.rect(200, 150, 200, 100);
		context.fillStrokeShape(this);
	},
	fill: "green", stroke: "black",
	strokeWidth: 4
};

var rectShape = new Kinetic.Shape(config);
layer.add(rectShape);
stage.add(layer);</code></pre>
<p>&lt;/script&gt;</p>
<h2>3.2. 常用图形</h2>
<p><code>Kinetic</code>除了有<code>Shape</code>可以用于绘图外, 还为我们提供了一系列用于常见图形绘制的对象, 包括矩形(<code>Rect</code>), 圆(<code>Circle</code>), 图像(<code>Image</code>), 精灵(<code>Sprite</code>), 文本(<code>Text</code>), 线(<code>Line</code>), 多边形(<code>Polygon</code>), 常用多边形(<code>Regular Polygon</code>), 路径(<code>Path</code>), 星星(<code>Star</code>)几种.</p>
<p>这几个图形对象都是继承自<code>Shape</code>, 所以使用方法与<code>Shape</code>类似, 以一个<code>config</code>对象指定绘图细节, 与<code>Shape</code>不同的是, 不需要我们指定<code>drawFunc</code>, 只需要根据图形的类型指定关键参数就可以了.</p>
<p>在此, 我们以<code>Shape.Rect</code>为例, 绘制矩形图形的代码如下:</p>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	window.onload = function() {
		var stage = new Kinetic.Stage({
			container: "container",
			width: 600,
			height: 400
		});
		var layer = new Kinetic.Layer();

		//创建config参数
		var config = {
			x: 200,           //左上角x坐标
			y: 150,           //左上角y坐标
			width: 200,       //矩形宽度
			height: 100,      //矩形高度
			fill: "blue",     //填充色
			stroke: "black",  //边缘线颜色
			strokeWidth: 4    //边缘线宽度
		};

		//创建Shape对象
		var rect = new Kinetic.Rect(config);

		//把Shape对象添加到层里
		layer.add(rect);

		//将层添加到舞台中
		stage.add(layer);
	};
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<p>运行结果如下:</p>
<p>&lt;div id="ctn_32" style="border:solid 2px #CCC;"&gt;&lt;/div&gt;
&lt;script&gt;
var stage = new Kinetic.Stage({
	container: "ctn_32",
	width: 600, height: 400
});
var layer = new Kinetic.Layer();</p>
<p>var config = {
x: 200, y: 150,
width: 200, height: 100,
fill: "blue", stroke: "black",
strokeWidth: 4
};
var rect = new Kinetic.Rect(config);
layer.add(rect);
stage.add(layer);
&lt;/script&gt;</p>
<p>具体每种图形的<code>config</code>参数细节可以参见<code>Kinetic</code>的文档.</p>
<h2>3.3. 图形组</h2>
<p><code>Kinetic</code>提供了<code>Group</code>对象, 用于把若干个不同的图形对象, 或者是其他的<code>Group</code>对象组合成一个复杂的图形进行统一管理.</p>
<p>比如, 我们创建一个包含一个矩形和一个圆的<code>group</code>, 并添加到层中显示出来.</p>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	window.onload = function() {
		var stage = new Kinetic.Stage({
			container: "container",
			width: 600,
			height: 400
		});

		var layer = new Kinetic.Layer();

		//创建一个要加进组中的圆
		var circle = new Kinetic.Circle({
			x: 200,
			y: 100,
			radius: 50,
			fill: "red"
		});

		//创建一个要加进组中的矩形
		var rect = new Kinetic.Rect({
			x: 300,
			y: 200,
			width: 100,
			height: 100,
			fill: "blue"
		});

		//创建group对象
		var group = new Kinetic.Group();

		//把多个图形对象添加到group里
		group.add(circle);
		group.add(rect);

		//把group对象添加到层里
		layer.add(group);

		//将层添加到舞台中
		stage.add(layer);
	};
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<p>运行结果如下:</p>
<p>&lt;div id="ctn_33" style="border:solid 2px #CCC;"&gt;&lt;/div&gt;
&lt;script&gt;
	var stage = new Kinetic.Stage({
		container: "ctn_33",
		width: 600, height: 400
	});</p>
<pre><code>var layer = new Kinetic.Layer();
var circle = new Kinetic.Circle({
	x: 200, y: 100,
	radius: 50, fill: "red"
});
var rect = new Kinetic.Rect({
	x: 300, y: 200,
	width: 100, height: 100,
	fill: "blue"
});

var group = new Kinetic.Group();
group.add(circle);
group.add(rect);
layer.add(group);
stage.add(layer);</code></pre>
<p>&lt;/script&gt;</p>
<p>由于<code>Group</code>继承自<code>Node</code>, 而<code>Shape</code>也是继承自<code>Node</code>, 因此, <code>Group</code>的一些属性和行为也和<code>Shape</code>比较类似, 比如<code>Group</code>的构造方法也可以像接受一个<code>config</code>参数配置<code>Group</code>的位置, 旋转, 缩放等属性. 如:</p>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
var config = {
	x: 220,
	y: 40,
	rotationDeg: 20
};
&lt;/code&gt;&lt;/pre&gt;</p>
<p>或者也可以不在创建<code>group</code>时通过<code>config</code>参数设定, 而是创建<code>group</code>对象后通过相对应的方法设定各属性, 比如<code>x</code>和<code>y</code>参数就可以分别用<code>group.setX(220)</code>和<code>group.setY(20)</code>来设定.</p>
<h2>4. 图形样式</h2>
<h2>4.1. 填充</h2>
<p><code>Kinetic</code>中图形的填充属性可以利用构造方法中<code>config</code>参数的<code>fill</code>属性进行设定, 也可以用图形对象的<code>setFill</code>方法进行设定. 不过要注意, <code>setFill</code>使用的填充类型必须与创建这个对象时<code>config</code>中所用的填充类型相同.</p>
<p><code>Kinetic</code>支持颜色, 图像, 线性渐变和径向渐变四种填充模式.</p>
<h3>4.1.1 颜色填充</h3>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	window.onload = function() {
		var stage = new Kinetic.Stage({
			container: "container",
			width: 600,
			height: 400
		});

		var layer = new Kinetic.Layer();

		//创建第一个矩形对象的config参数
		var config1 = {
			x: 100,
			y: 150,
			width: 100,
			height: 100,
			fill: "blue" //填充色
		};

		//创建第一个矩形对象
		var rect1 = new Kinetic.Rect(config1);

		//创建第二个矩形对象的config参数
		var config2 = {
			x: 400,
			y: 150,
			width: 100,
			height: 100,
			fill: "red" //填充色
		};

		//创建第二个矩形对象
		var rect2 = new Kinetic.Rect(config2);

		//修改第二个矩形对象的颜色
		rect2.setFill("green");
		layer.add(rect1);
		layer.add(rect2);
		stage.add(layer);
	};
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<p>运行结果如下:</p>
<p>&lt;div id="ctn_411" style="border:solid 2px #CCC;"&gt;&lt;/div&gt;
&lt;script&gt;
	var stage = new Kinetic.Stage({
		container: "ctn_411",
		width: 600, height: 400
	});
	var layer = new Kinetic.Layer();
	var config1 = {
		x: 100, y: 150,
		width: 100, height: 100,
		fill: "blue"
	};
	var rect1 = new Kinetic.Rect(config1);
	var config2 = {
		x: 400, y: 150,
		width: 100, height: 100,
		fill: "red"
	};
	var rect2 = new Kinetic.Rect(config2);
	rect2.setFill("green");
	layer.add(rect1);
	layer.add(rect2);
	stage.add(layer);
&lt;/script&gt;</p>
<h3>4.1.2 线性渐变填充</h3>
<p>线性渐变填充的设置形式如下:</p>
<pre><code>	fillLinearGradientStartPoint: { x: 0, y: 50 },
	fillLinearGradientEndPoint: { x: 400, y: 50 },
	fillLinearGradientColorStops: [ 0, "red", 0.5, "green", 1, "blue" ]
</code></pre>
<p>其中<code>fillLinearGradientStartPoint</code>是线性渐变线的起点位置, <code>fillLinearGradientEndPoint</code>是线性渐变线的终点位置, <code>fillLinearGradientColorStops</code>是指定线性渐变线上关键点的颜色值, 位置参数是一个介于0到1之间的浮点数, 0表示起点的颜色, 1表示终点的颜色.</p>
<p>这里要注意的是, 渐变线的坐标基点并不是以<code>canvas</code>左上角为(0, 0)点. 如果是图形对象是矩形的话, 矩形的左上角点才是(0, 0)点, 如果是圆形对象的话, 圆心才是(0, 0)点.</p>
<p>修改填充属性时, 可使用</p>
<pre><code>	obj.setAttrs({
		FillLinearGradientStartPoint:{ x: 100, y: 50 },
		FillLinearGradientEndPoint: { x: 400, y: 50 },
		FillLinearGradientColorStops: [ 0, "yellow", 0.5, "cyan", 1, "purple" ]
	})
</code></pre>
<p>或</p>
<pre><code>	obj.setFillLinearGradientStartPoint({ x: 100, y: 50 })
	obj.setFillLinearGradientEndPoint({ x: 400, y: 50 })
	obj.setFillLinearGradientColorStops([ 0, "yellow", 0.5, "cyan", 1, "purple" ])
</code></pre>
<p>示例代码如下:</p>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
window.onload = function() {
	var stage = new Kinetic.Stage({
		container: "container",
		width: 600,
		height: 400
	});
	var layer = new Kinetic.Layer();

	//创建第一个矩形对象的config参数
	var config1 = {
		x: 100,
		y: 50,
		width: 400,
		height: 100,

		//渐变色
		fillLinearGradientStartPoint: { x: 0, y: 50 },
		fillLinearGradientEndPoint: { x: 400, y: 50 },
		fillLinearGradientColorStops: [ 0, "red", 0.5, "green", 1, "blue" ]
	};

	//创建第一个矩形对象
	var rect1 = new Kinetic.Rect(config1);

	//创建第二个矩形对象的config参数
	var config2 = {
		x: 100,
		y: 200,
		width: 400,
		height: 100,

		// 渐变色
		fillLinearGradientStartPoint: { x: 0, y: 50 },
		fillLinearGradientEndPoint: { x: 400, y: 50 },
		fillLinearGradientColorStops: [ 0, "red", 0.5, "green", 1, "blue" ]
	};

	//创建第二个矩形对象
	var rect2 = new Kinetic.Rect(config2);

	//修改第二个矩形对象的颜色变化模式
	rect2.setAttrs({
		FillLinearGradientStartPoint:{ x: 100, y: 50 },
		FillLinearGradientEndPoint: { x: 400, y: 50 },
		FillLinearGradientColorStops: [ 0, "yellow", 0.5, "cyan", 1, "purple" ]
	})
	// 或使用下面的代码
	//	rect2.setFillLinearGradientStartPoint({ x: 100, y: 50 })
	//	rect2.setFillLinearGradientEndPoint({ x: 400, y: 50 })
	//	rect2.setFillLinearGradientColorStops([ 0, "yellow", 0.5, "cyan", 1, "purple" ])

	layer.add(rect1);
	layer.add(rect2);
	stage.add(layer);
};
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<p>运行结果如下:</p>
<p>&lt;div id="ctn_412" style="border:solid 2px #CCC;"&gt;&lt;/div&gt;
&lt;script&gt;
	var stage = new Kinetic.Stage({
		container: "ctn_412",
		width: 600, height: 400
	});
	var layer = new Kinetic.Layer();</p>
<pre><code>var config1 = {
	x: 100, y: 50,
	width: 400, height: 100,
	fillLinearGradientStartPoint: { x: 0, y: 50 },
	fillLinearGradientEndPoint: { x: 400, y: 50 },
	fillLinearGradientColorStops: [ 0, "red", 0.5, "green", 1, "blue" ]
};
var rect1 = new Kinetic.Rect(config1);

var config2 = {
	x: 100, y: 200,
	width: 400, height: 100,
	fillLinearGradientStartPoint: { x: 0, y: 50 },
	fillLinearGradientEndPoint: { x: 400, y: 50 },
	fillLinearGradientColorStops: [ 0, "red", 0.5, "green", 1, "blue" ]
};
var rect2 = new Kinetic.Rect(config2);
rect2.setAttrs({
	FillLinearGradientStartPoint:{ x: 100, y: 50 },
	FillLinearGradientEndPoint: { x: 400, y: 50 },
	FillLinearGradientColorStops: [ 0, "yellow", 0.5, "cyan", 1, "purple" ]
})
//	rect2.setFillLinearGradientStartPoint({ x: 100, y: 50 })
//	rect2.setFillLinearGradientEndPoint({ x: 400, y: 50 })
//	rect2.setFillLinearGradientColorStops([ 0, "yellow", 0.5, "cyan", 1, "purple" ])
layer.add(rect1);
layer.add(rect2);
stage.add(layer);</code></pre>
<p>&lt;/script&gt;</p>
<p>上述代码的渐变效果图如下:</p>
<p><img alt="" src="https://jerkwin.github.io/pic/KinJS_3.png"/></p>
<p>上面的矩形渐变线为(0, 50)到(400, 50), 正如上面提到的, 这里的渐变线是以这个矩形的左上角为(0, 0)点的, 所以实际的渐变线是如黑线条所示的区域, 而下面的矩形由于<code>setAttrs</code>的修改, 渐变线为(100, 50)到(400, 50), 所以实际渐变线是图上所示的黑线区域, 而不是整个矩形的范围. 不要把渐变线的坐标理解为相对于<code>canvas</code>的左上角.</p>
<h3>4.1.3.径向渐变填充</h3>
<p>径向渐变填充的设置形式如下:</p>
<pre><code>	fillRadialGradientStartPoint: { x: 0, y: 0 },
	fillRadialGradientStartRadius: 0,
	fillRadialGradientEndPoint: { x: 0, y: 0 },
	fillRadialGradientEndRadius: 100,
	fillRadialGradientColorStops: [ 0, "red", 0.5, "green", 1, "blue" ]
</code></pre>
<p>其中<code>fillRadialGradientStartPoint</code>是径向渐变的起始圆位置, <code>fillRadialGradientStartRadius</code>是径向渐变的终止圆位置, <code>fillRadialGradientColorStops</code>是指定径向渐变圆间的关键距离的颜色值, 位置参数是一个介于0到1之间的浮点数, 0表示起始圆的颜色, 1表示终止圆的颜色.</p>
<p>这里要注意的是, 与线性渐变类似, 渐变圆的圆心坐标基点并不是以<code>canvas</code>左上角为(0, 0)点, 如果是图形对象是矩形的话, 矩形的左上角点才是(0, 0)点, 如果是圆形对象的话, 圆心才是(0, 0)点.</p>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	window.onload = function() {
		var stage = new Kinetic.Stage({
			container: "container",
			width: 600,
			height: 400
		});

		var layer = new Kinetic.Layer();

		//创建第一个圆形对象的config参数
		var config1 = {
			x: 150,
			y: 200,
			radius: 100,

			//渐变色
			fillRadialGradientStartPoint: { x: 0, y: 0 },
			fillRadialGradientStartRadius: 0,
			fillRadialGradientEndPoint: { x: 0, y: 0 },
			fillRadialGradientEndRadius: 100,
			fillRadialGradientColorStops: [ 0, "red", 0.5, "green", 1, "blue" ]
		};

		//创建第一个圆形对象
		var circle1 = new Kinetic.Circle(config1);

		//创建第二个圆形对象的config参数
		var config2 = {
			x: 450,
			y: 200,
			radius: 100,
			//渐变色
			fillRadialGradientStartPoint: { x: 0, y: 0 },
			fillRadialGradientStartRadius: 0,
			fillRadialGradientEndPoint: { x: 0, y: 0 },
			fillRadialGradientEndRadius: 100,
			fillRadialGradientColorStops: [ 0, "red", 0.5, "green", 1, "blue" ]
		};

		//创建第二个圆形对象
		var circle2 = new Kinetic.Circle(config2);

		//修改第二个矩形对象的颜色变化模式
		circle2.setAttrs({
			fillRadialGradientStartPoint: { x: 0, y: 0 },
			fillRadialGradientStartRadius: 0,
			fillRadialGradientEndPoint: { x: 0, y: 0 },
			fillRadialGradientEndRadius: 100,
			fillRadialGradientColorStops: [ 0, "yellow", 0.5, "cyan", 1, "purple" ]
		});
		layer.add(circle1);
		layer.add(circle2);
		stage.add(layer);
	};
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<p>上述代码的运行结果如下:</p>
<p>&lt;div id="ctn_413" style="border:solid 2px #CCC;"&gt;&lt;/div&gt;
&lt;script&gt;
	var stage = new Kinetic.Stage({
		container: "ctn_413",
		width: 600, height: 400
	});
	var layer = new Kinetic.Layer();
	var config1 = {
		x: 150, y: 200, radius: 100,
		fillRadialGradientStartPoint: { x: 0, y: 0 },
		fillRadialGradientStartRadius: 0,
		fillRadialGradientEndPoint: { x: 0, y: 0 },
		fillRadialGradientEndRadius: 100,
		fillRadialGradientColorStops: [ 0, "red", 0.5, "green", 1, "blue" ]
	};
	var circle1 = new Kinetic.Circle(config1);</p>
<pre><code>var config2 = {
	x: 450, y: 200, radius: 100,
	fillRadialGradientStartPoint: { x: 0, y: 0 },
	fillRadialGradientStartRadius: 0,
	fillRadialGradientEndPoint: { x: 0, y: 0 },
	fillRadialGradientEndRadius: 100,
	fillRadialGradientColorStops: [ 0, "red", 0.5, "green", 1, "blue" ]
};
var circle2 = new Kinetic.Circle(config2);

circle2.setAttrs({
	fillRadialGradientStartPoint: { x: 0, y: 0 },
	fillRadialGradientStartRadius: 0,
	fillRadialGradientEndPoint: { x: 0, y: 0 },
	fillRadialGradientEndRadius: 100,
	fillRadialGradientColorStops: [ 0, "yellow", 0.5, "cyan", 1, "purple" ]
});
layer.add(circle1);
layer.add(circle2);
stage.add(layer);</code></pre>
<p>&lt;/script&gt;</p>
<h3>4.1.4. 图像填充</h3>
<p>图像填充设置方式如下:</p>
<pre><code>	fillPatternImage: image,
	fillPatternOffset: { x:0, y:0 }
</code></pre>
<p>其中, <code>fillPatternImage</code>是<code>javascript</code>的<code>Image</code>对象, <code>fillPatternOffset</code>是图像开始填充的位置偏移量.</p>
<p>示例代码:</p>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	function draw(image) {
		var stage = new Kinetic.Stage({
			container: "container",
			width: 600,
			height: 400
		});
		var layer = new Kinetic.Layer();

		//创建第一个矩形config参数
		var config1 = {
			x: 50,
			y: 100,
			width: 180,
			height: 180,
			fillPatternImage: image,
			fillPatternOffset: {x:0, y:0}
		};
		var rect1 = new Kinetic.Rect(config1);

		//创建第二个矩形config参数
		var config2 = {
			x: 350,
			y: 100,
			width: 180,
			height: 180,
			//填充图像, 并将填充图像向右下移动50个像素
			fillPatternImage: image,
			fillPatternOffset: {x:50, y:50}
		};
		var rect2 = new Kinetic.Rect(config2);

		//将填充图像向左上移动50个像素
		rect2.setAttrs({
			image: image,
			offset: { x: -50, y: -50 }
		});
		layer.add(rect1);
		layer.add(rect2);
		stage.add(layer);
	}

	window.onload = function() {
		var image = new Image();
		image.onload = function() {
			draw(image);
		};
		image.src = "FSM.jpg";
	};
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<p>上述代码运行结果如下:</p>
<p>&lt;div id="ctn_414" style="border:solid 2px #CCC;"&gt;&lt;/div&gt;
&lt;script&gt;
	function draw(image) {
		var stage = new Kinetic.Stage({
			container: "ctn_414",
			width: 600, height: 400
		});
		var layer = new Kinetic.Layer();</p>
<pre><code>	var config1 = {
		x: 50, y: 100,
		width: 180, height: 180,
		fillPatternImage: image,
		fillPatternOffset: {x:0, y:0}
	};
	var rect1 = new Kinetic.Rect(config1);

	//创建第二个矩形config参数
	var config2 = {
		x: 350, y: 100,
		width: 180, height: 180,
		//填充图像, 并将填充图像向右下移动50个像素
		fillPatternImage: image,
		fillPatternOffset: {x:50, y:50}
	};
	var rect2 = new Kinetic.Rect(config2);

	//将填充图像向左上移动50个像素
	rect2.setAttrs({
		image: image,
		offset: { x: -50, y: -50 }
	});
	layer.add(rect1);
	layer.add(rect2);
	stage.add(layer);
}

var image = new Image();
image.onload = function() {
	draw(image);
};
image.src = "/pic/KinFSM.png";</code></pre>
<p>&lt;/script&gt;</p>
<h2>4.2. 线条颜色与宽度</h2>
<p>线条对象与其他图形的边缘线的颜色与宽度设置如下:</p>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	// 使用构造方法的config参数设置
	var shape = new Kinetic.Circle({
		stroke: "black",
		strokeWidth: 4
	});

	// 用图形对象的方法设置
	shape.setStroke("blue");
	shape.setStrokeWidth(20);
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<h2>4.3. 透明</h2>
<p>透明度是一个0到1之间的浮点值, 0表示完全透明, 1则是完全不透明.</p>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	// 使用构造方法的config参数设置
	var shape = new Kinetic.Circle({
		alpha: 0.5
	});

	// 用图形对象的方法设置
	shape.setAlpha(1);
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<h2>4.4. 阴影</h2>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	// 使用构造方法的config参数设置
	var shape = new Kinetic.Circle({
		shadow: {
			color: "black",
			blur: 10,
			offset: [10, 10],
			alpha: 0.5
		}
	});

	// 用图形对象的方法设置
	shape.setShadow({
		color: "black",
		blur: 10,
		offset: [10, 10],
		alpha: 0.5
	});
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<h2>4.5. 线段间连接点样式</h2>
<p>连接点的样式可以是<code>miter</code>, <code>bevel</code>或<code>round</code>, 默认的样式是<code>miter</code>.</p>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	// 使用构造方法的config参数设置
	var shape = new Kinetic.Circle({
		lineJoin: "bevel"
	});

	// 用图形对象的方法设置
	shape.setLineJoin("round");
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
<h2>4.6. 图形的隐藏与显示</h2>
<p>&lt;pre class="line-numbers" data-start="0"&gt;&lt;code class="language-javascript"&gt;# Language: js
&amp;lt;script&amp;gt;
	// 使用构造方法的config参数设置
	var shape = new Kinetic.Circle({
		visible: false
	});

	// 用图形对象的show方法显示图形
	shape.show();

	// 用图形对象的hide方法隐藏图形
	shape.hide();
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</p>
