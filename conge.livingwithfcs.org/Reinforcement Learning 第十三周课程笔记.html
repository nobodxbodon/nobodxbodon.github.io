<h2><a href="https://github.com/conge/conge.github.io/blob/master/_posts/2015/2015-11-18-Reinforcement-Learning--di-shi-san-zhou-ke-cheng-bi-ji-.md">仓库源文</a>，<a href="https://conge.livingwithfcs.org/2015/11/18/Reinforcement-Learning--di-shi-san-zhou-ke-cheng-bi-ji-">站点原文</a></h2>
<hr/>
<p>layout: post
title: "Reinforcement Learning 第十三周课程笔记"
date: "2015-11-18 12:44:50"
categories: 计算机科学
excerpt: "This week you should watch Game Theory. The readings are Littman (1994),..."</p>
<h2>auth: conge</h2>
<ul>
<li>content
{:toc}</li>
</ul>
<p><img alt="Game Theory" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-6e6940118b23767f.png"/></p>
<p>This week you should</p>
<ul>
<li>watch <em>Game Theory</em>. </li>
<li>The readings are <em>Littman (1994), Littman and Stone (2003)</em>, <em>Greenwald and Hall (2003),</em> and <em>Munoz de Cote and Littman (2008).</em></li>
</ul>
<h1>11B Game Theory ReLoaded</h1>
<p><img alt="Iterated Prisoner's Delama" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-d04743c341fb7787.png"/></p>
<ul>
<li>Prisoner should always defects at the last game (say we have k games), then the kth game is known<ul>
<li>If you do the above choice, then the last game is known, and the last unknow game becomes to be the one before.</li>
<li>since prisoner should defect in the last unknown game, then it should defect on the (k - 1) th game. And the (k - 1)th game becomes known.</li>
</ul>
</li>
<li>So prisoners should always defect at every each game</li>
<li>but what happens when the last a few games are unknown?</li>
</ul>
<p><img alt="Uncertain End" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-9d914224c97bf3b9.png"/></p>
<ul>
<li>the probability that the game will continue is γ</li>
<li>Then the expected number of rounds is 1/(1 -  γ).</li>
</ul>
<p><img alt="Tit for tat" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-a49531420c347600.png"/></p>
<ul>
<li>Finite representation of a unbounded number of rounds</li>
<li>Copy opponent's previous move thereafter.</li>
</ul>
<p><img alt="Quiz 1: Tit For Tat response to different stratergies" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-be125d5e887318fa.png"/></p>
<h2>what to do if we Facing TfT?</h2>
<p><img alt="Quiz2: what should we do against TfT" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-13d4a93b5e260611.png"/></p>
<p><img alt="Finite-state Strategy" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-93652a758cd644c1.png"/></p>
<ul>
<li>TfT is like an MDP, we can solve TfT by solving MDP</li>
<li>if our opponent using TfT, then our decision will affect the opponent's decision.</li>
</ul>
<p><img alt="Quiz 3: Response to IPD" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-55d5525f25712d45.png"/></p>
<p><img alt="Quiz 3 answer " src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-48f40347d5f4002b.png"/></p>
<ul>
<li>Playing the game multiple times (unknown times) opens up the possibility of another Nash Equilibrium which is cooperating with each other.</li>
<li>In this case, both agents playing TfT is a best way to respond to each other.</li>
<li>But what if γ is not 1/6 here??? or is γ matter?</li>
</ul>
<h2>Folk Theorem</h2>
<p><img alt="Folk Theorem in general MathmaticsX3sA" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-0ea4dfda342282d2.png"/></p>
<p><img alt="Folk Theorem in Game Theory" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-59f41ed1b5d4fabe.png"/></p>
<ul>
<li>Describes the set of payoffs that can result from Nash strategies in repeated games.</li>
</ul>
<p><img alt="Quiz 4: Possible average payoff, see next fig for solution" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-a0abdd56bdbf816a.png"/></p>
<p><img alt="Quiz 4: answer" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-b2ea3836b9d33712.png"/></p>
<h2> Minmax Profile and Security level profile</h2>
<p><img alt="Quiz 5: Minmax Profile" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-e9ba27494f6a098f.png"/></p>
<ul>
<li>x is the probability that Smooth chooses "B", Then (1 -x) is the probability that Smooth chooses "S". So Curly will get x if he chooses "B", and 2(1-x) if he chooses "S". Solving x = 2(1-x) will get x.</li>
</ul>
<p><img alt="Security level profile" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-31a7b3829933e6d3.png"/></p>
<ol>
<li>MinMax Point: DD point</li>
<li>Feasible payoff: yellow filled region</li>
<li>acceptable payoff: any point that to the right-above of MinMax point </li>
<li>Feasible acceptable payoff: intersection of 1. and 2.</li>
</ol>
<h2>Folk Theorem</h2>
<p><img alt="Folk Theorem" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-9591e6f2df7192d0.png"/></p>
<ul>
<li>Any feasible payoff profile that strictly dominates the minmax/security level profile can be realized as a Nash equilibrium payoff profile with sufficiently large discount factor.</li>
<li>translation: do what you are told (feasible payoff), or you will be punished (minMax payoff profile). See the next slide for graph representation.</li>
</ul>
<h3>Proof of Folk Theorem</h3>
<p><img alt="Grim Trigger" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-ddc1726d10b1f7fc.png"/></p>
<ul>
<li>black color--&gt; actions of one agent</li>
<li>green color--&gt; another agent</li>
<li>Grim Trigger: once cross line, will always deal with default.</li>
</ul>
<p><img alt="implausible threats" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-b6a8faed93a42b3b.png"/></p>
<ul>
<li>subgame perfect equilibrium: means taking test response independent of history.</li>
<li>if under a threat the machine can reach a Nash equilibrium but cannot reach subgame perfect, then it is a implausible threat ( the agent won't carry out the threat)</li>
</ul>
<p><img alt="quiz 6: TfT vs. TfT is not subgame Perfect" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-31e5bbef1b3d9b34.png"/></p>
<ul>
<li>If #1 is defecting, #2 will get better expected reward if it keeps cooperating instead copying the action of one. SO TfT vs. TfT is NOT subgame perfect.</li>
</ul>
<p><img alt="quiz7: Pavlov Machine" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-e817a5c4d407b3be.png"/></p>
<ul>
<li>Pavlov can reach Nash equilibrium if they both choose to cooperate.</li>
</ul>
<p><img alt="Pavlov is subgame perfect" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-9746ea5b2c91f6c4.png"/></p>
<ul>
<li>Pavlov is subgame perfect and reaches NE. So the threat is plausible!</li>
</ul>
<p><img alt="Computational Folk theorem" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-f14022ba1aeb6f4b.png"/></p>
<h2>Stochastic Games and Multiagent RL</h2>
<p><img alt="Stochastic Games and Multiagent RL" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-9c9666edb388d5b0.png"/></p>
<ul>
<li>Game description: A and B are two agents. If they go north, there is a semi-wall with 50% chance of going through. If they both go to the center, they will flip a coin to decide who will take the block. When one agent reach $, game ends and the agent who reaches $ get 100 reward.</li>
<li>NE exist?: yes, both go center.</li>
</ul>
<p><img alt="Stochastic Games " src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-f7ad00c8141d6c2f.png"/></p>
<ul>
<li>Stochastic Games is generalization of both MDP and single agent RL.</li>
</ul>
<p><img alt="Quiz 8: constraining the stochastic game will get other models" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-be7a79cb5b316f34.png"/></p>
<ul>
<li>If put some constraints on the stochastic games, we will get some of the games/mdp etc we learned before.</li>
<li>Since stochastic games are generalized MDP, so we can try to generalize the method to solved the MDP to solve stochastic games. </li>
</ul>
<h3>Zero-Sum Stochastic Games</h3>
<p><img alt="Zero-Sum Stochastic Games" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-91fbb2d5db9b4a32.png"/></p>
<ul>
<li>Minimax can be used in a Bellman-like equation. </li>
<li>VI works for the situation, minimax-Q converges, and Q* is unique, policies can be computed.</li>
</ul>
<h3> General-Sum Games</h3>
<p><img alt="General-Sum Games are not solved" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-4e7e0a9182e91657.png"/></p>
<ul>
<li>When we general-sum case, Q type of algorithms will not work.</li>
<li>The problem is not solved but there are a lot of ideas about =</li>
</ul>
<p><img alt="Possible direction for General Sum Games" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-a47a92114b082885.png"/></p>
<h2>Recap</h2>
<p><img alt="recap" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-ecd6435299f80315.png"/></p>
<hr/>
<h1>11C Game Theory Revolutions</h1>
<p><img alt="Game Theory Revolutions" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-460592024dc20eda.png"/></p>
<p><img alt="" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-9f247f18e30835a2.png"/></p>
<h2>Correlated equilibrium</h2>
<p><img alt="Chicken Game" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-9284b7efa064f322.png"/></p>
<ul>
<li>In the chicken game, if both <em>Dare</em>, both get 0 reward (dies), if both chicken, both get 6 rewards. if one dare and the other chicken out, one get 7 and the other get 2 (still alive).</li>
</ul>
<p><img alt="Quiz 1: Nash Equilibrium?" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-8122e0058037e61d.png"/></p>
<ul>
<li>CC is not NE because if I know you will be C, I will change to D to get more reward.</li>
<li>CD or DC is NE because C is not willing to change to D, and D is not willing to change to C to get lower rewards.</li>
<li>DD is not NE because D wants to change to C to get better reward.</li>
<li>Although CD or DC is NE, but they are not stable because no one wants to always be C to receive a relatively lower reward.</li>
<li>Mixed Strategy: Dare 1/3 of the time and Chicken out 2/3 of the time. the expected payoff is 14/3.</li>
</ul>
<p><img alt="Quiz 2: Listening to Chris or not?" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-fc8c2060ff7d2d51.png"/></p>
<ul>
<li>Both agents knows three cards [C,C],[CD], and [DC]</li>
<li>A third person Chris choose a card randomly and inform the agent what to do base on the card. Should the agents listen to Chris?<ul>
<li>if Chris told me to D, then other one must be C. I don't want to change because changing to C will get lower reward.</li>
<li>if I was told to C, then the other one has half the chance to be C and half the chance to be D. If I choose C, I will get expected reward as 4. If choose D, will get expected reward of 3.5 ( see green words in the next slide). So staying with C is better.</li>
</ul>
</li>
<li><strong>Yes</strong>. and this is called a <strong>correlated equilibrium</strong>(CE).</li>
</ul>
<p><img alt="Quiz 3: expected payoff of CE" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-3f51c3fbbc2ed844.png"/></p>
<ul>
<li>given [C,C],[CD], and [DC] are randomly chosen, the expected CE is <code>1/3 * 7 + 1/3 * 2 + 1/3 *6 =5</code>, which is better than 14/3.</li>
<li>not both chicken out to get reward of 6? <strong>because [C,C] is not a equilibrium!</strong></li>
<li>what are the real life analogy of "Chris"? Traffic lights, stop signs……</li>
</ul>
<p><img alt="Correlated Facts" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-1ddf3f9492b62e21.png"/></p>
<h2>Cooperative-Competitive Values</h2>
<p><img alt="Cooperative-Competitive Values" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-8ab5d811900f5020.png"/></p>
<ul>
<li>There are two N.E in the CoCo game.</li>
<li>Curly are not motivated to do anything because he always gets 0 in the game. How to motivate him? Side payments? Smooth shares sth with him?</li>
</ul>
<p><img alt="Cooperative-Competitive Values Definition" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-80627f68cb579eae.png"/></p>
<ul>
<li>to understand this, need to go back and revisit Maxmax, minimax and linear programming.</li>
<li>the basic idea is to rewrite CoCo into a cooperative part and a competitive part.</li>
</ul>
<p><img alt="CoCo Example" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-73021cdc9d7b8b17.png"/></p>
<ul>
<li>given an U and U_bar matrix, compute the coco value and side payments.</li>
<li>calculate maximax and minimax. There are minimax form U's and U_bar's perspective. but the two values can not be values that's outside NE regions.</li>
<li>Coco value from U and U_bar's perspective are different.</li>
<li>Side payments can be calculated based on U and U_bar's max value and coco value.</li>
</ul>
<p><img alt="CoCo Recap" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-0a82378fdc2b43e3.png"/></p>
<ul>
<li>CoCo-Q converges but it is not non-expansion.</li>
</ul>
<hr/>
<h2> Mechanism Design</h2>
<p><img alt="Mechanism Design" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-aa27d35bb5450884.png"/></p>
<ul>
<li>based on wanted behavior to build/make a game.</li>
<li>E.G. Tax policy to encourage people buying a house</li>
</ul>
<p><img alt="Peer Teaching" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-784d45352696c960.png"/></p>
<ul>
<li>goal: learning.</li>
<li>Learner get incentives by getting questions correct -&gt; promote learning</li>
<li>Teacher get incentives by setting the difficulty bar so that if the learning get an easy question wrong and get a hard question correct. -&gt; push student to learn</li>
</ul>
<p><img alt="King Solomon" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-b92af2eabf5ae12d.png"/></p>
<ul>
<li>in the old King Solomon story, A and B will both say "no" and King will not get no real information.</li>
<li>Given the mechanism on the left, fake mom will be honest.<ul>
<li>Assumption: the baby's value to real mother and fake mother will be V&lt;sub&gt;real&lt;/sub&gt; &gt; V&lt;sub&gt;fake&lt;/sub&gt;</li>
<li>ask both the mother, is this your child, if all say yes, then A pays a fine F.</li>
<li>Then B announce a V that is V &gt; F</li>
<li>ask the question the same question to A again, if A say yes, A pays V, B pays F and A keeps the baby. if A says no, B keep the baby and B pays V.</li>
</ul>
</li>
</ul>
<p>Explanation: if B is fake, she will not announce a value that's larger than V&lt;sub&gt;fake&lt;/sub&gt;, because if A says no, he will get the baby with more than he is willing to pay. So A will get the baby. If B is real mother, she will announce a value V&lt;sub&gt;real&lt;/sub&gt; which is larger than V&lt;sub&gt;fake&lt;/sub&gt;. And A won't say yes because again she will end up with the bay but paying more than she is willing to. So, the real mom will get the baby.</p>
<h2>What have we learned.</h2>
<p><img alt="recap" src="/Users/xuanwu/work/聚聚/中文博客集锦/源数据/博客聚合/conge.livingwithfcs.org/assets/images/计算机科学/118382-dd86e4bc4ffced81.png"/></p>
<pre><code>2015-11-10 初稿
2015-11-17 完成
2015-12-06 reviewed and revised
</code></pre>
