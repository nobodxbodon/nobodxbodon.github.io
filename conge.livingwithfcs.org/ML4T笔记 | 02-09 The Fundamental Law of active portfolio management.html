<h2>原文：<a href="https://conge.livingwithfcs.org/2019/03/05/ML4T-02-09-The-Fundamental-Law-of-active-portfolio-management">ML4T笔记 | 02-09 The Fundamental Law of active portfolio management</a></h2>
<hr/>
<h2>layout: post
title: "ML4T笔记 | 02-09 The Fundamental Law of active portfolio management"
date: "2019-03-05 03:05:05"
categories: 计算机科学
auth: conge
tags: ML4T Machine_Learning Trading OMSCS</h2>
<ul>
<li>content
{:toc}</li>
</ul>
<h2>01 - Overview</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-13e50d81c1ebb027.png"/></p>
<p>Quotes from Warren Buffett: <strong>Wide diversification is only necessary when investors do not know what they are doing</strong>.</p>
<p>Mr. Buffett is talking about two things, 1) <strong>Investor skill</strong> and 2) <strong>bre,adth</strong> (the number of investments).</p>
<blockquote>
<p>Time: 00:00:38</p>
</blockquote>
<h2>02 - Grinolds Fundamental Law</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-e5299c849ab6947a.png"/></p>
<ul>
<li>1980s, Richard Grinold</li>
</ul>
<p><strong>the Fundamental Law of Active Portfolio Management</strong>.</p>
<ul>
<li><p>performance = skill x $\sqrt{breadth}$ or $IR = IC \times \sqrt{BR}$.</p>
</li>
<li><p>Thus Two ways to improve performance 1) improve skill, 2) more opportunities for applying that skill.</p>
</li>
<li><p>measure of skill and some measure of breadth.</p>
<ul>
<li>breadth might relate to how many stocks you invest in, it is the number of trading opportunities.</li>
<li>skill relates to your skill in choosing them, is summarized in <strong>Information coefficient</strong></li>
<li>performance is summarized in something called information ratio,</li>
</ul>
</li>
<li><p><strong>information ratio</strong> refers to the Sharpe ratio of excess returns: the manner in which the portfolio manager is exceeding the market's performance.</p>
</li>
</ul>
<blockquote>
<p>Time: 00:01:57</p>
</blockquote>
<h2>03 - The Coin Flipping Casino</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-8a0da46aba688705.png"/></p>
<p>A Coin Flipping is analogous to a single trade in stock: you flip a coin, you get head or tail, you buy a stock and hold it, you make or lose money.</p>
<p><strong>Here, the coin is biased</strong>: we have information about this coin</p>
<ul>
<li>Head probability is about 0.51</li>
<li>(the edge is like our alpha when investing in stocks).</li>
<li>the uncertainty of the outcome is like beta in stock investing.</li>
</ul>
<p><strong>even money bet</strong>: bet n coins, If you win you get 2 x n coins; if you lose, your money is taken.</p>
<ul>
<li>There are 1,000 betting tables each with their own biased coin, and you have 1,000 tokens.</li>
<li>Once you've distributed all your tokens, the coins are all flipped at once.
<strong>Is it better to bet all your tokens on just one coin flip, or is it better to bet on multiple coin-flips at once?</strong></li>
</ul>
<h2>04 - quiz: Which bet is better</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-ea62752ec75d8cc4.png"/></p>
<ol>
<li>you put all of your 1000 tokens on a single table</li>
<li>put 1 token on each of the 1000 tables,</li>
</ol>
<p>Which one of these is better?</p>
<p><strong>Solution</strong>: 2 multiple coin-flips</p>
<p>In 1. there's a 49% chance you'll lose all your money
In 2, there's very little chance you'll lose all your money. Option 2 has a lower risk.</p>
<blockquote>
<p>Time: 00:00:41</p>
</blockquote>
<h2>05 - quiz: Coin flip casino - Reward</h2>
<p><img alt="" src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-eb20bf447ff13d54.png"/></p>
<p>Reward: expected return.</p>
<ul>
<li>in the context of the coin flip casino, bet 1000 chips at once. The expected return is  <code>winning_chance x bet times</code> Winning change is 0.51 and losing chance is 0.49 or 49%. multiply this all out and add it up, then our expected return is <code>0.51 x 1000 - 0.49 * 1000 = $20</code>.</li>
<li>What's our expected return in that case of betting 1000 individual chips on 1000 different tables?</li>
</ul>
<p><strong>Solution</strong>: still $20.</p>
<ul>
<li>$expectedReturn = \sum_{i =1}^{1000}expectedReturn_{table_i}=0.02*1000 = 20$</li>
<li>each of the 1000 bets has 0.51 chance of winning $1, and 0.49 chance of losing $1.</li>
<li>the expected return of each bet is 0.02, and we multiply it by a thousand and we get $20.</li>
</ul>
<p>So the reword of the single betting and multiple betting is the same, so why the multi-bet approach is better?</p>
<p><em>RISK</em></p>
<blockquote>
<p>Time: 00:00:59</p>
</blockquote>
<h2>06 - Coin-Flip Casino: Risk 1</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-6951c7f3acb24606.png"/></p>
<p><strong>Risk as the probability of lose it all: what's the chance you might lose it all?</strong></p>
<ul>
<li><p>single bet: there is a 49% chance to lose all in one bet.  this is very high</p>
</li>
<li><p>multi-bet case: the chance of losing it all $p_{loseAll} = \prod_{i=1}^{1000}p_{i} =0.49^{1000}$</p>
<ul>
<li>It's so small it's not even a number.</li>
</ul>
</li>
</ul>
<blockquote>
<p>Time: 00:01:59</p>
</blockquote>
<h2>07 - Coin-Flip Casino Risk 2</h2>
<p><img alt="" src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-4d47f61104f085c0.png"/></p>
<p><strong>Risk as the standard deviation of all those individual bets</strong></p>
<p>for the multi-bet: Because for each table, the result is either -1 or 1, so that the standard deviation is easily calculated as 1.0.</p>
<ul>
<li>for the single bet of a 1000 tokens: we have 1) 1000 bet on one table and 0 bets on the other tables, turns out a little bit differently. the standard deviation on this event is the same 31.62.</li>
</ul>
<blockquote>
<p>Time: 00:02:20</p>
</blockquote>
<h2>08 - quiz: Coin flip casino: Reward-risk</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-ef6ea87a5edfdd52.png"/></p>
<p><strong>Risk adjusted reward</strong></p>
<ul>
<li>it is like the Sharp ratio that we've looked at in other contexts.</li>
<li>single bet case:  expected return was $20 and our risk was $31.62, <code>adjusted reward/ ratio = 0.63</code>.</li>
<li>for multi-bet case: adjusted reward/ ratio =?</li>
</ul>
<p>__Solution: <code>adjusted reward/ ratio = reword/risk = $20/1 =20</code>
so, A thousand bets is better than a single bet.</p>
<blockquote>
<p>Time: 00:00:28</p>
</blockquote>
<h2>09  - Coin-Flip Casino Observations</h2>
<p><img alt="" src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-15e5268298cb2a68.png"/></p>
<ul>
<li>So bet all 1,000 chips on a single coin flip: the sharp ratio for the single  $SR_{single} = 0.63$</li>
<li>1000 times in other words 1 chip on each of 1000 tables, the sharpe ratio is $SR_{multi} = 20$.</li>
<li>$SR_{multi} = 20 &gt; 40 \times  SR_{single} $</li>
<li>In general,  $SR_{n} = \sqrt{n} SR_{single} $ wehre n = number of bets</li>
<li>this relation above is exactly like the fundamental law of active portfolio management.</li>
</ul>
<p>Performance is related to skill (how good are you at predicting the future return of the stock) and breadth (by the square root of your breadth).</p>
<blockquote>
<p>Time: 00:02:34</p>
</blockquote>
<h2>10 - Coin-Flip Casino Lessons</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-4e24887c5f9e02f6.png"/></p>
<ul>
<li><p>The Coin-Flip Casino experiment enabled us to allocate our 1,000 tokens to 1,000 tables.</p>
</li>
<li><p>We looked at two extreme cases:  1) a small bet on all 1,000 tables, 2) all our money on one table.</p>
</li>
<li><p>The expected return was the same in both cases, about $20, but the risk was substantially higher for the single bet case. True for both risk to lose everything and risk as standard deviation.</p>
</li>
</ul>
<p><strong>Three lessons</strong>.</p>
<ol>
<li>higher alpha generates a higher Sharpe ratio. (reword)</li>
<li>more execution opportunities provides a higher Sharpe ratio. (breadth)</li>
<li>Sharpe ratio grows as the square root of breadth.</li>
</ol>
<blockquote>
<p>Time: 00:00:53</p>
</blockquote>
<h2>11 - Back to the real world</h2>
<p>![ (/assets/images/计算机科学/118382-3da2aedbe70f4841.png)</p>
<p>let's consider two real-world funds.</p>
<ol>
<li>RenTec or Renaissance Technologies, founded by Jim Simons, a math and computer since professor, and he's had tremendous performance over the last several decades: trades may be 100,000 times per day</li>
<li>Warren Buffet, who runs Berkshire Hathaway: holds maybe 120 stocks, doesn't trade much, just holds them.</li>
</ol>
<ul>
<li><p>Both the funds over the years have produced similar returns.</p>
</li>
<li><p>there is a theory that can relate them, it's the fundamental law of active portfolio management.</p>
</li>
</ul>
<blockquote>
<p>Time: 00:01:10</p>
</blockquote>
<h2>12 - IR, IC, and breadth</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-8e081edc87ddff70.png"/></p>
<ol>
<li>information ratio.</li>
</ol>
<ul>
<li><p>recall, $r_p =\beta \times r_m + \alpha$. portfolio return is the market component of the return $\beta$  times the market return, plus the residual return $\alpha$.</p>
</li>
<li><p>alpha is about skill. the Sharpe ratio of this skill component is the information ratio.</p>
</li>
<li><p>$IC = mean({\alpha}) / std( \alpha) $ Note the risk and reword are calculated by looking back historically at the daily values of alpha.</p>
<ul>
<li>information ration applies in many different cases, not just in this fundamental law case.</li>
</ul>
</li>
</ul>
<p>The <strong>information ratio is essentially a Sharpe ratio of excess return, this part that's due to skill.</strong></p>
<blockquote>
<p>Time: 00:02:09</p>
</blockquote>
<h2>13 - IR, IC and breadth cont</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-486723a0c210c8af.png"/></p>
<ol start="2">
<li>information coefficient (IC), is the <em>correlation</em> of the manager's forecast to actual returns.</li>
<li>breadth (BR) represents the number of trading opportunities per year.</li>
</ol>
<ul>
<li>If hold 120 stocks all year, that's 120 trading opportunities.</li>
<li>if trade 100,000 times per day, multiply that by the trading days in a year,</li>
<li>Key is if buy and hold, the number of positions in that portfolio is the number of trading opportunities.</li>
</ul>
<p>Time: 00:01:10</p>
<h2>14 - The Fundamental Law</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-3cc7b56f8e993fb8.png"/></p>
<p><strong>the fundamental law as expressed by Richard Grinold</strong>.</p>
<ul>
<li><code>IR = IC * sqrt(BR)</code> or $IR = IC \times \sqrt{BR} = mean(\alpha) / std(\alpha) * \sqrt{BR}$</li>
</ul>
<p><strong>Proof of the Fundamental Law</strong></p>
<ul>
<li>Since performance is related to skill and breadth of a manager, one can improve the performance by improving a skill or increasing breadth (by applying the skill to more investment opportunities).</li>
<li>it is a lot easier to increase breadth by finding additional stocks, but please keep in mind, as you increase the breadth, the overall performance only increases as $\sqrt{BR}$.</li>
</ul>
<blockquote>
<p>Time: 00:01:39</p>
</blockquote>
<h2>15 - quiz: Simons vs Buffet</h2>
<p><img alt=" " src="/media/wwww/share/study/聚聚/源数据/博客聚合/conge.livingwithfcs.org/assets/images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/118382-f7a8f0c50ee6467f.png"/></p>
<p>Assuming that both Simons and Buffet have the same information ratio and that Simons' algorithms are only one 1000th as smart as Buffet and that Buffet trades 120 times per year.</p>
<p>Given that, how many trades must Simons execute in order to maintain the information ratio at the same level as Buffet?</p>
<p><strong>Solution</strong>: 120,000,000</p>
<ul>
<li>$IR_{Buffet} = IR_{Simons} = IC_{Buffet} * \sqrt{120} = IC_{Simon} * \sqrt{TradingTime_{Simons}}$</li>
<li>So, $TradingTime_{Simons} = (IC_{Buffet}/IC_{Simons} \times \sqrt{120})^2 = (1000 * \sqrt{120})^2 = 120,000,000$</li>
</ul>
<blockquote>
<p>Time: 00:01:10</p>
</blockquote>
<blockquote>
<p>Total Time: 00:25:45</p>
</blockquote>
<pre><code>2019-03-05 初稿
</code></pre>
