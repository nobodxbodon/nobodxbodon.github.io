<h2><a href="https://github.com/sakurawald/sakurawald.github.io/blob/master/source/_posts/fix-nvidia-drm-issues.md">仓库源文</a>，<a href="https://sakurawald.github.io/posts/fix-nvidia-drm-issues">站点原文</a></h2>
<h1>Fix nvidia drm issues</h1>
<h2>Observation</h2>
<p>I have two external monitors, the first one is a 2.5k Samsung monitor, and athe second one is a Asus monitor.</p>
<p>If I use the built-in monitor in laptop, everything works perfect.
If I connect my laptop to an external monitor, strange things happens:</p>
<ul>
<li>In KDE, if the <code>global scale</code> is <code>100%</code>, then qt widgets renders normally.</li>
<li>In KDE, if the <code>global scale</code> is <code>150%</code> or <code>200%</code>, then qt widgets renders corruptly until a re-paint.</li>
<li>For both Samsung monitor and Asus monitor, the external monitor screen becomes black, only with a movable mouse cursor. (The desktop environment is running normally, but renders black with only a mouse cursor)</li>
<li>For both Samsung monitor and Asus monitor, awake from a sleep makes the external screen becomes black.</li>
<li>For both Samsung monitor and Asus monitor, there is a possibility to <code>reboot</code> into black screen in external monitor (The desktop environment is running normally, but renders black with only a mouse cursor).</li>
<li>Only for the Asus monitor, move the windows will cause a compisition flickers on top-left of the moved window, and you can see the things below the moved window.</li>
<li>In <code>Tray Panel</code>, the <code>Plasma Renderer</code> says <code>Software rendering in use</code>.</li>
</ul>
<h2>Solution</h2>
<p>Add <code>nvidia_drm.fbdev=1</code> into your kernel parameters, to let <code>KWin</code> runs with <code>hardware rendering</code> mode.</p>
