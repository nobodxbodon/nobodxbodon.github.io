<h2><a href="https://github.com/sakurawald/sakurawald.github.io/blob/master/source/_posts/fix-the-cpu-frequency-throttle-after-bad-charging.md">仓库源文</a>，<a href="https://sakurawald.github.io/posts/fix-the-cpu-frequency-throttle-after-bad-charging">站点原文</a></h2>
<h1>Fix the cpu frequency throttle after bad charging</h1>
<h2>Observation</h2>
<p>My cpu frequency is locked to 400mhz for all cores, even the cpu governor is set to <code>performance</code> policy.
The <code>power profile</code> in x11 is also set to <code>performance</code>.
Before this happens, I just charge my laptop via a <code>bad power supply</code> (which shows <code>not in charging</code>, the power supply is just enough to keep the balance.), and the <code>battery</code> is low.</p>
<p>I try to disable the <code>powersave management</code> in bios, and reboot the laptop, the problems remains the same.</p>
<p>It seems like its a hardware bug about the <code>power adapter</code>, when the <code>ac</code> is plug-in, the hardware will notify the cpu clock and sets its policy to <code>performance</code> policy in hardware-level, and if the <code>ac</code> is plug-out, sets to <code>powersave</code> policy.</p>
<p>The key point is that, after a <code>bad power supply</code>, the hardware detects something wrong, it thinks the <code>power adapter</code> is always off, and writes this data into the hardware storage, so there is nothing to do with the software-level.</p>
<h2>Solution</h2>
<p>Keep pressing the <code>power button</code>, and reset the <code>bios</code>. (This also resets all the data stored in the hardware-level.)</p>
